<!DOCTYPE html>
<html class="dark" lang="en">
<head>
<meta charset="utf-8"/>
<meta content="width=device-width, initial-scale=1.0" name="viewport"/>
<title>Quravel - Streaming: Pass the Monster Meat, Milady!</title>
<script src="https://cdn.tailwindcss.com?plugins=forms,container-queries"></script>
<script>
    tailwind.config = {
        darkMode: "class",
        theme: {
            extend: {
                colors: {
                    primary: "#498BBB", 
                    "background-light": "#F3F4F6",
                    "background-dark": "#0B0E19",
                    "surface-dark": "#151926",
                    "footer-dark": "#0C0E14",
                    "text-light": "#E5E7EB",
                    "text-muted": "#9CA3AF"
                },
                fontFamily: {
                    display: ["Inter", "sans-serif"],
                    body: ["Inter", "sans-serif"],
                },
                borderRadius: {
                    DEFAULT: "0.5rem",
                },
                screens: {
                    'xs': '475px',
                },
            },
        },
    };
</script>
<link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&amp;display=swap" rel="stylesheet"/>
<link href="https://fonts.googleapis.com/css2?family=Material+Symbols+Outlined:wght,FILL@100..700,0..1&amp;display=swap" rel="stylesheet"/>
<!-- Ads Script -->
<script src="https://pl28618037.effectivegatecpm.com/7a/03/70/7a0370708ca9313fa60058b5fa0c1022.js"></script>
<style>
    /* Prevent horizontal scrolling */
    html, body {
        overflow-x: hidden;
        width: 100%;
    }
    
    body {
        font-family: 'Inter', sans-serif;
    }
    
    .hide-scrollbar::-webkit-scrollbar {
        display: none;
    }
    
    .hide-scrollbar {
        -ms-overflow-style: none;
        scrollbar-width: none;
    }
    
    #mobile-menu {
        transition: transform 0.3s ease-in-out;
    }
    
    .menu-open {
        transform: translateX(0) !important;
    }
    
    .custom-scrollbar::-webkit-scrollbar {
        width: 6px;
    }
    
    .custom-scrollbar::-webkit-scrollbar-track {
        background: rgba(255, 255, 255, 0.05);
    }
    
    .custom-scrollbar::-webkit-scrollbar-thumb {
        background: rgba(255, 255, 255, 0.2);
        border-radius: 3px;
    }
    
    .custom-scrollbar::-webkit-scrollbar-thumb:hover {
        background: rgba(255, 255, 255, 0.3);
    }
    
    /* Video Container Responsive */
    .video-container-wrapper {
        position: relative;
        width: 100%;
        padding-bottom: 56.25%; /* 16:9 Aspect Ratio */
        height: 0;
        overflow: hidden;
        border-radius: 0.75rem;
        background: #000;
    }
    
    .video-container {
        position: absolute;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        border: none;
    }
    
    /* Episode list responsive styles */
    .episode-list-item {
        transition: all 0.2s ease;
    }
    
    .episode-list-item:hover {
        background: linear-gradient(90deg, rgba(73, 139, 187, 0.1) 0%, rgba(73, 139, 187, 0.05) 100%) !important;
        transform: translateX(4px);
    }
    
    .episode-list-item.active {
        background: linear-gradient(90deg, rgba(73, 139, 187, 0.15) 0%, rgba(73, 139, 187, 0.05) 100%) !important;
        border-left: 4px solid #498BBB !important;
    }
    
    /* Mobile optimizations */
    @media (max-width: 768px) {
        .server-buttons {
            justify-content: flex-start !important;
            overflow-x: auto;
            padding-bottom: 8px;
        }
        
        .server-buttons button {
            flex-shrink: 0;
        }
        
        .season-tabs {
            overflow-x: auto;
            padding-bottom: 4px;
        }
        
        /* Hide desktop episode section in mobile */
        #desktop-episode-section {
            display: none !important;
        }
    }
    
    @media (min-width: 769px) {
        .video-controls-mobile {
            display: none;
        }
        
        /* Hide mobile episode section in desktop */
        #mobile-episode-section {
            display: none !important;
        }
    }
    
    /* New styles for description expansion */
    .description-container {
        position: relative;
        overflow: hidden;
        transition: max-height 0.3s ease-out;
    }
    
    .description-container.collapsed {
        max-height: 4.5rem; /* Approximately 3 lines */
    }
    
    .description-container.expanded {
        max-height: 1000px;
    }
    
    .description-toggle {
        display: flex;
        align-items: center;
        gap: 4px;
        color: #498BBB;
        font-size: 0.875rem;
        font-weight: 500;
        cursor: pointer;
        margin-top: 8px;
        transition: color 0.2s;
    }
    
    .description-toggle:hover {
        color: #3a6ea5;
    }
    
    .description-toggle .material-symbols-outlined {
        font-size: 18px;
        transition: transform 0.3s;
    }
    
    .description-toggle.expanded .material-symbols-outlined {
        transform: rotate(90deg);
    }
    
    /* New styles for season navigation */
    .season-navigation-container {
        position: relative;
        display: flex;
        align-items: center;
        gap: 8px;
        margin-bottom: 16px;
    }
    
    .season-tabs-wrapper {
        position: relative;
        flex: 1;
        overflow: hidden;
    }
    
    .season-tabs {
        display: flex;
        gap: 4px;
        overflow-x: auto;
        scroll-behavior: smooth;
        padding: 8px 0;
        -webkit-overflow-scrolling: touch;
    }
    
    .season-tabs::-webkit-scrollbar {
        display: none;
    }
    
    .season-nav-btn {
        position: absolute;
        top: 50%;
        transform: translateY(-50%);
        background: rgba(73, 139, 187, 0.9);
        color: white;
        border: none;
        width: 32px;
        height: 32px;
        border-radius: 50%;
        display: flex;
        align-items: center;
        justify-content: center;
        cursor: pointer;
        z-index: 10;
        transition: all 0.2s;
        opacity: 0;
        visibility: hidden;
        box-shadow: 0 2px 8px rgba(0, 0, 0, 0.2);
    }
    
    .season-nav-btn:hover {
        background: #498BBB;
        transform: translateY(-50%) scale(1.1);
    }
    
    .season-nav-btn.left {
        left: 0;
    }
    
    .season-nav-btn.right {
        right: 0;
    }
    
    .season-navigation-container:hover .season-nav-btn {
        opacity: 1;
        visibility: visible;
    }
    
    /* Show arrows only on desktop */
    @media (max-width: 1024px) {
        .season-nav-btn {
            display: none;
        }
    }
    
    /* Mobile touch scrolling enhancement */
    @media (max-width: 768px) {
        .season-tabs {
            scroll-snap-type: x mandatory;
            scroll-padding: 16px;
        }
        
        .season-btn {
            scroll-snap-align: start;
        }
    }
    
    /* Season button hover effects */
    .season-btn {
        position: relative;
        transition: all 0.2s ease;
        padding: 10px 20px;
        border-radius: 6px;
        min-width: 100px;
        text-align: center;
    }
    
    .season-btn:hover:not(.active) {
        background: rgba(73, 139, 187, 0.1);
        transform: translateY(-1px);
        box-shadow: 0 2px 8px rgba(73, 139, 187, 0.15);
    }
    
    .season-btn.active {
        background: rgba(73, 139, 187, 0.15);
        box-shadow: 0 4px 12px rgba(73, 139, 187, 0.2);
        transform: translateY(-1px);
    }
    
    /* Mobile header adjustments */
    @media (max-width: 640px) {
        .header-logo {
            position: static !important;
            transform: none !important;
            margin-left: auto;
            margin-right: auto;
            width: fit-content;
        }
        
        .header-left {
            width: 40px;
            flex-shrink: 0;
        }
        
        .header-right {
            width: 40px;
            flex-shrink: 0;
        }
    }
    
    /* Card hover effects */
    .recommended-card {
        transition: transform 0.3s ease;
    }
    
    .recommended-card:hover {
        transform: translateY(-4px);
    }
    
    /* Mobile video controls */
    .video-controls-mobile {
        background: var(--page-bg, #F3F4F6);
        border-radius: 0.75rem;
        margin-top: 12px;
        padding: 16px;
        box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1);
    }
    
    .dark .video-controls-mobile {
        background: var(--page-bg, #0B0E19);
    }
    
    /* Responsive layout for sidebars */
    @media (min-width: 1024px) {
        .sidebar-main {
            width: 70%;
            flex: 0 0 70%;
        }
        
        .sidebar-right {
            width: 30%;
            flex: 0 0 30%;
        }
    }
    
    /* Mobile unified block styling */
    .mobile-video-block {
        background: white;
        dark:bg-[#151926];
        border-radius: 0.75rem;
        overflow: hidden;
        box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1);
        border: 1px solid #e5e7eb;
        dark:border-gray-800;
    }
    
    .dark .mobile-video-block {
        background: #151926;
        border-color: #374151;
    }
    
    /* Episode list styling for both layouts */
    .episode-list-container {
        max-height: 400px;
        overflow-y: auto;
    }
    
    /* Desktop episode section styling */
    .desktop-episode-list {
        max-height: 500px;
        overflow-y: auto;
    }
    
    .desktop-episode-list .episode-list-item {
        padding: 12px 16px;
        margin-bottom: 4px;
        border-radius: 6px;
        border-left: 3px solid transparent;
    }
    
    .desktop-episode-list .episode-list-item:hover {
        background: rgba(73, 139, 187, 0.1) !important;
        border-left: 3px solid rgba(73, 139, 187, 0.3);
    }
    
    .desktop-episode-list .episode-list-item.active {
        background: rgba(73, 139, 187, 0.15) !important;
        border-left: 3px solid #498BBB;
    }
    
    /* Mobile episode section styling */
    .mobile-episode-list .episode-list-item {
        padding: 14px 16px;
        margin-bottom: 4px;
        border-radius: 8px;
        border-left: 4px solid transparent;
    }
    
    .mobile-episode-list .episode-list-item:hover {
        background: rgba(73, 139, 187, 0.1) !important;
        border-left: 4px solid rgba(73, 139, 187, 0.3);
    }
    
    .mobile-episode-list .episode-list-item.active {
        background: rgba(73, 139, 187, 0.15) !important;
        border-left: 4px solid #498BBB;
    }
</style>
</head>
<body class="bg-background-light dark:bg-background-dark text-gray-900 dark:text-text-light transition-colors duration-300 min-h-screen flex flex-col relative">
<!-- Mobile Menu Overlay -->
<div class="fixed inset-0 bg-black/50 z-40 hidden lg:hidden" id="mobile-menu-overlay" onclick="toggleMobileMenu()"></div>

<!-- Mobile Menu -->
<div class="fixed top-0 left-0 h-full w-64 bg-white dark:bg-[#151926] z-50 transform -translate-x-full lg:hidden overflow-y-auto shadow-2xl" id="mobile-menu">
<div class="p-4 border-b border-gray-200 dark:border-gray-700 flex justify-between items-center">
<img alt="Quravel Logo" class="h-8 object-contain" src="https://lh3.googleusercontent.com/aida-public/AB6AXuDqiUc86NAc2oPWF0jZS6ltVT0qDRUQLGYe-vsh90aCjNPCKRUYsR2joEXfq121iCQ1DMhEXbbjY-Rm6ydRKKVvOD7XCHpsnpYv4oUDQP6h-KZ9tUpwQb33LAseATibNSPDDxAViL3XAYheHWPQCau7pQCd7-XFT2YjY86y-DFUxv6SfYoh27gsa2-RiKjPMnhZfSvjYzFQSeYDzy64a_9Lmf5_NT9MkYffdzHclH1EyMht0psBW3wqnbmTFh6wbG5Xh4VXCnRWONM"/>
<button class="text-gray-500 hover:text-primary" onclick="toggleMobileMenu()">
<span class="material-symbols-outlined">close</span>
</button>
</div>
<div class="p-4 space-y-4">
<a class="block text-sm font-medium hover:text-primary py-2 border-b border-gray-100 dark:border-gray-800" href="#">Home</a>
<div class="py-2 border-b border-gray-100 dark:border-gray-800">
<button class="flex items-center justify-between w-full text-sm font-medium hover:text-primary focus:outline-none" onclick="toggleMobileDropdown('genre-mobile')">
<span>Genre</span>
<span class="material-symbols-outlined text-sm transform transition-transform" id="genre-arrow">expand_more</span>
</button>
<div class="hidden mt-2 ml-4 space-y-2 text-sm text-gray-500 dark:text-gray-400" id="genre-mobile">
<a class="block hover:text-primary" href="#">Action</a>
<a class="block hover:text-primary" href="#">Adventure</a>
<a class="block hover:text-primary" href="#">Comedy</a>
</div>
</div>
<div class="py-2 border-b border-gray-100 dark:border-gray-800">
<button class="flex items-center justify-between w-full text-sm font-medium hover:text-primary focus:outline-none" onclick="toggleMobileDropdown('country-mobile')">
<span>Country</span>
<span class="material-symbols-outlined text-sm transform transition-transform" id="country-arrow">expand_more</span>
</button>
<div class="hidden mt-2 ml-4 space-y-2 text-sm text-gray-500 dark:text-gray-400" id="country-mobile">
<a class="block hover:text-primary" href="#">USA</a>
<a class="block hover:text-primary" href="#">Japan</a>
</div>
</div>
<a class="block text-sm font-medium hover:text-primary py-2 border-b border-gray-100 dark:border-gray-800" href="#">Top IMDB</a>
<a class="block text-sm font-medium hover:text-primary py-2" href="#">Updates</a>
</div>
</div>

<!-- Header -->
<header class="fixed top-0 w-full z-40 bg-white/95 dark:bg-[#0B0E19]/95 backdrop-blur-sm border-b border-gray-200 dark:border-gray-800 shadow-sm">
<div class="container mx-auto px-4 h-16 flex items-center justify-between">
<div class="flex items-center gap-4 header-left">
<button class="lg:hidden text-gray-600 dark:text-gray-200 focus:outline-none" onclick="toggleMobileMenu()">
<span class="material-symbols-outlined text-3xl">menu</span>
</button>
<nav class="hidden lg:flex items-center space-x-6 text-sm font-medium">
<a class="hover:text-primary transition-colors" href="#">Home</a>
<div class="relative group">
<button class="flex items-center space-x-1 hover:text-primary transition-colors focus:outline-none py-4">
<span>Genre</span>
<span class="material-symbols-outlined text-sm">expand_more</span>
</button>
<div class="absolute top-full left-0 w-48 sm:w-64 md:w-[600px] bg-white dark:bg-[#1A1D29] rounded-b-lg shadow-xl opacity-0 invisible group-hover:opacity-100 group-hover:visible transition-all duration-200 border-t-2 border-primary grid grid-cols-2 sm:grid-cols-3 md:grid-cols-4 gap-4 p-6 z-50">
<a class="hover:text-primary block text-sm text-gray-600 dark:text-gray-400" href="#">Action</a>
<a class="hover:text-primary block text-sm text-gray-600 dark:text-gray-400" href="#">Adventure</a>
<a class="hover:text-primary block text-sm text-gray-600 dark:text-gray-400" href="#">Comedy</a>
<a class="hover:text-primary block text-sm text-gray-600 dark:text-gray-400" href="#">Drama</a>
</div>
</div>
<div class="relative group">
<button class="flex items-center space-x-1 hover:text-primary transition-colors focus:outline-none py-4">
<span>Country</span>
<span class="material-symbols-outlined text-sm">expand_more</span>
</button>
<div class="absolute top-full left-0 w-48 sm:w-64 md:w-[600px] bg-white dark:bg-[#1A1D29] rounded-b-lg shadow-xl opacity-0 invisible group-hover:opacity-100 group-hover:visible transition-all duration-200 border-t-2 border-primary grid grid-cols-2 sm:grid-cols-3 md:grid-cols-4 gap-4 p-6 z-50">
<a class="hover:text-primary block text-sm text-gray-600 dark:text-gray-400" href="#">USA</a>
<a class="hover:text-primary block text-sm text-gray-600 dark:text-gray-400" href="#">Japan</a>
</div>
</div>
<a class="hover:text-primary transition-colors" href="#">Top IMDB</a>
<a class="hover:text-primary transition-colors" href="#">Updates</a>
</nav>
</div>
<div class="header-logo absolute left-1/2 transform -translate-x-1/2 sm:static sm:transform-none sm:mx-auto">
<a class="block" href="/">
<img alt="Quravel Logo" class="h-8 md:h-10 object-contain" src="https://lh3.googleusercontent.com/aida-public/AB6AXuBJUVSMqcvlsLRod5Xj-MZhjFAWxv45A-9D1r1RCogjetrU2yKas3rRIuvSZRytOe6KmnI1y8NBGlIDGaE0UV5-mx19YpDf5v0SsajVxTc0VUCDku8E8PC54rDIUGGhmt44NSDXMGfnGVTtfzGJ8Cj6U15erHms74L8zDNtfVtIjG013mT9k-H5Psf5KSd570YR8_DAtEfUBmcVIMfE5LNH3WO14T7Cv3psWjV5O4UWogAMASg1czrkMA4qcRagH2Mtb7wqzWRn0BQ"/>
</a>
</div>
<div class="flex items-center space-x-4 header-right">
<div class="relative hidden sm:block group z-50">
<input class="bg-gray-100 dark:bg-gray-800 text-sm rounded-full py-2 pl-4 pr-10 focus:outline-none focus:ring-2 focus:ring-primary w-48 transition-all dark:text-white border-none group-focus-within:w-64" placeholder="Search..." type="text"/>
<span class="material-symbols-outlined absolute right-3 top-2 text-gray-400 text-lg cursor-pointer hover:text-primary">search</span>
<div class="absolute right-0 top-full mt-2 w-80 bg-white dark:bg-[#1A1D29] rounded-xl shadow-2xl border border-gray-100 dark:border-gray-700 overflow-hidden invisible group-focus-within:visible opacity-0 group-focus-within:opacity-100 transition-all duration-200 origin-top-right transform scale-95 group-focus-within:scale-100 z-50">
<div class="max-h-[400px] overflow-y-auto custom-scrollbar p-2 space-y-1">
<a class="flex items-start gap-3 p-2 hover:bg-gray-100 dark:hover:bg-white/5 rounded-lg transition-colors group/item" href="#">
<img alt="Poster" class="w-10 h-14 object-cover rounded shadow-sm flex-shrink-0" src="https://lh3.googleusercontent.com/aida-public/AB6AXuBuupgb3nD25Wubm40iI5tWuP49EydCaUp0EiYjTBXI3qpDr-LerCLu9i6Cz1lAn9uEWj1X_Fo4FgoziLiAqHVGWLScn06tNXiGQnMbiwIt2Jrc5GUwtVkyxUxR-KnBNZOWx3ius4cMIi_7z-VZzkH8quuTo3pj8kme4akxKKbp_3vqbjKm9T8hT7rQXXLDHgki5FL3xJvGpHw8S68e_dM9PCjJcIIckD9hBK8E3s04iv_DuggJr6t4gvxdoUxAixkHyB5rAiCYW3k"/>
<div class="flex-1 min-w-0">
<h4 class="text-sm font-semibold text-gray-900 dark:text-white truncate group-hover/item:text-primary">The Lord of the Rings</h4>
<div class="flex items-center gap-2 text-xs text-gray-500 dark:text-gray-400 mt-0.5">
<span>2003</span>
<span class="w-0.5 h-0.5 bg-gray-500 rounded-full"></span>
<span>Movie</span>
</div>
</div>
</a>
<a class="flex items-start gap-3 p-2 hover:bg-gray-100 dark:hover:bg-white/5 rounded-lg transition-colors group/item" href="#">
<img alt="Poster" class="w-10 h-14 object-cover rounded shadow-sm flex-shrink-0" src="https://lh3.googleusercontent.com/aida-public/AB6AXuCwH3f4VjulnnLYk8EgFSCiOqFs12q4ivPSqucW7P7k4uOAN3qXURGd7iOxByylKHLJhbpiobEV442fMLZHwobXplWdRez-c71bcZODHHIHORqZw97zdSx_JgA4Cdym9n6VMtpcJXo3o5jc7jvKx13nsU2frrHJ8wgbcRH1cHIY8n7jLkRIsYOLDQ1uZWoGe99Imz98f_X9qskRvSTRVJiiJKF_DtE-ce0qw825vrwhgb66FQM3e_ymqoB8eBbjLZ5HuUePqbU5kYg"/>
<div class="flex-1 min-w-0">
<h4 class="text-sm font-semibold text-gray-900 dark:text-white truncate group-hover/item:text-primary">The Godfather</h4>
<div class="flex items-center gap-2 text-xs text-gray-500 dark:text-gray-400 mt-0.5">
<span>1972</span>
<span class="w-0.5 h-0.5 bg-gray-500 rounded-full"></span>
<span>Movie</span>
</div>
</div>
</a>
</div>
<div class="p-3 border-t border-gray-100 dark:border-gray-700 bg-gray-50 dark:bg-[#151926] flex justify-center">
<button class="bg-primary hover:bg-opacity-90 text-white text-xs font-semibold py-2 px-6 rounded-full transition-colors shadow-sm">
                            View all results
                        </button>
</div>
</div>
</div>
<button class="sm:hidden text-gray-600 dark:text-gray-200" onclick="toggleMobileSearch()">
<span class="material-symbols-outlined">search</span>
</button>
</div>
</div>
<div class="hidden sm:hidden bg-white dark:bg-[#0B0E19] border-b border-gray-200 dark:border-gray-800 p-3 absolute w-full top-16 left-0 z-30" id="mobile-search-bar">
<div class="relative group">
<input class="w-full bg-gray-100 dark:bg-gray-800 text-sm rounded-full py-2 pl-4 pr-10 focus:outline-none focus:ring-2 focus:ring-primary dark:text-white border-none" placeholder="Search movies, shows..." type="text"/>
<span class="material-symbols-outlined absolute right-3 top-2 text-gray-400 text-lg">search</span>
<div class="absolute left-0 top-full mt-2 w-full bg-white dark:bg-[#1A1D29] rounded-xl shadow-2xl border border-gray-100 dark:border-gray-700 overflow-hidden invisible group-focus-within:visible opacity-0 group-focus-within:opacity-100 transition-all duration-200 origin-top transform scale-95 group-focus-within:scale-100 z-50">
<div class="max-h-[300px] overflow-y-auto custom-scrollbar p-2 space-y-1">
<a class="flex items-start gap-3 p-2 hover:bg-gray-100 dark:hover:bg-white/5 rounded-lg transition-colors" href="#">
<img alt="Poster" class="w-10 h-14 object-cover rounded shadow-sm flex-shrink-0" src="https://lh3.googleusercontent.com/aida-public/AB6AXuBuupgb3nD25Wubm40iI5tWuP49EydCaUp0EiYjTBXI3qpDr-LerCLu9i6Cz1lAn9uEWj1X_Fo4FgoziLiAqHVGWLScn06tNXiGQnMbiwIt2Jrc5GUwtVkyxUxR-KnBNZOWx3ius4cMIi_7z-VZzkH8quuTo3pj8kme4akxKKbp_3vqbjKm9T8hT7rQXXLDHgki5FL3xJvGpHw8S68e_dM9PCjJcIIckD9hBK8E3s04iv_DuggJr6t4gvxdoUxAixkHyB5rAiCYW3k"/>
<div>
<h4 class="text-sm font-semibold text-gray-900 dark:text-white truncate">The Lord of the Rings</h4>
<div class="text-xs text-gray-500 dark:text-gray-400 mt-0.5">2003 • Movie</div>
</div>
</a>
</div>
<div class="p-3 border-t border-gray-100 dark:border-gray-700 bg-gray-50 dark:bg-[#151926] flex justify-center">
<button class="bg-primary hover:bg-opacity-90 text-white text-xs font-semibold py-2 px-6 rounded-full transition-colors shadow-sm">
                        View all results
                    </button>
</div>
</div>
</div>
</div>
</header>

<main class="flex-grow pt-20 pb-12 w-full max-w-screen-2xl mx-auto px-4">
    <!-- Mobile Unified Video Block -->
    <div class="lg:hidden mb-6 mobile-video-block">
        <!-- Video Player -->
        <div class="p-0">
            <div class="video-container-wrapper" id="video-player-container">
                <!-- Video will be loaded here dynamically -->
                <div class="absolute inset-0 flex items-center justify-center bg-black" id="video-loading-overlay">
                    <span class="material-symbols-outlined text-6xl text-white opacity-50 group-hover:opacity-100 transition-opacity cursor-pointer" id="play-button">play_circle</span>
                </div>
            </div>
        </div>
        
        <!-- Mobile Video Controls -->
        <div class="video-controls-mobile bg-background-light dark:bg-background-dark" id="mobile-video-controls">
            <div class="flex flex-col gap-4">
                <!-- Current watching info -->
                <div class="flex items-center justify-between">
                    <div class="flex items-center gap-2">
                        <span class="text-sm text-gray-500 dark:text-gray-400">You R Watching:</span>
                        <span class="font-bold text-primary" id="current-episode-display-mobile">Episode 1</span>
                    </div>
                    <div class="flex items-center gap-1 text-xs text-gray-500 dark:text-gray-400">
                        <span class="material-symbols-outlined text-sm">tv</span>
                        <span id="current-season-display-mobile">S1</span>
                    </div>
                </div>
                
                <!-- Server info -->
                <div class="flex items-center gap-2">
                    <span class="text-xs text-gray-500 dark:text-gray-400">Server:</span>
                    <span class="text-xs font-bold text-primary" id="current-server-display-mobile">SUB-HD-01</span>
                </div>
                
                <!-- Episode navigation and Add to List -->
                <div class="flex items-center justify-between gap-3">
                    <button class="flex items-center gap-1 flex-1 justify-center text-xs bg-gray-100 dark:bg-gray-800 hover:bg-primary hover:text-white px-4 py-3 rounded-lg transition-colors dark:text-gray-300" onclick="changeEpisode('prev')">
                        <span class="material-symbols-outlined text-sm">skip_previous</span> Prev
                    </button>
                    
                    <div class="relative group">
                        <button class="flex items-center gap-1 text-xs bg-primary/10 text-primary hover:bg-primary hover:text-white px-4 py-3 rounded-lg transition-colors" id="add-to-list-btn-mobile">
                            <span class="material-symbols-outlined text-sm">add</span>
                            <span id="current-list-status-text-mobile">Add to List</span>
                        </button>
                        <div class="absolute left-0 top-full mt-2 w-48 bg-white dark:bg-surface-dark rounded-lg shadow-xl py-1 z-20 opacity-0 invisible group-hover:opacity-100 group-hover:visible transition-all duration-200 border border-gray-200 dark:border-gray-700 text-xs">
                            <button class="block w-full text-left px-4 py-2 hover:bg-gray-100 dark:hover:bg-gray-800 text-gray-700 dark:text-gray-300" onclick="updateListStatus('Planning to watch')">Planning to watch</button>
                            <button class="block w-full text-left px-4 py-2 hover:bg-gray-100 dark:hover:bg-gray-800 text-gray-700 dark:text-gray-300" onclick="updateListStatus('Watching')">Watching</button>
                            <button class="block w-full text-left px-4 py-2 hover:bg-gray-100 dark:hover:bg-gray-800 text-gray-700 dark:text-gray-300" onclick="updateListStatus('Completed')">Completed</button>
                            <button class="block w-full text-left px-4 py-2 hover:bg-gray-100 dark:hover:bg-gray-800 text-gray-700 dark:text-gray-300" onclick="updateListStatus('Rewatching')">Rewatching</button>
                            <button class="block w-full text-left px-4 py-2 hover:bg-gray-100 dark:hover:bg-gray-800 text-gray-700 dark:text-gray-300" onclick="updateListStatus('Dropped')">Dropped</button>
                            <div class="border-t border-gray-200 dark:border-gray-700 my-1"></div>
                            <button class="block w-full text-left px-4 py-2 hover:bg-red-50 dark:hover:bg-red-900/20 text-red-500" onclick="updateListStatus('Add to List')">Remove from list</button>
                        </div>
                    </div>
                    
                    <button class="flex items-center gap-1 flex-1 justify-center text-xs bg-gray-100 dark:bg-gray-800 hover:bg-primary hover:text-white px-4 py-3 rounded-lg transition-colors dark:text-gray-300" onclick="changeEpisode('next')">
                        Next <span class="material-symbols-outlined text-sm">skip_next</span>
                    </button>
                </div>
                
                <!-- Season Selection for Mobile -->
                <div class="pt-4 border-t border-gray-200 dark:border-gray-700">
                    <h3 class="text-sm font-medium text-gray-700 dark:text-gray-300 mb-3">Select Season:</h3>
                    <div class="flex overflow-x-auto gap-2 pb-2 hide-scrollbar">
                        <button class="season-btn px-4 py-2 text-sm font-medium text-primary border-b-2 border-primary whitespace-nowrap transition-colors active" data-season="1" onclick="selectSeason(this)">Season 1</button>
                        <button class="season-btn px-4 py-2 text-sm font-medium text-gray-500 dark:text-gray-400 hover:text-gray-800 dark:hover:text-gray-200 whitespace-nowrap transition-colors border-b-2 border-transparent" data-season="2" onclick="selectSeason(this)">Season 2</button>
                        <button class="season-btn px-4 py-2 text-sm font-medium text-gray-500 dark:text-gray-400 hover:text-gray-800 dark:hover:text-gray-200 whitespace-nowrap transition-colors border-b-2 border-transparent" data-season="3" onclick="selectSeason(this)">Season 3</button>
                        <button class="season-btn px-4 py-2 text-sm font-medium text-gray-500 dark:text-gray-400 hover:text-gray-800 dark:hover:text-gray-200 whitespace-nowrap transition-colors border-b-2 border-transparent" data-season="4" onclick="selectSeason(this)">Season 4</button>
                        <button class="season-btn px-4 py-2 text-sm font-medium text-gray-500 dark:text-gray-400 hover:text-gray-800 dark:hover:text-gray-200 whitespace-nowrap transition-colors border-b-2 border-transparent" data-season="ova" onclick="selectSeason(this)">OVA</button>
                    </div>
                </div>
                
                <!-- Episode Selection for Mobile - Now appears as a list below season selection -->
                <div id="mobile-episode-section" class="pt-4 border-t border-gray-200 dark:border-gray-700">
                    <h3 class="text-sm font-medium text-gray-700 dark:text-gray-300 mb-3">Select Episode:</h3>
                    <div class="mobile-episode-list episode-list-container custom-scrollbar" id="episode-list-mobile">
                        <!-- Episodes will be loaded here as a list -->
                    </div>
                </div>
                
                <!-- Server Selection for Mobile -->
                <div class="pt-4 border-t border-gray-200 dark:border-gray-700">
                    <h3 class="text-sm font-medium text-gray-700 dark:text-gray-300 mb-3">Select Server:</h3>
                    <div class="space-y-4">
                        <div>
                            <span class="text-xs font-bold text-gray-500 dark:text-gray-400 mb-2 block">SUB:</span>
                            <div class="flex flex-wrap gap-2 server-buttons">
                                <button class="server-btn px-3 py-2 rounded text-xs font-medium bg-primary text-white shadow-sm hover:bg-primary/90 transition" data-server="SUB-HD-01" onclick="selectServer(this)">HD-01</button>
                                <button class="server-btn px-3 py-2 rounded text-xs font-medium bg-gray-200 dark:bg-gray-800 text-gray-700 dark:text-gray-300 hover:bg-gray-300 dark:hover:bg-gray-700 transition" data-server="SUB-HD-02" onclick="selectServer(this)">HD-02</button>
                                <button class="server-btn px-3 py-2 rounded text-xs font-medium bg-gray-200 dark:bg-gray-800 text-gray-700 dark:text-gray-300 hover:bg-gray-300 dark:hover:bg-gray-700 transition" data-server="SUB-HD-03" onclick="selectServer(this)">HD-03</button>
                                <button class="server-btn px-3 py-2 rounded text-xs font-medium bg-gray-200 dark:bg-gray-800 text-gray-700 dark:text-gray-300 hover:bg-gray-300 dark:hover:bg-gray-700 transition" data-server="SUB-HD-04" onclick="selectServer(this)">HD-04</button>
                                <button class="server-btn px-3 py-2 rounded text-xs font-medium bg-gray-200 dark:bg-gray-800 text-gray-700 dark:text-gray-300 hover:bg-gray-300 dark:hover:bg-gray-700 transition" data-server="SUB-HD-05" onclick="selectServer(this)">HD-05</button>
                            </div>
                        </div>
                        <div>
                            <span class="text-xs font-bold text-gray-500 dark:text-gray-400 mb-2 block">DUB:</span>
                            <div class="flex flex-wrap gap-2 server-buttons">
                                <button class="server-btn px-3 py-2 rounded text-xs font-medium bg-gray-200 dark:bg-gray-800 text-gray-700 dark:text-gray-300 hover:bg-gray-300 dark:hover:bg-gray-700 transition" data-server="DUB-HD-01" onclick="selectServer(this)">HD-01</button>
                                <button class="server-btn px-3 py-2 rounded text-xs font-medium bg-gray-200 dark:bg-gray-800 text-gray-700 dark:text-gray-300 hover:bg-gray-300 dark:hover:bg-gray-700 transition" data-server="DUB-HD-02" onclick="selectServer(this)">HD-02</button>
                                <button class="server-btn px-3 py-2 rounded text-xs font-medium bg-gray-200 dark:bg-gray-800 text-gray-700 dark:text-gray-300 hover:bg-gray-300 dark:hover:bg-gray-700 transition" data-server="DUB-HD-03" onclick="selectServer(this)">HD-03</button>
                                <button class="server-btn px-3 py-2 rounded text-xs font-medium bg-gray-200 dark:bg-gray-800 text-gray-700 dark:text-gray-300 hover:bg-gray-300 dark:hover:bg-gray-700 transition" data-server="DUB-HD-04" onclick="selectServer(this)">HD-04</button>
                                <button class="server-btn px-3 py-2 rounded text-xs font-medium bg-gray-200 dark:bg-gray-800 text-gray-700 dark:text-gray-300 hover:bg-gray-300 dark:hover:bg-gray-700 transition" data-server="DUB-HD-05" onclick="selectServer(this)">HD-05</button>
                            </div>
                        </div>
                        <div>
                            <span class="text-xs font-bold text-gray-500 dark:text-gray-400 mb-2 block">RAW:</span>
                            <div class="flex flex-wrap gap-2 server-buttons">
                                <button class="server-btn px-3 py-2 rounded text-xs font-medium bg-gray-200 dark:bg-gray-800 text-gray-700 dark:text-gray-300 hover:bg-gray-300 dark:hover:bg-gray-700 transition" data-server="RAW-HD-01" onclick="selectServer(this)">HD-01</button>
                                <button class="server-btn px-3 py-2 rounded text-xs font-medium bg-gray-200 dark:bg-gray-800 text-gray-700 dark:text-gray-300 hover:bg-gray-300 dark:hover:bg-gray-700 transition" data-server="RAW-HD-02" onclick="selectServer(this)">HD-02</button>
                                <button class="server-btn px-3 py-2 rounded text-xs font-medium bg-gray-200 dark:bg-gray-800 text-gray-700 dark:text-gray-300 hover:bg-gray-300 dark:hover:bg-gray-700 transition" data-server="RAW-HD-03" onclick="selectServer(this)">HD-03</button>
                                <button class="server-btn px-3 py-2 rounded text-xs font-medium bg-gray-200 dark:bg-gray-800 text-gray-700 dark:text-gray-300 hover:bg-gray-300 dark:hover:bg-gray-700 transition" data-server="RAW-HD-04" onclick="selectServer(this)">HD-04</button>
                                <button class="server-btn px-3 py-2 rounded text-xs font-medium bg-gray-200 dark:bg-gray-800 text-gray-700 dark:text-gray-300 hover:bg-gray-300 dark:hover:bg-gray-700 transition" data-server="RAW-HD-05" onclick="selectServer(this)">HD-05</button>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Responsive Layout - Mobile: Stacked, Desktop: Sidebar -->
    <div class="flex flex-col lg:flex-row gap-6">
        
        <!-- Main Content - 70% width on desktop -->
        <div class="w-full lg:w-7/10 sidebar-main space-y-8">
            
            <!-- Video Player (Desktop) -->
            <div class="hidden lg:block bg-white dark:bg-[#151926] rounded-xl overflow-hidden shadow-sm border border-gray-200 dark:border-gray-800">
                <div class="video-container-wrapper" id="desktop-video-player-container">
                    <!-- Video will be loaded here dynamically -->
                    <div class="absolute inset-0 flex items-center justify-center bg-black" id="desktop-video-loading-overlay">
                        <span class="material-symbols-outlined text-6xl text-white opacity-50 group-hover:opacity-100 transition-opacity cursor-pointer" id="desktop-play-button">play_circle</span>
                    </div>
                </div>
                
                <!-- Video Controls (Desktop) -->
                <div class="hidden lg:block p-4 border-t border-gray-200 dark:border-gray-700">
                    <div class="flex flex-col md:flex-row items-start md:items-center justify-between gap-4 mb-4 video-controls">
                        <div class="flex items-center gap-2">
                            <span class="text-sm text-gray-500 dark:text-gray-400">You are watching:</span>
                            <span class="font-bold text-primary" id="current-episode-display">Episode 1</span>
                        </div>
                        <div class="flex items-center gap-2">
                            <button class="flex items-center gap-1 text-xs bg-gray-100 dark:bg-gray-800 hover:bg-primary hover:text-white px-3 py-2 rounded transition-colors dark:text-gray-300" onclick="changeEpisode('prev')">
                                <span class="material-symbols-outlined text-sm">skip_previous</span> Prev
                            </button>
                            <button class="flex items-center gap-1 text-xs bg-gray-100 dark:bg-gray-800 hover:bg-primary hover:text-white px-3 py-2 rounded transition-colors dark:text-gray-300" onclick="changeEpisode('next')">
                                Next <span class="material-symbols-outlined text-sm">skip_next</span>
                            </button>
                            <div class="relative group ml-2">
                                <button class="flex items-center gap-1 text-xs bg-primary/10 text-primary hover:bg-primary hover:text-white px-3 py-2 rounded transition-colors" id="add-to-list-btn">
                                    <span class="material-symbols-outlined text-sm">add</span>
                                    <span id="current-list-status-text">Add to List</span>
                                </button>
                                <div class="absolute right-0 top-full mt-2 w-48 bg-white dark:bg-surface-dark rounded-lg shadow-xl py-1 z-20 opacity-0 invisible group-hover:opacity-100 group-hover:visible transition-all duration-200 border border-gray-200 dark:border-gray-700 text-xs">
                                    <button class="block w-full text-left px-4 py-2 hover:bg-gray-100 dark:hover:bg-gray-800 text-gray-700 dark:text-gray-300" onclick="updateListStatus('Planning to watch')">Planning to watch</button>
                                    <button class="block w-full text-left px-4 py-2 hover:bg-gray-100 dark:hover:bg-gray-800 text-gray-700 dark:text-gray-300" onclick="updateListStatus('Watching')">Watching</button>
                                    <button class="block w-full text-left px-4 py-2 hover:bg-gray-100 dark:hover:bg-gray-800 text-gray-700 dark:text-gray-300" onclick="updateListStatus('Completed')">Completed</button>
                                    <button class="block w-full text-left px-4 py-2 hover:bg-gray-100 dark:hover:bg-gray-800 text-gray-700 dark:text-gray-300" onclick="updateListStatus('Rewatching')">Rewatching</button>
                                    <button class="block w-full text-left px-4 py-2 hover:bg-gray-100 dark:hover:bg-gray-800 text-gray-700 dark:text-gray-300" onclick="updateListStatus('Dropped')">Dropped</button>
                                    <div class="border-t border-gray-200 dark:border-gray-700 my-1"></div>
                                    <button class="block w-full text-left px-4 py-2 hover:bg-red-50 dark:hover:bg-red-900/20 text-red-500" onclick="updateListStatus('Add to List')">Remove from list</button>
                                </div>
                            </div>
                        </div>
                    </div>
                    
                    <!-- Server Selection -->
                    <div class="space-y-3 mb-6 bg-gray-50 dark:bg-black/20 p-4 rounded-lg">
                        <div class="flex flex-col sm:flex-row gap-4 items-start sm:items-center">
                            <span class="text-xs font-bold text-gray-500 dark:text-gray-400 w-12 flex-shrink-0">SUB:</span>
                            <div class="flex flex-wrap gap-2 server-buttons">
                                <button class="server-btn px-3 py-2 rounded text-xs font-medium bg-primary text-white shadow-sm hover:bg-primary/90 transition" data-server="SUB-HD-01" onclick="selectServer(this)">HD-01</button>
                                <button class="server-btn px-3 py-2 rounded text-xs font-medium bg-gray-200 dark:bg-gray-800 text-gray-700 dark:text-gray-300 hover:bg-gray-300 dark:hover:bg-gray-700 transition" data-server="SUB-HD-02" onclick="selectServer(this)">HD-02</button>
                                <button class="server-btn px-3 py-2 rounded text-xs font-medium bg-gray-200 dark:bg-gray-800 text-gray-700 dark:text-gray-300 hover:bg-gray-300 dark:hover:bg-gray-700 transition" data-server="SUB-HD-03" onclick="selectServer(this)">HD-03</button>
                                <button class="server-btn px-3 py-2 rounded text-xs font-medium bg-gray-200 dark:bg-gray-800 text-gray-700 dark:text-gray-300 hover:bg-gray-300 dark:hover:bg-gray-700 transition" data-server="SUB-HD-04" onclick="selectServer(this)">HD-04</button>
                                <button class="server-btn px-3 py-2 rounded text-xs font-medium bg-gray-200 dark:bg-gray-800 text-gray-700 dark:text-gray-300 hover:bg-gray-300 dark:hover:bg-gray-700 transition" data-server="SUB-HD-05" onclick="selectServer(this)">HD-05</button>
                            </div>
                        </div>
                        <div class="flex flex-col sm:flex-row gap-4 items-start sm:items-center">
                            <span class="text-xs font-bold text-gray-500 dark:text-gray-400 w-12 flex-shrink-0">DUB:</span>
                            <div class="flex flex-wrap gap-2 server-buttons">
                                <button class="server-btn px-3 py-2 rounded text-xs font-medium bg-gray-200 dark:bg-gray-800 text-gray-700 dark:text-gray-300 hover:bg-gray-300 dark:hover:bg-gray-700 transition" data-server="DUB-HD-01" onclick="selectServer(this)">HD-01</button>
                                <button class="server-btn px-3 py-2 rounded text-xs font-medium bg-gray-200 dark:bg-gray-800 text-gray-700 dark:text-gray-300 hover:bg-gray-300 dark:hover:bg-gray-700 transition" data-server="DUB-HD-02" onclick="selectServer(this)">HD-02</button>
                                <button class="server-btn px-3 py-2 rounded text-xs font-medium bg-gray-200 dark:bg-gray-800 text-gray-700 dark:text-gray-300 hover:bg-gray-300 dark:hover:bg-gray-700 transition" data-server="DUB-HD-03" onclick="selectServer(this)">HD-03</button>
                                <button class="server-btn px-3 py-2 rounded text-xs font-medium bg-gray-200 dark:bg-gray-800 text-gray-700 dark:text-gray-300 hover:bg-gray-300 dark:hover:bg-gray-700 transition" data-server="DUB-HD-04" onclick="selectServer(this)">HD-04</button>
                                <button class="server-btn px-3 py-2 rounded text-xs font-medium bg-gray-200 dark:bg-gray-800 text-gray-700 dark:text-gray-300 hover:bg-gray-300 dark:hover:bg-gray-700 transition" data-server="DUB-HD-05" onclick="selectServer(this)">HD-05</button>
                            </div>
                        </div>
                        <div class="flex flex-col sm:flex-row gap-4 items-start sm:items-center">
                            <span class="text-xs font-bold text-gray-500 dark:text-gray-400 w-12 flex-shrink-0">RAW:</span>
                            <div class="flex flex-wrap gap-2 server-buttons">
                                <button class="server-btn px-3 py-2 rounded text-xs font-medium bg-gray-200 dark:bg-gray-800 text-gray-700 dark:text-gray-300 hover:bg-gray-300 dark:hover:bg-gray-700 transition" data-server="RAW-HD-01" onclick="selectServer(this)">HD-01</button>
                                <button class="server-btn px-3 py-2 rounded text-xs font-medium bg-gray-200 dark:bg-gray-800 text-gray-700 dark:text-gray-300 hover:bg-gray-300 dark:hover:bg-gray-700 transition" data-server="RAW-HD-02" onclick="selectServer(this)">HD-02</button>
                                <button class="server-btn px-3 py-2 rounded text-xs font-medium bg-gray-200 dark:bg-gray-800 text-gray-700 dark:text-gray-300 hover:bg-gray-300 dark:hover:bg-gray-700 transition" data-server="RAW-HD-03" onclick="selectServer(this)">HD-03</button>
                                <button class="server-btn px-3 py-2 rounded text-xs font-medium bg-gray-200 dark:bg-gray-800 text-gray-700 dark:text-gray-300 hover:bg-gray-300 dark:hover:bg-gray-700 transition" data-server="RAW-HD-04" onclick="selectServer(this)">HD-04</button>
                                <button class="server-btn px-3 py-2 rounded text-xs font-medium bg-gray-200 dark:bg-gray-800 text-gray-700 dark:text-gray-300 hover:bg-gray-300 dark:hover:bg-gray-700 transition" data-server="RAW-HD-05" onclick="selectServer(this)">HD-05</button>
                            </div>
                        </div>
                    </div>
                    
                    <!-- Season Selection with Navigation Arrows -->
                    <div class="season-navigation-container">
                        <button class="season-nav-btn left" onclick="scrollSeasons(-1)">
                            <span class="material-symbols-outlined text-lg">chevron_left</span>
                        </button>
                        <div class="season-tabs-wrapper">
                            <div class="season-tabs hide-scrollbar" id="season-tabs-container">
                                <button class="season-btn px-4 py-2 text-sm font-medium text-primary border-b-2 border-primary whitespace-nowrap transition-colors active" data-season="1" onclick="selectSeason(this)">Season 1</button>
                                <button class="season-btn px-4 py-2 text-sm font-medium text-gray-500 dark:text-gray-400 hover:text-gray-800 dark:hover:text-gray-200 whitespace-nowrap transition-colors border-b-2 border-transparent" data-season="2" onclick="selectSeason(this)">Season 2</button>
                                <button class="season-btn px-4 py-2 text-sm font-medium text-gray-500 dark:text-gray-400 hover:text-gray-800 dark:hover:text-gray-200 whitespace-nowrap transition-colors border-b-2 border-transparent" data-season="3" onclick="selectSeason(this)">Season 3</button>
                                <button class="season-btn px-4 py-2 text-sm font-medium text-gray-500 dark:text-gray-400 hover:text-gray-800 dark:hover:text-gray-200 whitespace-nowrap transition-colors border-b-2 border-transparent" data-season="4" onclick="selectSeason(this)">Season 4</button>
                                <button class="season-btn px-4 py-2 text-sm font-medium text-gray-500 dark:text-gray-400 hover:text-gray-800 dark:hover:text-gray-200 whitespace-nowrap transition-colors border-b-2 border-transparent" data-season="ova" onclick="selectSeason(this)">OVA</button>
                            </div>
                        </div>
                        <button class="season-nav-btn right" onclick="scrollSeasons(1)">
                            <span class="material-symbols-outlined text-lg">chevron_right</span>
                        </button>
                    </div>
                    
                    <!-- Episode Selection (Desktop) - List format with hover effect -->
                    <div id="desktop-episode-section" class="mt-6 pt-6 border-t border-gray-200 dark:border-gray-700">
                        <h3 class="text-sm font-medium text-gray-700 dark:text-gray-300 mb-3">Select Episode:</h3>
                        <div class="desktop-episode-list episode-list-container custom-scrollbar" id="episode-list-desktop">
                            <!-- Episodes will be loaded here as a list -->
                        </div>
                    </div>
                </div>
            </div>

            <!-- Show Details (Mobile) -->
            <div class="lg:hidden bg-white dark:bg-[#151926] rounded-xl p-6 shadow-sm border border-gray-200 dark:border-gray-800 h-fit">
                <div class="flex gap-4 mb-4">
                    <img alt="Poster" class="w-24 h-36 object-cover rounded-lg shadow-md flex-shrink-0" src="https://cdn.myanimelist.net/images/anime/1588/152250l.jpg"/>
                    <div>
                        <h1 class="text-xl font-bold leading-tight mb-2">Pass the Monster Meat, Milady!</h1>
                        <div class="flex flex-wrap gap-2 text-xs text-gray-500 dark:text-gray-400 mb-2">
                            <span class="px-1.5 py-0.5 border border-gray-300 dark:border-gray-700 rounded">TV-14</span>
                            <span class="px-1.5 py-0.5 bg-primary text-white rounded font-bold">HD</span>
                            <span class="flex items-center gap-1"><span class="material-symbols-outlined text-sm">mic</span> 12</span>
                            <span class="flex items-center gap-1"><span class="material-symbols-outlined text-sm">subtitles</span> 12</span>
                        </div>
                        <div class="text-xs text-gray-500 dark:text-gray-400">
                            Anime • 12 Episodes
                        </div>
                    </div>
                </div>
                <div class="description-container collapsed" id="description-container-mobile">
                    <p class="text-sm text-gray-600 dark:text-gray-300 leading-relaxed mb-2">Melphiera Marchalrayd, the daughter of a count, dedicates her time to researching the culinary possibilities of monster meat—a peculiar endeavor started by her late mother. By teaching the people of the Marchalrayd lands to prepare such exotic ingredients, Melphiera hopes to help stave off famine. Unfortunately, her unique tastes and intimate knowledge of monsters have led to her social isolation: few nobles interact with her willingly, disdainfully calling her the "Voracious Villainess."

When a monster attack erupts at a royal banquet—where Melphiera has been sent to find a husband—Aristide Rogier du Galbraith, the younger brother of the crown prince, leaps to her aid. Due to his terrifying skill in slaying monsters, Aristide has earned the title of "Blood-Man Duke." Charmed by Melphiera's fearlessness and intriguing culinary prowess, Aristide soon declares his intent to propose.

Together, Melphiera and Aristide, high society's most eccentric couple, strive to see beyond the cruel rumors and encourage each other's fascination with monsters and the art of preparing them.

                    </p>
                </div>
                <div class="description-toggle" id="description-toggle-mobile" onclick="toggleDescriptionMobile()">
                    <span>Read more</span>
                    <span class="material-symbols-outlined">arrow_forward</span>
                </div>
                <!-- SHOW DETAILS INFORMATION -->
                <div class="grid grid-cols-1 gap-3 text-xs text-gray-500 dark:text-gray-400 border-t border-gray-100 dark:border-gray-700 pt-4 mt-4">
                    <!-- Title Information -->
                    <div>
                        <span class="font-semibold text-gray-700 dark:text-gray-200">Title:</span> 
                        <span class="ml-1"> Pass the Monster Meat, Milady!</span>
                    </div>
                    <div>
                        <span class="font-semibold text-gray-700 dark:text-gray-200">Original:</span> 
                        <span class="ml-1">Akujiki Reijō to Kyōketsu Kōshaku: Sono Mamono, Watashi ga Oishiku Itadakimasu!</span>
                    </div>
                    <div>
                        <span class="font-semibold text-gray-700 dark:text-gray-200">Japanese:</span> 
                        <span class="ml-1">悪食令嬢と狂血公爵 〜その魔物、私が美味しくいただきます！〜</span>
                    </div>
                    
                    <!-- Synonyms -->
                    <div>
                        <span class="font-semibold text-gray-700 dark:text-gray-200">Synonyms:</span> 
                        <span class="ml-1">R</span>
                    </div>
                    
                    <!-- Airing Information -->
                    <div class="grid grid-cols-2 gap-2 mt-1">
                        <div>
                            <span class="font-semibold text-gray-700 dark:text-gray-200">Aired:</span> 
                            <span class="ml-1">October 3, 2025</span>
                        </div>
                        <div>
                            <span class="font-semibold text-gray-700 dark:text-gray-200">Premiered:</span> 
                            <span class="ml-1">Fall 2023</span>
                        </div>
                    </div>
                    
                    <!-- Duration & Status -->
                    <div class="grid grid-cols-2 gap-2">
                        <div>
                            <span class="font-semibold text-gray-700 dark:text-gray-200">Duration:</span> 
                            <span class="ml-1">24 min</span>
                        </div>
                        <div>
                            <span class="font-semibold text-gray-700 dark:text-gray-200">Status:</span> 
                            <span class="ml-1 text-blue-500">Finished Airing</span>
                        </div>
                    </div>
                    
                    <!-- Score -->
                    <div class="mt-1 flex items-center flex-wrap gap-x-2 gap-y-1">
                        <span class="font-semibold text-gray-700 dark:text-gray-200">Score:</span>
                        
                        <div class="flex items-center gap-1 text-gray-600 dark:text-gray-400">
                            <span style="color: #5391cf;">★</span>
                            <span>MAL: 7.1</span>
                        </div>
                        
                        <span class="text-gray-400 dark:text-gray-500">|</span>
                        
                        <div class="flex items-center gap-1 text-gray-600 dark:text-gray-400">
                            <span style="color: #ccbd5e;">★</span>
                            <span>IMDb: 6.7</span>
                        </div>
                    </div>
                    <!-- Popularity -->
                    <div>
                        <span class="font-semibold text-gray-700 dark:text-gray-200">Popularity:</span> 
                        <span class="ml-1">#7492</span>
                    </div>
                    
                    <!-- Genres -->
                    <div class="flex flex-wrap items-center gap-x-2 gap-y-1">
                        <span class="font-semibold text-gray-700 dark:text-gray-200">Genres:</span>
                        <span class="px-2 py-1 bg-gray-100 dark:bg-gray-800 rounded text-xs text-gray-700 dark:text-gray-200 hover:bg-[#4d85bd] focus:bg-[#4d85bd] focus:outline-none focus:ring-2 focus:ring-[#4d85bd] focus:ring-opacity-50 transition-colors cursor-pointer">Fantasy</span>
                        <span class="px-2 py-1 bg-gray-100 dark:bg-gray-800 rounded text-xs text-gray-700 dark:text-gray-200 hover:bg-[#4d85bd] focus:bg-[#4d85bd] focus:outline-none focus:ring-2 focus:ring-[#4d85bd] focus:ring-opacity-50 transition-colors cursor-pointer">Romance</span>
                        <span class="px-2 py-1 bg-gray-100 dark:bg-gray-800 rounded text-xs text-gray-700 dark:text-gray-200 hover:bg-[#4d85bd] focus:bg-[#4d85bd] focus:outline-none focus:ring-2 focus:ring-[#4d85bd] focus:ring-opacity-50 transition-colors cursor-pointer">Gourmet</span>
                       <span class="px-2 py-1 bg-gray-100 dark:bg-gray-800 rounded text-xs text-gray-700 dark:text-gray-200 hover:bg-[#4d85bd] focus:bg-[#4d85bd] focus:outline-none focus:ring-2 focus:ring-[#4d85bd] focus:ring-opacity-50 transition-colors cursor-pointer">Comedy</span>
                        <span class="px-2 py-1 bg-gray-100 dark:bg-gray-800 rounded text-xs text-gray-700 dark:text-gray-200 hover:bg-[#4d85bd] focus:bg-[#4d85bd] focus:outline-none focus:ring-2 focus:ring-[#4d85bd] focus:ring-opacity-50 transition-colors cursor-pointer">Shounen</span>
                    </div>
                    
                    <!-- Cast -->
                    <div class="mt-1 flex flex-wrap items-center gap-x-2 gap-y-1">
                        <span class="font-semibold text-gray-700 dark:text-gray-200">Cast:</span>
                        <span class="px-3 py-1 bg-[#9e265a] text-white rounded-full text-xs font-medium whitespace-nowrap">Kanna Nakamura</span>
                        <span class="px-3 py-1 bg-[#9e265a] text-white rounded-full text-xs font-medium whitespace-nowrap">Taito Ban</span>
                        <span class="px-3 py-1 bg-[#9e265a] text-white rounded-full text-xs font-medium whitespace-nowrap">Takashi Kondō</span>
                    </div>
                    
                    <!-- Certification & Country -->
                    <div class="grid grid-cols-2 gap-2 mt-1">
                        <div>
                            <span class="font-semibold text-gray-700 dark:text-gray-200">Country:</span> 
                            <span class="ml-1">Japan</span>
                        </div>
                    </div>
                    <!-- Studio & Producers -->
                    <div class="mt-1">
                        <span class="font-semibold text-gray-700 dark:text-gray-200">Studio:</span> 
                        <span class="ml-1">Asahi Production</span>
                    </div>
                    <div>
                        <span class="font-semibold text-gray-700 dark:text-gray-200">Producers:</span> 
                        <div class="mt-1 space-y-1">
                            <div class="flex items-center gap-2">
                                <span class="text-gray-600 dark:text-gray-400">•</span>
                                <span>Hinako Watanabe</span>
                            </div>
                            <div class="flex items-center gap-2">
                                <span class="text-gray-600 dark:text-gray-400">•</span>
                                <span>Junichirō Tanaka</span>
                            </div>
                            <div class="flex items-center gap-2">
                                <span class="text-gray-600 dark:text-gray-400">•</span>
                                <span>Shueisha</span>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            
            <!-- Rating Card (Mobile - Moved below Show Details) -->
            <div class="lg:hidden bg-[#1A1D29] rounded-xl p-5 shadow-lg border border-gray-800">
                <div class="flex items-center justify-between mb-4">
                    <div class="flex items-center gap-2">
                        <span class="material-symbols-outlined text-yellow-500 fill-current">star</span>
                        <span class="text-2xl font-bold text-white">8.2</span>
                    </div>
                    <span class="text-sm font-semibold text-white">Vote now</span>
                </div>
                <div class="text-sm text-gray-400 mb-6 text-center">What do you think about this show?</div>
                <div class="flex justify-between px-2">
                    <button class="flex flex-col items-center gap-2 group" onclick="rateShow('boring')">
                        <span class="text-3xl grayscale group-hover:grayscale-0 transition-all transform group-hover:scale-110">😩</span>
                        <span class="text-xs font-medium text-gray-400 group-hover:text-white transition-colors">Boring</span>
                    </button>
                    <button class="flex flex-col items-center gap-2 group" onclick="rateShow('great')">
                        <span class="text-3xl grayscale group-hover:grayscale-0 transition-all transform group-hover:scale-110">😃</span>
                        <span class="text-xs font-medium text-gray-400 group-hover:text-white transition-colors">Great</span>
                    </button>
                    <button class="flex flex-col items-center gap-2 group" onclick="rateShow('amazing')">
                        <span class="text-3xl grayscale group-hover:grayscale-0 transition-all transform group-hover:scale-110">🤩</span>
                        <span class="text-xs font-medium text-gray-400 group-hover:text-white transition-colors">Amazing</span>
                    </button>
                </div>
            </div>

            <!-- Recommended for You -->
            <div class="bg-white dark:bg-[#151926] rounded-xl overflow-hidden shadow-sm border border-gray-200 dark:border-gray-800">
                <div class="p-4 border-b border-gray-200 dark:border-gray-700 font-bold text-lg text-primary">Recommended for you</div>
                <div class="p-4">
                    <div class="grid grid-cols-2 sm:grid-cols-3 md:grid-cols-4 lg:grid-cols-5 xl:grid-cols-6 2xl:grid-cols-7 gap-4" id="recommended-list-container">
                        <!-- Recommended content will be loaded here -->
                    </div>
                </div>
            </div>

            <!-- Comments Section -->
            <div class="bg-white dark:bg-[#151926] rounded-xl overflow-hidden shadow-sm border border-gray-200 dark:border-gray-800">
                <div class="p-4 border-b border-gray-200 dark:border-gray-700 flex justify-between items-center">
                    <span class="font-bold text-lg text-gray-900 dark:text-white">Comments <span class="text-primary text-sm font-normal ml-1" id="comment-count-badge"></span></span>
                </div>
                <div class="p-4 bg-gray-50 dark:bg-black/20">
                    <div class="flex gap-4 comment-input-section">
                        <div class="w-10 h-10 rounded-full bg-primary/20 flex items-center justify-center text-primary font-bold flex-shrink-0">You</div>
                        <div class="flex-1">
                            <textarea class="w-full bg-white dark:bg-gray-800 border-0 rounded-lg p-3 text-sm focus:ring-2 focus:ring-primary dark:text-white placeholder-gray-400" id="new-comment-input" placeholder="Join the discussion..." rows="3"></textarea>
                            <div class="flex justify-end mt-2">
                                <button class="bg-primary hover:bg-opacity-90 text-white text-xs font-semibold py-2 px-6 rounded-full transition-colors shadow-sm" onclick="postNewComment()">Post Comment</button>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="max-h-[600px] overflow-y-auto custom-scrollbar" id="comments-list-container">
                    <!-- Comments will be loaded here -->
                </div>
            </div>
        </div>

        <!-- Right Sidebar - 30% width on desktop -->
        <div class="w-full lg:w-3/10 sidebar-right space-y-6">
            <!-- Show Details Card (Desktop) -->
            <div class="hidden lg:block bg-white dark:bg-[#151926] rounded-xl p-6 shadow-sm border border-gray-200 dark:border-gray-800 h-fit">
                <div class="flex gap-4 mb-4">
                    <img alt="Poster" class="w-24 h-36 object-cover rounded-lg shadow-md flex-shrink-0" src="https://lh3.googleusercontent.com/aida-public/AB6AXuBL8sSKQhkIHjJRpfaXPOb2Ntr-YMNUhdTfQQNGnnmqGZu3SSewBEFAnXpGTo1YxqHXlb8pOCJCZrgrSF00Ey3CMmhZW5Q7dqz5o0qIOeV3DXsmqV-RKQGF2yEnwCFPLqyZ1R9luYVGdw-P_L6bRKjMPRM2RO5ISubiOat46Ovv-uMFsJfxGzRT0ngWoCZXAiiHQbJOA91N5Wyn21gKPKb6rWilqbabiqUYqUEEe31UdFQXOki6b3glJcCnNMssztZkZ0UYU_mwBbY"/>
                    <div>
                        <h1 class="text-xl font-bold leading-tight mb-2">Alya Sometimes Hides Her Feelings in Russian</h1>
                        <div class="flex flex-wrap gap-2 text-xs text-gray-500 dark:text-gray-400 mb-2">
                            <span class="px-1.5 py-0.5 border border-gray-300 dark:border-gray-700 rounded">TV-14</span>
                            <span class="px-1.5 py-0.5 bg-primary text-white rounded font-bold">HD</span>
                            <span class="flex items-center gap-1"><span class="material-symbols-outlined text-sm">mic</span> 12</span>
                            <span class="flex items-center gap-1"><span class="material-symbols-outlined text-sm">subtitles</span> 12</span>
                        </div>
                        <div class="text-xs text-gray-500 dark:text-gray-400">
                            Anime • 12 Episodes
                        </div>
                    </div>
                </div>
                <div class="description-container collapsed" id="description-container-desktop">
                    <p class="text-sm text-gray-600 dark:text-gray-300 leading-relaxed mb-2">
                        Alisa Mikhailovna Kujou is a beautiful half-Russian girl who sits next to Masachika Kuze in class. Despite her appearance, she's a tsundere who is always glaring at Kuze. She's also the vice president of the student council and is secretly a light novel author. Kuze is a lazy student who always naps in class, but he's actually quite capable when he wants to be. He understands Russian and can hear Alisa's affectionate mutterings in Russian, but he pretends not to understand to tease her.
                    </p>
                </div>
                <div class="description-toggle" id="description-toggle-desktop" onclick="toggleDescriptionDesktop()">
                    <span>Read more</span>
                    <span class="material-symbols-outlined">arrow_forward</span>
                </div>
                <div class="grid grid-cols-2 gap-2 text-xs text-gray-500 dark:text-gray-400 border-t border-gray-100 dark:border-gray-700 pt-4">
                    <div><span class="font-semibold text-gray-700 dark:text-gray-200">Title:</span> Alya Sometimes Hides Her Feelings in Russian</div>
                    <div><span class="font-semibold text-gray-700 dark:text-gray-200">Original:</span> Tokidoki Bosotto Russia-go de Dereru Tonari no Alya-san</div>
                    <div><span class="font-semibold text-gray-700 dark:text-gray-200">Japanese:</span> 時々ボソッとロシア語でデレる隣のアーリャさん</div>
                    <div class="col-span-2"><span class="font-semibold text-gray-700 dark:text-gray-200">Synonyms:</span> Roshidere | Alya-san, who sits besides me and sometimes murmurs affectionately in Russian. | Arya Next Door Sometimes Lapses into Russian</div>
                    <div><span class="font-semibold text-gray-700 dark:text-gray-200">Aired Year:</span> 2023</div>
                    <div><span class="font-semibold text-gray-700 dark:text-gray-200">Premiered:</span> Fall 2023</div>
                    <div><span class="font-semibold text-gray-700 dark:text-gray-200">Duration:</span> 24 min</div>
                    <div><span class="font-semibold text-gray-700 dark:text-gray-200">Status:</span> Finished Airing</div>
                    <div class="col-span-2"><span class="font-semibold text-gray-700 dark:text-gray-200">Scores:</span> 
                        <svg class="w-4 h-4 inline fill-blue-500" viewBox="0 0 24 24">
                            <path d="M12 17.27L18.18 21l-1.64-7.03L22 9.24l-7.19-.61L12 2 9.19 8.63 2 9.24l5.46 4.73L5.82 21z"/>
                        </svg> 8.16 | 
                        <svg class="w-4 h-4 inline fill-yellow-500" viewBox="0 0 24 24">
                            <path d="M12 17.27L18.18 21l-1.64-7.03L22 9.24l-7.19-.61L12 2 9.19 8.63 2 9.24l5.46 4.73L5.82 21z"/>
                        </svg> 8.2
                    </div>
                    <div class="col-span-2"><span class="font-semibold text-gray-700 dark:text-gray-200">Popularity:</span> #88</div>
                    <div class="col-span-2">
                        <span class="font-semibold text-gray-700 dark:text-gray-200 mr-2">Genres:</span>
                        <div class="inline-flex flex-wrap gap-2 mt-1">
                            <span class="px-3 py-1 rounded-full border border-gray-300 dark:border-gray-600 bg-transparent text-gray-700 dark:text-gray-300 text-xs transition-all duration-200 hover:bg-[#46678C] hover:border-[#46678C] hover:text-white dark:hover:text-white hover:scale-105 hover:shadow-sm cursor-pointer">Action</span>
                            <span class="px-3 py-1 rounded-full border border-gray-300 dark:border-gray-600 bg-transparent text-gray-700 dark:text-gray-300 text-xs transition-all duration-200 hover:bg-[#46678C] hover:border-[#46678C] hover:text-white dark:hover:text-white hover:scale-105 hover:shadow-sm cursor-pointer">Comedy</span>
                            <span class="px-3 py-1 rounded-full border border-gray-300 dark:border-gray-600 bg-transparent text-gray-700 dark:text-gray-300 text-xs transition-all duration-200 hover:bg-[#46678C] hover:border-[#46678C] hover:text-white dark:hover:text-white hover:scale-105 hover:shadow-sm cursor-pointer">Slice of Life</span>
                            <span class="px-3 py-1 rounded-full border border-gray-300 dark:border-gray-600 bg-transparent text-gray-700 dark:text-gray-300 text-xs transition-all duration-200 hover:bg-[#46678C] hover:border-[#46678C] hover:text-white dark:hover:text-white hover:scale-105 hover:shadow-sm cursor-pointer">Shounen</span>
                        </div>
                    </div>
                    <div class="col-span-2"><span class="font-semibold text-gray-700 dark:text-gray-200">Cast:</span> Takuya Eguchi | Atsumi Tanezaki | Saori Hayami</div>
                    <div><span class="font-semibold text-gray-700 dark:text-gray-200">Country:</span> Japan</div>
                    <div><span class="font-semibold text-gray-700 dark:text-gray-200">Studio:</span> Wit Studio | CloverWorks</div>
                    <div class="col-span-2"><span class="font-semibold text-gray-700 dark:text-gray-200">Producers:</span> TOHO | TV Tokyo | Shueisha</div>
                </div>
            </div>

            <!-- Rating Card (Desktop) -->
            <div class="hidden lg:block bg-[#1A1D29] rounded-xl p-5 shadow-lg border border-gray-800">
                <div class="flex items-center justify-between mb-4">
                    <div class="flex items-center gap-2">
                        <span class="material-symbols-outlined text-yellow-500 fill-current">star</span>
                        <span class="text-2xl font-bold text-white">8.2</span>
                    </div>
                    <span class="text-sm font-semibold text-white">Vote now</span>
                </div>
                <div class="text-sm text-gray-400 mb-6 text-center">What do you think about this show?</div>
                <div class="flex justify-between px-2">
                    <button class="flex flex-col items-center gap-2 group" onclick="rateShow('boring')">
                        <span class="text-3xl grayscale group-hover:grayscale-0 transition-all transform group-hover:scale-110">😩</span>
                        <span class="text-xs font-medium text-gray-400 group-hover:text-white transition-colors">Boring</span>
                    </button>
                    <button class="flex flex-col items-center gap-2 group" onclick="rateShow('great')">
                        <span class="text-3xl grayscale group-hover:grayscale-0 transition-all transform group-hover:scale-110">😃</span>
                        <span class="text-xs font-medium text-gray-400 group-hover:text-white transition-colors">Great</span>
                    </button>
                    <button class="flex flex-col items-center gap-2 group" onclick="rateShow('amazing')">
                        <span class="text-3xl grayscale group-hover:grayscale-0 transition-all transform group-hover:scale-110">🤩</span>
                        <span class="text-xs font-medium text-gray-400 group-hover:text-white transition-colors">Amazing</span>
                    </button>
                </div>
            </div>

            <!-- Most Popular -->
            <div class="bg-white dark:bg-[#151926] rounded-xl overflow-hidden shadow-sm border border-gray-200 dark:border-gray-800">
                <div class="p-4 border-b border-gray-200 dark:border-gray-700 font-bold text-lg">Most Popular</div>
                <div class="p-4">
                    <div class="grid grid-cols-2 sm:grid-cols-3 md:grid-cols-4 lg:grid-cols-1 xl:grid-cols-2 gap-4" id="most-popular-list-container">
                        <!-- Most Popular content will be loaded here -->
                    </div>
                </div>
            </div>
        </div>
    </div>
</main>

<footer class="bg-white dark:bg-footer-dark border-t border-gray-200 dark:border-gray-800 mt-auto">
<div class="container mx-auto px-4 py-8 md:py-12">
<div class="flex flex-col md:flex-row justify-between items-start md:items-center gap-6">
<div class="flex-1 max-w-2xl">
<img alt="Quravel Logo" class="h-8 mb-4" src="https://lh3.googleusercontent.com/aida-public/AB6AXuAyQkhWkWRKHdBKcKeKIQPSp0dqUxzkKXlQI9e-linyzdZc9vxD5aQvA-ZV_wOo7084k8eQ29HZJd3WqF6fhl5ywezJ9q4mrXm4IXYZnsrFWIdQpQGJRxxoSsAH0BJ7T_rXsfSDASTzBL9VkhWJq2VaqxNU8lIq-c1X5b8JBJP3GlTMQPDc7w1h4CxDMBAlzCY-SB1q84jFGtF6k7hS7VqPnzYc8hjOHgQWrprfsOoJEFcCFtN-N3rEH8TW-lRH0reqCAVonCPGynA"/>
<p class="text-sm text-gray-600 dark:text-gray-400 mb-6 leading-relaxed">
                    Quravel offers free, ad-free access to top movies and series in stunning quality. Stream effortlessly or save for later with easy downloads, perfect for movie lovers on the go!
                </p>
<p class="text-xs text-gray-500 dark:text-gray-500">
                    This site does not store any files on our server, we only linked to the media which is hosted on 3rd party services.
                    <br/>
                    watch free movies, watch free tv shows, free movies online
                </p>
</div>
<div class="flex flex-col items-center md:items-end gap-2 w-full md:w-auto">
<div class="flex gap-4 text-sm font-semibold text-gray-700 dark:text-gray-300">
<a class="hover:text-primary transition-colors" href="https://t.me/+S43mvneJVrY1ZWZl">REQUEST</a>
<a class="hover:text-primary transition-colors" href="#">CONTACT</a>
</div>
<div class="text-xs text-gray-500 dark:text-gray-500 mt-2 text-center md:text-right w-full">
<span class="text-primary font-bold">Quravel</span>
<br/>
                    @ 2025 Quravel
                </div>
</div>
</div>
</div>
</footer>

<script>
    // State management
    let currentEpisode = 1;
    let currentServer = 'SUB-HD-01';
    let currentSeason = '1';
    let isVideoLoaded = false;
    let isVideoLoadedDesktop = false;
    let isDescriptionExpandedDesktop = false;
    let isDescriptionExpandedMobile = false;
    
// Episode titles you provided
const episodeTitles = [
    "A Jerky is a Promise: Skatzbitt",
    "A Proposal from Above with a Gift",
    "Grilled Skewers of Prime Meat: Royal Moodle",
    "Signaling Departure with a Pillar of Flame",
    "Night at Fort Ritterd",
    "In Season: Battered and Deep-Fried Monster Fish",
    "Those Who Inherit The Galbraith Name",
    "Uses for Cloudy Quartz",
    "The Voracious Villainess's Resolve",
    "The Blood-Mad Duke's Intentions",
    "Sweet or Sour Fruit",
    "The Voracious Villainess's First Appearance"
];

// HD-01 Server (Strmup.to)
const subEpisodesHD01 = [
    'https://strmup.to/7c479d8ff859c',    // Episode 1
    'https://strmup.to/31286346bcfbc',    // Episode 2
    'https://strmup.to/9a08b5c192e88',    // Episode 3
    'https://strmup.to/b89b9284a4f10',    // Episode 4
    'https://strmup.to/c3ddcf7e349a6',    // Episode 5
    'https://strmup.to/4b5dbac8ed41e',    // Episode 6
    'https://strmup.to/998dc1d114e72',    // Episode 7
    'https://strmup.to/3c207cb189720',    // Episode 8
    'https://strmup.to/1959eddf612c1',    // Episode 9
    'https://strmup.to/deed15ee6504a',    // Episode 10
    'https://strmup.to/8c129ea4e8268',    // Episode 11
    'https://strmup.to/1909eae877b60'     // Episode 12
];

const dubEpisodesHD01 = [
    'https://strmup.to/7970f2a4c6728',    // Episode 1
    'https://strmup.to/8d2a7e5ed92cf',    // Episode 2
    'https://strmup.to/665b3076fae0b',    // Episode 3
    'https://strmup.to/27ea9aa6396ac',    // Episode 4
    'https://strmup.to/1a1228a170db0',    // Episode 5
    'https://strmup.to/bfe693b2fe66e',    // Episode 6
    'https://strmup.to/a3a171afa6f59',    // Episode 7
    'https://strmup.to/ee4ef02871a9c',    // Episode 8
    'https://strmup.to/4792cf161d45d',    // Episode 9
    'https://strmup.to/bf8ce186c6f32',    // Episode 10
    'https://strmup.to/3bae79aa13000',    // Episode 11
    'https://strmup.to/61670302b4eeb'     // Episode 12
];

// HD-02 Server (Bysejikuar.com)
const subEpisodesHD02 = [
    'https://bysejikuar.com/e/4o8o4h6ubnnl/anime-pass-the-monster-meat-milady-sub-01',    // Episode 1
    'https://bysejikuar.com/e/i96iqhpxqjpo/anime-pass-the-monster-meat-milady-sub-02',    // Episode 2
    'https://bysejikuar.com/e/ojxp4ntr7jr3/pass-the-monster-meat-milady-sub-03',    // Episode 3
    'https://bysejikuar.com/e/ad8dfepfe75w/pass-the-monster-meat-milady-sub-04',    // Episode 4
    'https://bysejikuar.com/e/y45rpv3d4rv0/anime-pass-the-monster-meat-milady-sub-05',    // Episode 5
    'https://bysejikuar.com/e/50dhilmodcqu/pass-the-monster-meat-milady-sub-06',    // Episode 6
    'https://bysejikuar.com/e/bd8wq4xw0did/pass-the-monster-meat-milady-sub-07',    // Episode 7
    'https://bysejikuar.com/e/25ywf7h63bp0/pass-the-monster-meat-milady-sub-08',    // Episode 8
    'https://bysejikuar.com/e/kearh4plvnb1/pass-the-monster-meat-milady-sub-09',    // Episode 9
    'https://bysejikuar.com/e/ae9ixql3grll/pass-the-monster-meat-milady-sub-10',    // Episode 10
    'https://bysejikuar.com/e/mkfcvvychkzg/pass-the-monster-meat-milady-sub-11',    // Episode 11
    'https://bysejikuar.com/e/ut3duycy0gm3/pass-the-monster-meat-milady-sub-12'     // Episode 12
];

const dubEpisodesHD02 = [
    'https://bysejikuar.com/e/mdh9xo3xipqt/pass-the-monster-meat-milady-dub-01',    // Episode 1
    'https://bysejikuar.com/e/dy0kvn8gk89e/pass-the-monster-meat-milady-dub-02',    // Episode 2
    'https://bysejikuar.com/e/n1lsbqk8gf7d/pass-the-monster-meat-milady-dub-03',    // Episode 3
    'https://bysejikuar.com/e/m6jjh6oyqvk0/pass-the-monster-meat-milady-dub-04',    // Episode 4
    'https://bysejikuar.com/e/u65tdw7tcwep/pass-the-monster-meat-milady-dub-05',    // Episode 5
    'https://bysejikuar.com/e/qdn2iisfra30/pass-the-monster-meat-milady-dub-06',    // Episode 6
    'https://bysejikuar.com/e/qewc622o1vie/pass-the-monster-meat-milady-dub-07',    // Episode 7
    'https://bysejikuar.com/e/zvmw9cazftwz/pass-the-monster-meat-milady-dub-08',    // Episode 8
    'https://bysejikuar.com/e/4vc80es67vtr/pass-the-monster-meat-milady-dub-09',    // Episode 9
    'https://bysejikuar.com/e/cm96szgfsogi/pass-the-monster-meat-milady-dub-10',    // Episode 10
    'https://bysejikuar.com/e/uyebiqpv6gn8/pass-the-monster-meat-milady-dub-11',    // Episode 11
    'https://bysejikuar.com/e/bp3ee9zadvol/pass-the-monster-meat-milady-dub-12'     // Episode 12
];

// HD-03 Server (Mixdrop.top)
const subEpisodesHD03 = [
    'https://mixdrop.top/e/el067k6phn6zoj',    // Episode 1
    'https://mixdrop.top/e/ow94ejngclj3ldd',    // Episode 2
    'https://mixdrop.top/e/jdzq108zfv73g7',    // Episode 3
    'https://mixdrop.top/e/mkn1elqpixxw6o7',    // Episode 4
    'https://mixdrop.top/e/dkd307kns6l919',    // Episode 5
    'https://mixdrop.top/e/nlx19wnwukpzk9',    // Episode 6
    'https://mixdrop.top/e/nlx19ql0bv1343',    // Episode 7
    'https://mixdrop.top/e/8lq10w49urmgn6',    // Episode 8
    'https://mixdrop.top/e/pj94e1eehnpg',    // Episode 9
    'https://mixdrop.top/e/k0mwx70qfg36kj',    // Episode 10
    'https://mixdrop.top/e/l7qnzkoecpq3m8',    // Episode 11
    'https://mixdrop.top/e/vkz7e0k9hq719p'     // Episode 12
];

const dubEpisodesHD03 = [
    'https://mixdrop.top/e/03j9w08jhx97l6',    // Episode 1
    'https://mixdrop.top/e/8d2a7e5ed92cf',    // Episode 2
    'https://mixdrop.top/e/dkd3wg4jfpe1rj',    // Episode 3
    'https://mixdrop.top/e/z1zo03qzc83913',    // Episode 4
    'https://mixdrop.top/e/q19vrk11srrrj9',    // Episode 5
    'https://mixdrop.top/e/679pg1qjiwlw83',    // Episode 6
    'https://mixdrop.top/e/03j9w041fde0r',    // Episode 7
    'https://mixdrop.top/e/q19vrkd1fe67mn',    // Episode 8
    'https://mixdrop.top/e/gjk0xvd8s31l7r',    // Episode 9
    'https://mixdrop.top/e/bf8ce186c6f32',    // Episode 10
    'https://mixdrop.top/e/9wq10mkwf88lkz',    // Episode 11
    'https://mixdrop.top/e/679pg1d1unx1xg'     // Episode 12
];

// HD-04 Server (Add your HD-04 links here)
const subEpisodesHD04 = [
    'https://example.com/hd04-sub-01',    // Episode 1
    'https://example.com/hd04-sub-02',    // Episode 2
    'https://example.com/hd04-sub-03',    // Episode 3
    'https://example.com/hd04-sub-04',    // Episode 4
    'https://example.com/hd04-sub-05',    // Episode 5
    'https://example.com/hd04-sub-06',    // Episode 6
    'https://example.com/hd04-sub-07',    // Episode 7
    'https://example.com/hd04-sub-08',    // Episode 8
    'https://example.com/hd04-sub-09',    // Episode 9
    'https://example.com/hd04-sub-10',    // Episode 10
    'https://example.com/hd04-sub-11',    // Episode 11
    'https://example.com/hd04-sub-12'     // Episode 12
];

const dubEpisodesHD04 = [
    'https://example.com/hd04-dub-01',    // Episode 1
    'https://example.com/hd04-dub-02',    // Episode 2
    'https://example.com/hd04-dub-03',    // Episode 3
    'https://example.com/hd04-dub-04',    // Episode 4
    'https://example.com/hd04-dub-05',    // Episode 5
    'https://example.com/hd04-dub-06',    // Episode 6
    'https://example.com/hd04-dub-07',    // Episode 7
    'https://example.com/hd04-dub-08',    // Episode 8
    'https://example.com/hd04-dub-09',    // Episode 9
    'https://example.com/hd04-dub-10',    // Episode 10
    'https://example.com/hd04-dub-11',    // Episode 11
    'https://example.com/hd04-dub-12'     // Episode 12
];

// HD-05 Server (Add your HD-05 links here)
const subEpisodesHD05 = [
    'https://example.com/hd05-sub-01',    // Episode 1
    'https://example.com/hd05-sub-02',    // Episode 2
    'https://example.com/hd05-sub-03',    // Episode 3
    'https://example.com/hd05-sub-04',    // Episode 4
    'https://example.com/hd05-sub-05',    // Episode 5
    'https://example.com/hd05-sub-06',    // Episode 6
    'https://example.com/hd05-sub-07',    // Episode 7
    'https://example.com/hd05-sub-08',    // Episode 8
    'https://example.com/hd05-sub-09',    // Episode 9
    'https://example.com/hd05-sub-10',    // Episode 10
    'https://example.com/hd05-sub-11',    // Episode 11
    'https://example.com/hd05-sub-12'     // Episode 12
];

const dubEpisodesHD05 = [
    'https://example.com/hd05-dub-01',    // Episode 1
    'https://example.com/hd05-dub-02',    // Episode 2
    'https://example.com/hd05-dub-03',    // Episode 3
    'https://example.com/hd05-dub-04',    // Episode 4
    'https://example.com/hd05-dub-05',    // Episode 5
    'https://example.com/hd05-dub-06',    // Episode 6
    'https://example.com/hd05-dub-07',    // Episode 7
    'https://example.com/hd05-dub-08',    // Episode 8
    'https://example.com/hd05-dub-09',    // Episode 9
    'https://example.com/hd05-dub-10',    // Episode 10
    'https://example.com/hd05-dub-11',    // Episode 11
    'https://example.com/hd05-dub-12'     // Episode 12
];

// RAW servers (using HD-01 SUB links as placeholder - you can replace with actual RAW links)
const rawEpisodesHD01 = subEpisodesHD01;
const rawEpisodesHD02 = subEpisodesHD02;
const rawEpisodesHD03 = subEpisodesHD03;
const rawEpisodesHD04 = subEpisodesHD04;
const rawEpisodesHD05 = subEpisodesHD05;

// Video URLs for ALL servers - each server has individual links
const episodeUrls = {
    // SUB servers
    'SUB-HD-01': subEpisodesHD01,
    'SUB-HD-02': subEpisodesHD02,
    'SUB-HD-03': subEpisodesHD03,
    'SUB-HD-04': subEpisodesHD04,
    'SUB-HD-05': subEpisodesHD05,
    
    // DUB servers
    'DUB-HD-01': dubEpisodesHD01,
    'DUB-HD-02': dubEpisodesHD02,
    'DUB-HD-03': dubEpisodesHD03,
    'DUB-HD-04': dubEpisodesHD04,
    'DUB-HD-05': dubEpisodesHD05,
    
    // RAW servers
    'RAW-HD-01': rawEpisodesHD01,
    'RAW-HD-02': rawEpisodesHD02,
    'RAW-HD-03': rawEpisodesHD03,
    'RAW-HD-04': rawEpisodesHD04,
    'RAW-HD-05': rawEpisodesHD05
};

    // Episode data for Season 1 (Pass the Monster Meat, Milady!)
    const episodeData = {
        '1': [
            { id: 1, title: 'A Jerky is a Promise: Skatzbitt' },
            { id: 2, title: ' A Proposal from Above with a Gift' },
            { id: 3, title: 'Grilled Skewers of Prime Meat: Royal Moodle' },
            { id: 4, title: 'Signaling Departure with a Pillar of Flame' },
            { id: 5, title: 'Night at Fort Ritterd' },
            { id: 6, title: 'In Season: Battered and Deep-Fried Monster Fish' },
            { id: 7, title: 'Those Who Inherit The Galbraith Name' },
            { id: 8, title: 'Uses for Cloudy Quartz' },
            { id: 9, title: 'The Voracious Villainess\'s Resolve' },
            { id: 10, title: 'The Blood-Mad Duke\'s Intentions' },
            { id: 11, title: 'Sweet or Sour Fruit' },
            { id: 12, title: 'The Voracious Villainess\'s First Appearance' }
        ],
        '2': [
            { id: 1, title: 'Second Year Begins' },
            { id: 2, title: 'New Club Activities' },
            { id: 3, title: 'School Trip to Kyoto' },
            { id: 4, title: 'Cultural Exchange' },
            { id: 5, title: 'Sports Festival' },
            { id: 6, title: 'Midterm Exams' }
        ],
        '3': [
            { id: 1, title: 'Third Year Decisions' },
            { id: 2, title: 'University Entrance Exams' },
            { id: 3, title: 'Graduation Preparation' },
            { id: 4, title: 'Final Cultural Festival' }
        ],
        '4': [
            { id: 1, title: 'University Life' },
            { id: 2, title: 'New Beginnings' },
            { id: 3, title: 'Adult Relationships' }
        ],
        'ova': [
            { id: 1, title: 'Beach Special' },
            { id: 2, title: 'Christmas Special' },
            { id: 3, title: 'Cultural Festival Aftermath' }
        ]
    };
    
    // --- COMMENTS FEATURE ---
    const commentsStorageKey = 'quravel_comments_alya';
    const defaultComments = [
        { id: 1, user: 'AnimeLover', avatarColor: 'bg-red-500', time: '2 hours ago', text: 'Alya is such a great tsundere character! The Russian muttering is adorable.', likes: 45, dislikes: 2, replies: [
            { id: 101, user: 'TsundereFan', time: '1 hour ago', text: 'Totally agree! Best tsundere of the season!' }
        ]},
        { id: 2, user: 'RussianSpeaker', avatarColor: 'bg-blue-500', time: '3 hours ago', text: 'As a Russian speaker, I appreciate the accurate Russian phrases they use in the show!', likes: 32, dislikes: 0, replies: [] },
        { id: 3, user: 'RomanceFan', avatarColor: 'bg-purple-500', time: '5 hours ago', text: 'The chemistry between Alya and Masachika is incredible. Episode 5 had me smiling the whole time!', likes: 28, dislikes: 1, replies: [] },
        { id: 4, user: 'LightNovelReader', avatarColor: 'bg-green-500', time: '6 hours ago', text: 'The adaptation is faithful to the light novel. The animation by Doga Kobo is beautiful as always.', likes: 18, dislikes: 0, replies: [
             { id: 102, user: 'AdaptationFan', time: '4 hours ago', text: 'Yes! They kept all the best moments from the novels.' }
        ]}
    ];
    let comments = [];
    
    // Initialize all features
    function initializePage() {
        renderEpisodeLists();
        updateUI();
        updateMobileDisplay();
        initComments();
        renderRelatedLists();
        setupVideoPlayer();
        setupSeasonNavigation();
        
        // Handle window resize for responsive adjustments
        window.addEventListener('resize', handleResponsiveLayout);
        handleResponsiveLayout();
        
        // Initialize mobile video controls background color
        updateMobileVideoControlsBackground();
        
        // Load first video
        loadVideo();
        loadDesktopVideo();
    }
    
    // Render episode lists for both desktop and mobile
    function renderEpisodeLists() {
        const desktopContainer = document.getElementById('episode-list-desktop');
        const mobileContainer = document.getElementById('episode-list-mobile');
        const episodes = episodeData[currentSeason] || [];
        
        let desktopHtml = '<div class="space-y-2">';
        let mobileHtml = '<div class="space-y-2">';
        
        episodes.forEach(ep => {
            const isActive = ep.id === currentEpisode;
            const activeClass = isActive ? 'active' : '';
            const bgClass = isActive ? 'bg-primary/10' : 'bg-gray-50 dark:bg-white/5';
            
            // Format: "EP 01: episode title"
            const episodeNumber = ep.id.toString().padStart(2, '0');
            const displayText = `EP ${episodeNumber}: ${ep.title}`;
            
            // Desktop list item
            desktopHtml += `
                <button class="episode-list-item ${activeClass} ${bgClass} group flex items-center justify-between p-3 rounded-lg text-left transition-all w-full hover:bg-gray-100 dark:hover:bg-white/10" 
                        data-episode="${ep.id}" 
                        onclick="selectEpisode(this)">
                    <div class="flex items-center gap-3">
                        <div class="flex flex-col items-start">
                            <span class="text-sm font-medium ${isActive ? 'text-primary' : 'text-gray-900 dark:text-gray-100'}">
                                ${displayText}
                            </span>
                        </div>
                    </div>
                    <span class="material-symbols-outlined ${isActive ? 'text-primary' : 'text-gray-400'} text-lg">
                        ${isActive ? 'play_circle' : 'play_circle_outline'}
                    </span>
                </button>
            `;
            
            // Mobile list item
            mobileHtml += `
                <button class="episode-list-item ${activeClass} ${bgClass} group flex items-center justify-between p-3 rounded-lg text-left transition-all w-full hover:bg-gray-100 dark:hover:bg-white/10" 
                        data-episode="${ep.id}" 
                        onclick="selectEpisode(this)">
                    <div class="flex items-center gap-3">
                        <div class="flex flex-col items-start">
                            <span class="text-sm font-medium ${isActive ? 'text-primary' : 'text-gray-900 dark:text-gray-100'}">
                                ${displayText}
                            </span>
                        </div>
                    </div>
                    <span class="material-symbols-outlined ${isActive ? 'text-primary' : 'text-gray-400'} text-lg">
                        ${isActive ? 'play_circle' : 'play_circle_outline'}
                    </span>
                </button>
            `;
        });
        
        desktopHtml += '</div>';
        mobileHtml += '</div>';
        
        if (desktopContainer) desktopContainer.innerHTML = desktopHtml;
        if (mobileContainer) mobileContainer.innerHTML = mobileHtml;
    }
    
    // Update mobile display information
    function updateMobileDisplay() {
        // Update episode display
        document.getElementById('current-episode-display-mobile').innerText = `Episode ${currentEpisode}`;
        
        // Update season display
        document.getElementById('current-season-display-mobile').innerText = `S${currentSeason}`;
        
        // Update server display (extract server type from currentServer)
        const serverType = currentServer.includes('SUB') ? 'SUB' : 
                          currentServer.includes('DUB') ? 'DUB' : 'RAW';
        const serverNumber = currentServer.split('-').pop();
        document.getElementById('current-server-display-mobile').innerText = `${serverType}-${serverNumber}`;
    }
    
    // Update mobile video controls background color
    function updateMobileVideoControlsBackground() {
        const mobileVideoControls = document.getElementById('mobile-video-controls');
        if (mobileVideoControls) {
            const isDarkMode = document.documentElement.classList.contains('dark');
            mobileVideoControls.style.backgroundColor = isDarkMode ? '#0B0E19' : '#F3F4F6';
        }
    }
    
    // Setup season navigation
    function setupSeasonNavigation() {
        const seasonTabs = document.getElementById('season-tabs-container');
        if (!seasonTabs) return;
        
        const leftBtn = document.querySelector('.season-nav-btn.left');
        const rightBtn = document.querySelector('.season-nav-btn.right');
        
        // Update arrow visibility based on scroll position
        function updateArrowVisibility() {
            if (window.innerWidth > 1024) {
                leftBtn.style.opacity = seasonTabs.scrollLeft > 0 ? '1' : '0';
                leftBtn.style.visibility = seasonTabs.scrollLeft > 0 ? 'visible' : 'hidden';
                
                rightBtn.style.opacity = 
                    seasonTabs.scrollLeft < (seasonTabs.scrollWidth - seasonTabs.clientWidth - 10) ? '1' : '0';
                rightBtn.style.visibility = 
                    seasonTabs.scrollLeft < (seasonTabs.scrollWidth - seasonTabs.clientWidth - 10) ? 'visible' : 'hidden';
            }
        }
        
        seasonTabs.addEventListener('scroll', updateArrowVisibility);
        window.addEventListener('resize', updateArrowVisibility);
        updateArrowVisibility();
    }
    
    // Scroll season tabs horizontally
    function scrollSeasons(direction) {
        const seasonTabs = document.getElementById('season-tabs-container');
        if (!seasonTabs) return;
        
        const scrollAmount = 200;
        
        if (direction === 1) {
            // Right scroll
            seasonTabs.scrollBy({ left: scrollAmount, behavior: 'smooth' });
        } else {
            // Left scroll
            seasonTabs.scrollBy({ left: -scrollAmount, behavior: 'smooth' });
        }
        
        // Update arrow visibility after scrolling
        setTimeout(() => {
            const leftBtn = document.querySelector('.season-nav-btn.left');
            const rightBtn = document.querySelector('.season-nav-btn.right');
            
            if (window.innerWidth > 1024) {
                leftBtn.style.opacity = seasonTabs.scrollLeft > 0 ? '1' : '0';
                leftBtn.style.visibility = seasonTabs.scrollLeft > 0 ? 'visible' : 'hidden';
                
                rightBtn.style.opacity = 
                    seasonTabs.scrollLeft < (seasonTabs.scrollWidth - seasonTabs.clientWidth - 10) ? '1' : '0';
                rightBtn.style.visibility = 
                    seasonTabs.scrollLeft < (seasonTabs.scrollWidth - seasonTabs.clientWidth - 10) ? 'visible' : 'hidden';
            }
        }, 300);
    }
    
    // Toggle description expansion for desktop
    function toggleDescriptionDesktop() {
        const container = document.getElementById('description-container-desktop');
        const toggle = document.getElementById('description-toggle-desktop');
        
        if (!container || !toggle) return;
        
        isDescriptionExpandedDesktop = !isDescriptionExpandedDesktop;
        
        if (isDescriptionExpandedDesktop) {
            container.classList.remove('collapsed');
            container.classList.add('expanded');
            toggle.innerHTML = '<span>Show less</span><span class="material-symbols-outlined">arrow_forward</span>';
            toggle.classList.add('expanded');
        } else {
            container.classList.remove('expanded');
            container.classList.add('collapsed');
            toggle.innerHTML = '<span>Read more</span><span class="material-symbols-outlined">arrow_forward</span>';
            toggle.classList.remove('expanded');
        }
    }
    
    // Toggle description expansion for mobile
    function toggleDescriptionMobile() {
        const container = document.getElementById('description-container-mobile');
        const toggle = document.getElementById('description-toggle-mobile');
        
        if (!container || !toggle) return;
        
        isDescriptionExpandedMobile = !isDescriptionExpandedMobile;
        
        if (isDescriptionExpandedMobile) {
            container.classList.remove('collapsed');
            container.classList.add('expanded');
            toggle.innerHTML = '<span>Show less</span><span class="material-symbols-outlined">arrow_forward</span>';
            toggle.classList.add('expanded');
        } else {
            container.classList.remove('expanded');
            container.classList.add('collapsed');
            toggle.innerHTML = '<span>Read more</span><span class="material-symbols-outlined">arrow_forward</span>';
            toggle.classList.remove('expanded');
        }
    }
    
    // Handle responsive layout adjustments
    function handleResponsiveLayout() {
        const isMobile = window.innerWidth < 768;
        const isTablet = window.innerWidth >= 768 && window.innerWidth < 1024;
        
        // Update mobile video controls background color
        updateMobileVideoControlsBackground();
        
        // For mobile and tablet, add smooth scrolling to season tabs
        const seasonTabs = document.getElementById('season-tabs-container');
        if (seasonTabs) {
            if (isMobile || isTablet) {
                seasonTabs.style.scrollBehavior = 'smooth';
            } else {
                seasonTabs.style.scrollBehavior = 'auto';
            }
        }
    }
    
    // Setup video player
    function setupVideoPlayer() {
        const playButton = document.getElementById('play-button');
        const desktopPlayButton = document.getElementById('desktop-play-button');
        
        if (playButton) {
            playButton.addEventListener('click', function() {
                if (!isVideoLoaded) {
                    loadVideo();
                    isVideoLoaded = true;
                    const videoLoadingOverlay = document.getElementById('video-loading-overlay');
                    if (videoLoadingOverlay) {
                        videoLoadingOverlay.style.display = 'none';
                    }
                }
            });
        }
        
        if (desktopPlayButton) {
            desktopPlayButton.addEventListener('click', function() {
                if (!isVideoLoadedDesktop) {
                    loadDesktopVideo();
                    isVideoLoadedDesktop = true;
                    const desktopVideoLoadingOverlay = document.getElementById('desktop-video-loading-overlay');
                    if (desktopVideoLoadingOverlay) {
                        desktopVideoLoadingOverlay.style.display = 'none';
                    }
                }
            });
        }
    }
    
    // Load Mobile Video based on current state
    function loadVideo() {
        const container = document.getElementById('video-player-container');
        if (!container) return;
        
        const episodes = episodeData[currentSeason] || [];
        
        // Check if episode exists
        if (currentEpisode > episodes.length) {
            currentEpisode = 1;
        }
        
        // Get the correct episode index (arrays are 0-based)
        const episodeIndex = currentEpisode - 1;
        
        // Get video URL based on current server
        let videoUrl = '';
        const serverUrls = episodeUrls[currentServer] || subEpisodes;
        
        if (episodeIndex < serverUrls.length) {
            videoUrl = serverUrls[episodeIndex];
        } else {
            // Fallback to first episode if index is out of bounds
            videoUrl = serverUrls[0] || subEpisodes[0];
        }
        
        // Determine if it's a StreamHLS or Filemoon link
        let embedUrl = videoUrl;
        if (videoUrl.includes('streamhls.to')) {
            embedUrl = `${videoUrl}?autoplay=1&controls=1&modestbranding=1&rel=0`;
        } else if (videoUrl.includes('filemoon.to')) {
            embedUrl = `${videoUrl}?autoplay=1&controls=1`;
        }
        
        // Clear container and add iframe
        container.innerHTML = '';
        const iframe = document.createElement('iframe');
        iframe.className = 'video-container';
        iframe.src = embedUrl;
        iframe.frameBorder = '0';
        iframe.allow = 'accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture';
        iframe.allowFullscreen = true;
        iframe.title = `Season ${currentSeason} Episode ${currentEpisode} - Alya Sometimes Hides Her Feelings in Russian`;
        container.appendChild(iframe);
        
        // Hide loading overlay
        const videoLoadingOverlay = document.getElementById('video-loading-overlay');
        if (videoLoadingOverlay) {
            videoLoadingOverlay.style.display = 'none';
        }
        isVideoLoaded = true;
        
        // Update mobile display
        updateMobileDisplay();
        
        console.log(`Loading mobile video: Season ${currentSeason}, Episode ${currentEpisode}, Server: ${currentServer}`);
    }
    
    // Load Desktop Video based on current state
    function loadDesktopVideo() {
        const container = document.getElementById('desktop-video-player-container');
        if (!container) return;
        
        const episodes = episodeData[currentSeason] || [];
        
        // Check if episode exists
        if (currentEpisode > episodes.length) {
            currentEpisode = 1;
        }
        
        // Get the correct episode index (arrays are 0-based)
        const episodeIndex = currentEpisode - 1;
        
        // Get video URL based on current server
        let videoUrl = '';
        const serverUrls = episodeUrls[currentServer] || subEpisodes;
        
        if (episodeIndex < serverUrls.length) {
            videoUrl = serverUrls[episodeIndex];
        } else {
            // Fallback to first episode if index is out of bounds
            videoUrl = serverUrls[0] || subEpisodes[0];
        }
        
        // Determine if it's a StreamHLS or Filemoon link
        let embedUrl = videoUrl;
        if (videoUrl.includes('streamhls.to')) {
            embedUrl = `${videoUrl}?autoplay=1&controls=1&modestbranding=1&rel=0`;
        } else if (videoUrl.includes('filemoon.to')) {
            embedUrl = `${videoUrl}?autoplay=1&controls=1`;
        }
        
        // Clear container and add iframe
        container.innerHTML = '';
        const iframe = document.createElement('iframe');
        iframe.className = 'video-container';
        iframe.src = embedUrl;
        iframe.frameBorder = '0';
        iframe.allow = 'accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture';
        iframe.allowFullscreen = true;
        iframe.title = `Season ${currentSeason} Episode ${currentEpisode} - Alya Sometimes Hides Her Feelings in Russian`;
        container.appendChild(iframe);
        
        // Hide loading overlay
        const desktopVideoLoadingOverlay = document.getElementById('desktop-video-loading-overlay');
        if (desktopVideoLoadingOverlay) {
            desktopVideoLoadingOverlay.style.display = 'none';
        }
        isVideoLoadedDesktop = true;
        
        // Update desktop display
        document.getElementById('current-episode-display').innerText = `Episode ${currentEpisode}`;
        
        console.log(`Loading desktop video: Season ${currentSeason}, Episode ${currentEpisode}, Server: ${currentServer}`);
    }
    
    // Handle Season Selection
    function selectSeason(btn) {
        // Remove active class from all season buttons
        document.querySelectorAll('.season-btn').forEach(button => {
            button.classList.remove('active', 'text-primary', 'border-primary');
            button.classList.add('text-gray-500', 'dark:text-gray-400', 'border-transparent');
        });
        
        // Add active class to clicked button
        btn.classList.remove('text-gray-500', 'dark:text-gray-400', 'border-transparent');
        btn.classList.add('active', 'text-primary', 'border-primary');
        
        currentSeason = btn.getAttribute('data-season');
        // Reset to first episode of new season
        currentEpisode = 1; 
        renderEpisodeLists();
        updateUI();
        updateMobileDisplay();
        
        // Load video for current platform
        if (window.innerWidth < 1024) {
            loadVideo();
        } else {
            loadDesktopVideo();
        }
    }
    
    // Handle Server Selection
    function selectServer(btn) {
        // Remove active class from all server buttons
        document.querySelectorAll('.server-btn').forEach(button => {
            button.classList.remove('bg-primary', 'text-white');
            button.classList.add('bg-gray-200', 'dark:bg-gray-800', 'text-gray-700', 'dark:text-gray-300');
        });
        
        // Add active class to clicked button
        btn.classList.remove('bg-gray-200', 'dark:bg-gray-800', 'text-gray-700', 'dark:text-gray-300');
        btn.classList.add('bg-primary', 'text-white');
        
        currentServer = btn.getAttribute('data-server');
        updateUI();
        updateMobileDisplay();
        
        // Load video for current platform
        if (window.innerWidth < 1024) {
            loadVideo();
        } else {
            loadDesktopVideo();
        }
    }
    
    // Handle Episode Selection
    function selectEpisode(btn) {
        const ep = parseInt(btn.getAttribute('data-episode'));
        currentEpisode = ep;
        updateUI();
        updateMobileDisplay();
        renderEpisodeLists();
        
        // Load video for current platform
        if (window.innerWidth < 1024) {
            loadVideo();
        } else {
            loadDesktopVideo();
        }
    }
    
    // Handle Previous/Next Buttons
    function changeEpisode(direction) {
        const episodes = episodeData[currentSeason];
        const currentIndex = episodes.findIndex(ep => ep.id === currentEpisode);
        
        if (direction === 'next' && currentIndex < episodes.length - 1) {
            currentEpisode = episodes[currentIndex + 1].id;
        } else if (direction === 'prev' && currentIndex > 0) {
            currentEpisode = episodes[currentIndex - 1].id;
        }
        
        updateUI();
        updateMobileDisplay();
        renderEpisodeLists();
        
        // Load video for current platform
        if (window.innerWidth < 1024) {
            loadVideo();
        } else {
            loadDesktopVideo();
        }
    }
    
    // Update General UI (Active Classes, Text)
    function updateUI() {
        // Update "You are watching" text for desktop
        const desktopDisplay = document.getElementById('current-episode-display');
        if (desktopDisplay) {
            desktopDisplay.innerText = `Episode ${currentEpisode}`;
        }
        
        // Update list status text for desktop and mobile
        const savedStatus = localStorage.getItem('quravel_list_status_alya');
        const listStatusText = savedStatus && savedStatus !== 'Add to List' ? savedStatus : 'Add to List';
        
        const desktopListBtn = document.getElementById('current-list-status-text');
        const mobileListBtn = document.getElementById('current-list-status-text-mobile');
        
        if (desktopListBtn) desktopListBtn.innerText = listStatusText;
        if (mobileListBtn) mobileListBtn.innerText = listStatusText;
        
        // Update Season Buttons
        document.querySelectorAll('.season-btn').forEach(btn => {
            if(btn.getAttribute('data-season') === currentSeason) {
                btn.classList.remove('text-gray-500', 'dark:text-gray-400', 'border-transparent');
                btn.classList.add('text-primary', 'border-primary', 'active');
            } else {
                btn.classList.add('text-gray-500', 'dark:text-gray-400', 'border-transparent');
                btn.classList.remove('text-primary', 'border-primary', 'active');
            }
        });
    }
    
    // --- COMMENTS FUNCTIONS ---
    function initComments() {
        const saved = localStorage.getItem(commentsStorageKey);
        if (saved) {
            comments = JSON.parse(saved);
        } else {
            comments = defaultComments;
            saveComments();
        }
        renderComments();
    }
    
    function saveComments() {
        localStorage.setItem(commentsStorageKey, JSON.stringify(comments));
        renderComments();
    }
    
    function renderComments() {
        const container = document.getElementById('comments-list-container');
        const commentCountBadge = document.getElementById('comment-count-badge');
        
        if (!container || !commentCountBadge) return;
        
        commentCountBadge.innerText = `(${comments.length})`;
        
        let html = '';
        comments.forEach(comment => {
            let repliesHtml = '';
            if(comment.replies && comment.replies.length > 0) {
                comment.replies.forEach(reply => {
                    repliesHtml += `
                        <div class="ml-12 mt-3 pt-3 border-t border-gray-100 dark:border-gray-800 flex gap-3">
                            <div class="w-8 h-8 rounded-full bg-gray-300 dark:bg-gray-600 flex items-center justify-center text-white text-xs font-bold flex-shrink-0">${reply.user[0]}</div>
                            <div>
                                <div class="flex items-center gap-2 mb-1">
                                    <span class="font-bold text-xs text-gray-900 dark:text-gray-100">${reply.user}</span>
                                    <span class="text-[10px] text-gray-500">${reply.time}</span>
                                </div>
                                <p class="text-xs text-gray-700 dark:text-gray-300 leading-relaxed">${reply.text}</p>
                            </div>
                        </div>
                    `;
                });
            }
            
            html += `
                <div class="p-4 border-b border-gray-100 dark:border-gray-700 last:border-0">
                    <div class="flex gap-4">
                        <div class="w-10 h-10 rounded-full ${comment.avatarColor || 'bg-gray-400'} flex items-center justify-center text-white font-bold flex-shrink-0">${comment.user[0]}</div>
                        <div class="flex-1">
                            <div class="flex items-center justify-between mb-1">
                                <div class="flex items-center gap-2">
                                    <span class="font-bold text-sm text-gray-900 dark:text-gray-100">${comment.user}</span>
                                    <span class="text-xs text-gray-500">${comment.time}</span>
                                </div>
                            </div>
                            <p class="text-sm text-gray-700 dark:text-gray-300 leading-relaxed">${comment.text}</p>
                            <div class="flex items-center gap-4 mt-3">
                                <button class="flex items-center gap-1 text-xs text-gray-500 hover:text-primary transition-colors" onclick="likeComment(${comment.id})">
                                    <span class="material-symbols-outlined text-sm ${comment.userLiked ? 'text-primary fill-current' : ''}">thumb_up</span>
                                    <span>${comment.likes}</span>
                                </button>
                                <button class="flex items-center gap-1 text-xs text-gray-500 hover:text-red-500 transition-colors" onclick="dislikeComment(${comment.id})">
                                    <span class="material-symbols-outlined text-sm ${comment.userDisliked ? 'text-red-500 fill-current' : ''}">thumb_down</span>
                                    <span>${comment.dislikes || 0}</span>
                                </button>
                                <button class="text-xs text-gray-500 hover:text-primary font-medium" onclick="toggleReplyBox(${comment.id})">Reply</button>
                            </div>
                            <div id="reply-box-${comment.id}" class="hidden mt-3">
                                <textarea id="reply-input-${comment.id}" class="w-full bg-gray-50 dark:bg-black/30 border border-gray-200 dark:border-gray-700 rounded p-2 text-xs focus:ring-1 focus:ring-primary dark:text-white" rows="2" placeholder="Write a reply..."></textarea>
                                <div class="flex justify-end mt-2 gap-2">
                                    <button class="text-xs text-gray-500 hover:text-gray-700" onclick="toggleReplyBox(${comment.id})">Cancel</button>
                                    <button class="bg-primary text-white text-xs px-3 py-1 rounded hover:bg-opacity-90" onclick="postReply(${comment.id})">Reply</button>
                                </div>
                            </div>
                            ${repliesHtml}
                        </div>
                    </div>
                </div>
            `;
        });
        container.innerHTML = html;
    }
    
    function likeComment(id) {
        const comment = comments.find(c => c.id === id);
        if(comment) {
            if (!comment.userLiked) {
                comment.likes++;
                comment.userLiked = true;
                if(comment.userDisliked) {
                    comment.dislikes--;
                    comment.userDisliked = false;
                }
            } else {
                comment.likes--;
                comment.userLiked = false;
            }
            saveComments();
        }
    }
    
    function dislikeComment(id) {
        const comment = comments.find(c => c.id === id);
        if(comment) {
            if (!comment.userDisliked) {
                comment.dislikes = (comment.dislikes || 0) + 1;
                comment.userDisliked = true;
                if(comment.userLiked) {
                    comment.likes--;
                    comment.userLiked = false;
                }
            } else {
                comment.dislikes--;
                comment.userDisliked = false;
            }
            saveComments();
        }
    }
    
    function postNewComment() {
        const input = document.getElementById('new-comment-input');
        const text = input.value.trim();
        if(text) {
            const newComment = {
                id: Date.now(),
                user: 'You',
                avatarColor: 'bg-primary',
                time: 'Just now',
                text: text,
                likes: 0,
                dislikes: 0,
                replies: []
            };
            comments.unshift(newComment);
            input.value = '';
            saveComments();
        }
    }
    
    function toggleReplyBox(id) {
        const box = document.getElementById(`reply-box-${id}`);
        if (box) {
            box.classList.toggle('hidden');
        }
    }
    
    function postReply(commentId) {
        const input = document.getElementById(`reply-input-${commentId}`);
        if (!input) return;
        
        const text = input.value.trim();
        if(text) {
            const comment = comments.find(c => c.id === commentId);
            if(comment) {
                if(!comment.replies) comment.replies = [];
                comment.replies.push({
                    id: Date.now(),
                    user: 'You',
                    time: 'Just now',
                    text: text
                });
                saveComments();
            }
        }
    }
    
    // --- LIST POPULATION FEATURE ---
    function renderRelatedLists() {
        const recContainer = document.getElementById('recommended-list-container');
        const popContainer = document.getElementById('most-popular-list-container');
        
        if (!recContainer || !popContainer) return;
        
        const recImages = [
            'https://lh3.googleusercontent.com/aida-public/AB6AXuB6aKroKe4_Hr_QOThhIQ1eSBsj6XHa6M1h1ij1beOOwYZsLuAKaEUwhzePp5w2e0ZiNq23ueXCujFcscvpvX5l0fSEO1JhKa6gwDDPDrdfapY86HeYs5fG_M99b926v37WwsUlyZ7ugSX23giOl25toAwGLS8wOeBXwUajaxUzaTcHC_Yh5fJqnnwy6HgEx_QviGDLtROQ6LVPu2Z1BRIxBOEdc9fz9ozk1sYgF_aWaLm0ZXBf9Mh7BLQkJKaAnfSKTVLxnnvAS1o',
            'https://lh3.googleusercontent.com/aida-public/AB6AXuC4DL0CgtcYAUCgstMJaa3MOKxfRf-4gMF5Pz7AA-vJqjO992P2Ln_vsEztjSVehozCL5rsHt1KXYxgOpHPykUZEMDio6Kowlgy6GWvo4do0-5lXXQYfWesN_lwBCxnEcWF4XBvqDH9JFtqGEnkTLf_a-dREBJUINFFoE2kBQ0XpDqfi5NlPjxrmCbvXX31J0PHegzUCxDnemVeINrotIOfjM7FeAzSPl6Y0W2Xlf5WxpWq7OBZ7oPcgpUXCPkvHT-o8GnA6D-kHow'
        ];
        
        const popImages = [
            'https://lh3.googleusercontent.com/aida-public/AB6AXuB74Fp72ev7QNZU469wTbrsvPSqgnjiWWoMOtIa0MAjQhQ1L33JGPpodM_sMQek4yZw6tRKlWPbMR6A8WeRapMkaH-T11LXGfejWy1r1bhWBwFgHhBoYl8KvmFdP0z1AzCeyDBbQAk4qqrgXQgFIiUfJh05RZYjZZz8rG09UvMIVFX4ZI-oP6j8oSExgu_KvJ_nvGwbgNIhEzXE5b5_lwPMYOzIs3TCBjMzWi8UdDqiKr2W9XaPSF7JhbMvJhQVj0heWtGm59mVp1E',
            'https://lh3.googleusercontent.com/aida-public/AB6AXuCwH3f4VjulnnLYk8EgFSCiOqFs12q4ivPSqucW7P7k4uOAN3qXURGd7iOxByylKHLJhbpiobEV442fMLZHwobXplWdRez-c71bcZODHHIHORqZw97zdSx_JgA4Cdym9n6VMtpcJXo3o5jc7jvKx13nsU2frrHJ8wgbcRH1cHIY8n7jLkRIsYOLDQ1uZWoGe99Imz98f_X9qskRvSTRVJiiJKF_DtE-ce0qw825vrwhgb66FQM3e_ymqoB8eBbjLZ5HuUePqbU5kYg'
        ];
        
        // Generate 21 items for Recommended with perfect responsive card layout
        let recHtml = '';
        const showTitles = [
            'Demon Slayer: Kimetsu no Yaiba',
            'Jujutsu Kaisen',
            'Attack on Titan',
            'My Hero Academia',
            'One Piece',
            'Spy x Family',
            'Chainsaw Man',
            'Haikyuu!!',
            'Death Note',
            'Fullmetal Alchemist: Brotherhood'
        ];
        
        const showTypes = ['Anime', 'TV Series', 'Movie'];
        const showYears = ['2024', '2023', '2022', '2021', '2020'];
        
        for(let i = 1; i <= 21; i++) {
            const img = recImages[i % 2];
            const titleIndex = i % showTitles.length;
            const title = showTitles[titleIndex];
            const year = showYears[i % showYears.length];
            const type = showTypes[i % showTypes.length];
            const rating = (7.5 + (i * 0.1)).toFixed(1);
            
            recHtml += `
                <div class="group flex flex-col gap-2 recommended-card">
                    <div class="relative aspect-[2/3] overflow-hidden rounded-lg shadow-md">
                        <img src="${img}" alt="${title}" class="w-full h-full object-cover transition-transform duration-300 group-hover:scale-110">
                        
                        <div class="absolute top-2 right-2 bg-primary text-white text-[10px] font-bold px-1.5 py-0.5 rounded shadow-sm">
                            HD
                        </div>
                        
                        <div class="absolute inset-0 bg-black/40 opacity-0 group-hover:opacity-100 transition-opacity flex items-center justify-center">
                            <span class="material-symbols-outlined text-4xl text-white">play_circle</span>
                        </div>
                    </div>

                    <div class="space-y-1">
                        <h3 class="text-sm font-semibold truncate group-hover:text-primary transition-colors dark:text-gray-100">
                            ${title} ${i <= 10 ? i : ''}
                        </h3>
                        <div class="flex items-center gap-2 text-[11px] text-gray-500 dark:text-gray-400">
                            <span>${type}</span>
                            <span class="w-1 h-1 bg-gray-500 rounded-full"></span>
                            <span>${year}</span>
                            <span class="ml-auto flex items-center gap-0.5">
                                <span class="material-symbols-outlined text-[12px] text-yellow-500">star</span> ${rating}
                            </span>
                        </div>
                    </div>
                </div>
            `;
        }
        recContainer.innerHTML = recHtml;
        
        // Generate 12 items for Most Popular
        let popHtml = '';
        for(let i = 1; i <= 12; i++) {
            const img = popImages[i % 2];
            const title = i % 2 === 0 ? 'The Dark Knight' : 'The Godfather';
            const year = i % 2 === 0 ? '2008' : '1972';
            const rating = (8.0 + (i * 0.1)).toFixed(1);
            
            popHtml += `
                <div class="group flex flex-col gap-2 recommended-card">
                    <div class="relative aspect-[2/3] overflow-hidden rounded-lg shadow-md">
                        <img src="${img}" alt="${title}" class="w-full h-full object-cover transition-transform duration-300 group-hover:scale-110">
                        
                        <div class="absolute top-2 right-2 bg-primary text-white text-[10px] font-bold px-1.5 py-0.5 rounded shadow-sm">
                            HD
                        </div>
                        
                        <div class="absolute inset-0 bg-black/40 opacity-0 group-hover:opacity-100 transition-opacity flex items-center justify-center">
                            <span class="material-symbols-outlined text-4xl text-white">play_circle</span>
                        </div>
                    </div>

                    <div class="space-y-1">
                        <h3 class="text-sm font-semibold truncate group-hover:text-primary transition-colors dark:text-gray-100">
                            ${title} ${i}
                        </h3>
                        <div class="flex items-center gap-2 text-[11px] text-gray-500 dark:text-gray-400">
                            <span>Movie</span>
                            <span class="w-1 h-1 bg-gray-500 rounded-full"></span>
                            <span>${year}</span>
                            <span class="ml-auto flex items-center gap-0.5">
                                <span class="material-symbols-outlined text-[12px] text-yellow-500">star</span> ${rating}
                            </span>
                        </div>
                    </div>
                </div>
            `;
        }
        popContainer.innerHTML = popHtml;
    }
    
    // Local Storage logic for "Add to list" button
    const listButtonText = document.getElementById('current-list-status-text');
    const storageKey = 'quravel_list_status_alya';
    
    // Initialize button text from local storage
    const savedStatus = localStorage.getItem(storageKey);
    if (savedStatus) {
         if(savedStatus === 'Add to List') {
             listButtonText.innerText = 'Add to List';
        } else {
             listButtonText.innerText = savedStatus;
        }
    }
    
    function updateListStatus(status) {
        if (status === 'Add to List') {
            listButtonText.innerText = 'Add to List';
            const mobileListBtn = document.getElementById('current-list-status-text-mobile');
            if (mobileListBtn) {
                mobileListBtn.innerText = 'Add to List';
            }
            localStorage.removeItem(storageKey);
        } else {
            listButtonText.innerText = status;
            const mobileListBtn = document.getElementById('current-list-status-text-mobile');
            if (mobileListBtn) {
                mobileListBtn.innerText = status;
            }
            localStorage.setItem(storageKey, status);
        }
    }
    
    // Rating Feature Logic
    function rateShow(sentiment) {
        const ratedKey = 'quravel_rated_alya';
        if(localStorage.getItem(ratedKey)) {
            alert('You have already rated this show!');
            return;
        }
        localStorage.setItem(ratedKey, 'true');
        alert(`Thanks for rating it as ${sentiment}!`);
        const buttons = document.querySelectorAll('button[onclick^="rateShow"]');
        buttons.forEach(btn => {
            btn.disabled = true;
            btn.classList.add('opacity-50', 'cursor-not-allowed');
        });
    }
    
    // Mobile Menu Toggle
    function toggleMobileMenu() {
        const menu = document.getElementById('mobile-menu');
        const overlay = document.getElementById('mobile-menu-overlay');
        menu.classList.toggle('menu-open');
        overlay.classList.toggle('hidden');
    }
    
    // Mobile Search Toggle
    function toggleMobileSearch() {
        const searchBar = document.getElementById('mobile-search-bar');
        searchBar.classList.toggle('hidden');
    }
    
    // Mobile Dropdown Accordion
    function toggleMobileDropdown(id) {
        const dropdown = document.getElementById(id);
        dropdown.classList.toggle('hidden');
        // Rotate arrow
        const arrowId = id === 'genre-mobile' ? 'genre-arrow' : 'country-arrow';
        const arrow = document.getElementById(arrowId);
        if (dropdown.classList.contains('hidden')) {
            arrow.style.transform = 'rotate(0deg)';
        } else {
            arrow.style.transform = 'rotate(180deg)';
        }
    }
    
    // Initialize everything when DOM is loaded
    document.addEventListener('DOMContentLoaded', initializePage);
</script>
</body>
</html>
