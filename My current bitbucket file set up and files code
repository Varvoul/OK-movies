quravel-streaming/
├── .eleventy.js              # Eleventy configuration
├── vercel.json             # Vercel deployment config
├── package.json            # Dependencies and scripts
├── .gitignore              # Git ignore file
└── src/
    ├── _data/
    │   ├── posts.json      # All shows data
    ├── _includes/
    │   ├── layouts
    │   └── partials/
    │       ├── header.nj
    ├── index.njk           # Homepage (your index template)
    ├── post.njk            # Post details page (from my post-details.html)
    ├── streaming.njk           # Streaming page (from my streaming.html)
    └── search-data.json.njk # Search JSON endpoint

Now check all my files' code for corrections, mistakes, sulgify, syntax, variables, Nunjack integration, and connections, etc. 

.eleventy.js  file code: 
// .eleventy.js
const fs = require('fs');
const path = require('path');

module.exports = function(eleventyConfig) {
    // 1. Copy Static Assets
    eleventyConfig.addPassthroughCopy("src/css");
    eleventyConfig.addPassthroughCopy("src/js");
    eleventyConfig.addPassthroughCopy("src/images");
    eleventyConfig.addPassthroughCopy("src/assets");

    // 2. Robust Slugify Filter
    eleventyConfig.addFilter("slugify", function(str) {
        if (!str) return '';
        return str
            .toLowerCase()
            .replace(/\s+/g, '-')
            .replace(/[^\w\-]+/g, '')
            .replace(/\-\-+/g, '-')
            .replace(/^-+/, '')
            .replace(/-+$/, '');
    });

    // 3. SECURE DATA FILTERS (Fixed to prevent "filter is not a function" errors)
    eleventyConfig.addFilter("getHero", function(posts) {
        const arr = Array.isArray(posts) ? posts : [];
        const featured = arr.filter(item => item.featured === true);
        if (featured.length > 0) return featured.slice(0, 5);
        return arr.sort((a, b) => (b.popularity || 0) - (a.popularity || 0)).slice(0, 5);
    });

    eleventyConfig.addFilter("getTopAiring", function(posts) {
        const arr = Array.isArray(posts) ? posts : [];
        return arr
            .filter(item => item.status === "ongoing" || item.status === "upcoming")
            .sort((a, b) => (b.popularity || 0) - (a.popularity || 0))
            .slice(0, 20);
    });

    eleventyConfig.addFilter("filterByType", function(posts, type) {
        const arr = Array.isArray(posts) ? posts : [];
        return arr.filter(item => item.type === type);
    });

    eleventyConfig.addFilter("sortLatest", function(posts) {
        const arr = Array.isArray(posts) ? posts : [];
        return arr.sort((a, b) => (b.year || 0) - (a.year || 0));
    });

    eleventyConfig.addFilter("getRecommended", function(posts) {
        const arr = Array.isArray(posts) ? posts : [];
        return arr
            .map(item => ({
                ...item,
                recScore: (item.rating || 0) * 10 + (item.popularity || 0)
            }))
            .sort((a, b) => b.recScore - a.recScore)
            .slice(0, 20);
    });

    eleventyConfig.addFilter("truncate", function(str, length = 200) {
        if (!str || str.length <= length) return str;
        return str.substring(0, length) + '...';
    });

    eleventyConfig.addFilter("json", function(obj) {
        return JSON.stringify(obj);
    });

    eleventyConfig.addFilter("dump", function(obj) {
        return JSON.stringify(obj);
    });

    // 4. DATA HELPER (Reads your JSON once for use in Global Data and Collections)
    const loadPostsData = () => {
        try {
            const postsPath = path.join(__dirname, 'src/_data/posts.json');
            if (!fs.existsSync(postsPath)) return [];
            
            const rawData = JSON.parse(fs.readFileSync(postsPath, 'utf8'));
            // Fix for both JSON structures: [{...}] or {"posts": [...]}
            const postsArray = Array.isArray(rawData) ? rawData : (rawData.posts || []);
            
            // Generate watchLinks automatically for all templates
            return postsArray.map(item => ({
                ...item,
                watchLink: `/watch/${item.title.toLowerCase().replace(/\s+/g, '-').replace(/[^\w\-]+/g, '')}/`
            }));
        } catch (error) {
            console.error('Error loading posts.json:', error);
            return [];
        }
    };

    // 5. GLOBAL DATA (Makes {{ posts }} available in Nunjucks)
    eleventyConfig.addGlobalData("posts", loadPostsData);

    // 6. COLLECTIONS (For sidebar and automated lists)
    eleventyConfig.addCollection("popularShows", () => {
        return loadPostsData().sort((a, b) => (b.views || 0) - (a.views || 0)).slice(0, 5);
    });

    eleventyConfig.addCollection("allPosts", () => {
        return loadPostsData();
    });

    // 7. BUILD SETTINGS
    return {
        dir: {
            input: "src",
            output: "_site",
            includes: "_includes",
            data: "_data"
        },
        templateFormats: ["njk", "md", "html"],
        htmlTemplateEngine: "njk",
        dataTemplateEngine: "njk"
    };
};

package.json file code: 

{
  "name": "quravel-streaming",
  "version": "1.0.0",
  "description": "Advanced movie streaming platform with automated content updates via Bitbucket and Vercel deployment",
  "main": ".eleventy.js",
  "type": "commonjs",
  "scripts": {
    "build": "eleventy",
    "dev": "eleventy --serve --port=3000",
    "start": "npm run dev",
    "clean": "rm -rf _site && rm -rf .cache",
    "update:posts": "node scripts/update-posts.js",
    "update:images": "node scripts/fetch-images.js",
    "update:all": "npm run update:posts && npm run update:images",
    "deploy:preview": "npm run build && vercel",
    "deploy:production": "npm run update:all && npm run build && vercel --prod",
    "debug": "DEBUG=Eleventy* eleventy",
    "lint": "eslint . --ext .js",
    "test": "echo \"✓ Build system ready\" && eleventy --dryrun",
    "vercel-build": "npm run update:all && npm run build"
  },
  "keywords": [
    "streaming",
    "movies",
    "anime",
    "tv-shows",
    "11ty",
    "eleventy",
    "static-site",
    "bitbucket",
    "vercel",
    "automation",
    "video-streaming"
  ],
  "author": "Naoshi",
  "license": "MIT",
  "homepage": "https://quravel.example.com",
  "repository": {
    "type": "git",
    "url": "git+https://bitbucket.org/yourusername/quravel-streaming.git"
  },
  "bugs": {
    "url": "https://bitbucket.org/yourusername/quravel-streaming/issues"
  },
  "dependencies": {
    "@sindresorhus/slugify": "^2.1.0",
    "axios": "^1.6.0",
    "cheerio": "^1.0.0-rc.12",
    "dotenv": "^16.3.0",
    "image-size": "^1.1.1",
    "js-yaml": "^4.1.0",
    "luxon": "^3.3.0",
    "node-cache": "^5.1.2",
    "node-fetch": "^3.3.0"
  },
  "devDependencies": {
    "@11ty/eleventy": "^3.0.0",
    "@11ty/eleventy-img": "^3.0.0",
    "@11ty/eleventy-navigation": "^0.3.5",
    "@11ty/eleventy-plugin-rss": "^1.2.0",
    "@11ty/eleventy-plugin-syntaxhighlight": "^4.2.0",
    "autoprefixer": "^10.4.16",
    "cssnano": "^6.0.1",
    "eslint": "^8.54.0",
    "postcss": "^8.4.31",
    "tailwindcss": "^3.3.6"
  },
  "engines": {
    "node": ">=18.0.0",
    "npm": ">=9.0.0"
  },
  "volta": {
    "node": "18.18.0"
  },
  "browserslist": [
    "defaults"
  ]
}

.gitignore  file code:

# Environment variables
.env
.env.local
.env.*.local
.env.production
.env.staging

# Dependencies
node_modules/
npm-debug.log*
yarn-debug.log*
yarn-error.log*
package-lock.json
yarn.lock

# Build output
_site/
.cache/
dist/
public/
out/
.next/

# System files
.DS_Store
Thumbs.db
Desktop.ini

# IDE files
.vscode/
.idea/
*.swp
*.swo
*~
.project
.settings/

# OS generated files
ehthumbs.db
Icon?
._*

# Temporary files
tmp/
temp/
*.tmp
*.temp

# Logs
*.log
logs/

# Eleventy specific
.eleventy.js.bak

# Vercel
.vercel/

# Bitbucket Pipelines artifacts
artifacts/

.env.example file code; 

# ============================================
# QUROVEL STREAMING - ENVIRONMENT VARIABLES
# ============================================
# Copy this file to .env and fill in the values
# NEVER commit .env to version control!
# ============================================

# BITBUCKET CONFIGURATION
# ============================================
# Create an app password at: https://bitbucket.org/account/settings/app-passwords/
# Required permissions: Account:Read, Repositories:Read
BITBUCKET_TOKEN=your_bitbucket_app_password_here
BITBUCKET_WORKSPACE=your_workspace_name
BITBUCKET_REPO=quravel-streaming

# TMDB API (OPTIONAL - For image enrichment)
# ============================================
# Get API key from: https://www.themoviedb.org/settings/api
TMDB_API_KEY=your_tmdb_api_key_here

# VERCEL DEPLOYMENT
# ============================================
# Get token from: https://vercel.com/account/tokens
VERCEL_TOKEN=your_vercel_token_here

# SITE CONFIGURATION
# ============================================
SITE_URL=https://quravel.vercel.app
SITE_NAME=Quravel Streaming
SITE_DESCRIPTION=Free streaming movies, TV shows, and anime
SITE_LANGUAGE=en
TIMEZONE=UTC

# PERFORMANCE
# ============================================
NODE_ENV=production
ELEVENTY_CACHE_DURATION=1y

# ANALYTICS (OPTIONAL)
# ============================================
GOOGLE_ANALYTICS_ID=UA-XXXXXXXXX-X

 src/
    ├── _data/
    │   ├── posts.json file code;

{
  "posts": [
    {
      "id": "mha-s1",
      "title": "My Hero Academia Season 1",
      "originalTitle": "Boku no Hero Academia",
      "type": "anime",
      "category": "action",
      "year": 2016,
      "rating": 8.0,
      "description": "In a world where 80% of humanity possesses 'Quirks,' Izuku Midoriya is born powerless but gains a chance to become a hero after a fated meeting with All Might.",
      "genres": ["Animation", "Action", "School"],
      "poster": "https://cdn.myanimelist.net/images/anime/10/78745l.jpg",
      "backdrop": "https://image.tmdb.org/t/p/original/6v6pBvM6oXG7WpYm8M9r8R0R6j.jpg",
      "popularity": 99,
      "featured": false,
      "duration": "24 min",
      "certification": "TV-14",
      "status": "completed",
      "studio": "Bones",
      "cast": ["Daiki Yamashita", "Kenta Miyake", "Nobuhiko Okamoto"],
      "trailer": "https://www.youtube.com/watch?v=-77UEct0K7Q",
      "dateAdded": "2024-12-16",
      "country": "Japan",
      "seasons": [
        {
          "seasonNumber": 1,
          "episodes": [
            {
              "number": 1,
              "title": "Izuku Midoriya: Origin",
              "duration": "24 min",
              "servers": {
                "raw": [
                  { "name": "Raw-HD-01", "url": "https://server-raw.com/mha-s1-e1-1" },
                  { "name": "Raw-HD-02", "url": "https://server-raw.com/mha-s1-e1-2" },
                  { "name": "Raw-HD-03", "url": "https://server-raw.com/mha-s1-e1-3" }
                ],
                "sub": [
                  { "name": "Sub-HD-01", "url": "https://server-sub.com/mha-s1-e1-1" },
                  { "name": "Sub-HD-02", "url": "https://server-sub.com/mha-s1-e1-2" },
                  { "name": "Sub-HD-03", "url": "https://server-sub.com/mha-s1-e1-3" }
                ],
                "dub": [
                  { "name": "Dub-HD-01", "url": "https://server-dub.com/mha-s1-e1-1" },
                  { "name": "Dub-HD-02", "url": "https://server-dub.com/mha-s1-e1-2" },
                  { "name": "Dub-HD-03", "url": "https://server-dub.com/mha-s1-e1-3" }
                ]
              }
            }
          ]
        }
      ]
    },
    {
      "id": "the-fantastic-four-first-steps-2025",
      "title": "The Fantastic Four: First Steps",
      "originalTitle": "The Fantastic Four: First Steps",
      "type": "movie",
      "category": "action",
      "year": 2025,
      "rating": 0.0,
      "description": "Marvel's First Family enters the MCU. Set in a retro-futuristic 1960s, the team must balance their new powers with a cosmic threat.",
      "genres": ["Action", "Sci-Fi", "Adventure"],
      "poster": "https://image.tmdb.org/t/p/original/hlr98oSh996qqW.jpg",
      "backdrop": "https://image.tmdb.org/t/p/original/jjk0_backdrop.jpg",
      "popularity": 97,
      "featured": false,
      "duration": "Upcoming",
      "certification": "PG-13",
      "status": "upcoming",
      "studio": "Marvel Studios",
      "cast": ["Pedro Pascal", "Vanessa Kirby", "Joseph Quinn", "Ebon Moss-Bachrach"],
      "trailer": "https://www.youtube.com/results?search_query=fantastic+four+2025+teaser",
      "dateAdded": "2024-12-17",
      "country": "USA",
      "seasons": [
        {
          "seasonNumber": 1,
          "episodes": [
            {
              "number": 1,
              "title": "The Fantastic Four: First Steps",
              "duration": "Upcoming",
              "servers": {
                "raw": [
                  { "name": "Raw-HD-01", "url": "https://server-raw.com/ff-2025-1" },
                  { "name": "Raw-HD-02", "url": "https://server-raw.com/ff-2025-2" },
                  { "name": "Raw-HD-03", "url": "https://server-raw.com/ff-2025-3" }
                ],
                "sub": [
                  { "name": "Sub-HD-01", "url": "https://server-sub.com/ff-2025-1" },
                  { "name": "Sub-HD-02", "url": "https://server-sub.com/ff-2025-2" },
                  { "name": "Sub-HD-03", "url": "https://server-sub.com/ff-2025-3" }
                ],
                "dub": [
                  { "name": "Dub-HD-01", "url": "https://server-dub.com/ff-2025-1" },
                  { "name": "Dub-HD-02", "url": "https://server-dub.com/ff-2025-2" },
                  { "name": "Dub-HD-03", "url": "https://server-dub.com/ff-2025-3" }
                ]
              }
            }
          ]
        }
      ]
    },
    {
      "id": "jurassic-world-rebirth-2025",
      "title": "Jurassic World Rebirth",
      "originalTitle": "Jurassic World Rebirth",
      "type": "movie",
      "category": "action",
      "year": 2025,
      "rating": 0.0,
      "description": "A new era of the Jurassic franchise begins. Five years after the events of Dominion, a specialized team races to secure DNA samples from the world's most dangerous dinosaurs.",
      "genres": ["Action", "Sci-Fi", "Adventure"],
      "poster": "https://image.tmdb.org/t/p/original/bxWZCCq8ojQygv3pULopfoRr1HB.jpg",
      "backdrop": "https://image.tmdb.org/t/p/original/tcYO8ay3A0liCWxHu2creU3Q9IB.jpg",
      "popularity": 96,
      "featured": false,
      "duration": "Upcoming",
      "certification": "PG-13",
      "status": "upcoming",
      "studio": "Universal Pictures",
      "cast": ["Scarlett Johansson", "Jonathan Bailey", "Mahershala Ali"],
      "trailer": "https://www.youtube.com/results?search_query=jurassic+world+rebirth+trailer",
      "dateAdded": "2024-12-17",
      "country": "USA",
      "seasons": [
        {
          "seasonNumber": 1,
          "episodes": [
            {
              "number": 1,
              "title": "Jurassic World Rebirth",
              "duration": "Upcoming",
              "servers": {
                "raw": [
                  { "name": "Raw-HD-01", "url": "https://server-raw.com/jw-rebirth-1" },
                  { "name": "Raw-HD-02", "url": "https://server-raw.com/jw-rebirth-2" },
                  { "name": "Raw-HD-03", "url": "https://server-raw.com/jw-rebirth-3" }
                ],
                "sub": [
                  { "name": "Sub-HD-01", "url": "https://server-sub.com/jw-rebirth-1" },
                  { "name": "Sub-HD-02", "url": "https://server-sub.com/jw-rebirth-2" },
                  { "name": "Sub-HD-03", "url": "https://server-sub.com/jw-rebirth-3" }
                ],
                "dub": [
                  { "name": "Dub-HD-01", "url": "https://server-dub.com/jw-rebirth-1" },
                  { "name": "Dub-HD-02", "url": "https://server-dub.com/jw-rebirth-2" },
                  { "name": "Dub-HD-03", "url": "https://server-dub.com/jw-rebirth-3" }
                ]
              }
            }
          ]
        }
      ]
    },
    {
      "id": "voldemort-origins-of-the-heir-2026",
      "title": "Voldemort: Origins of the Heir",
      "originalTitle": "Voldemort: Origins of the Heir",
      "type": "movie",
      "category": "action",
      "year": 2026,
      "rating": 0.0,
      "description": "While initially a fan project, HBO's upcoming Harry Potter reboot series has sparked renewed interest in the origins of Tom Riddle. This entry tracks the anticipated 2026 window for the Wizarding World's return.",
      "genres": ["Fantasy", "Drama", "Adventure"],
      "poster": "https://image.tmdb.org/t/p/original/6EiRUJTLqh7g9AtvYpTft8BDN3i.jpg",
      "backdrop": "https://image.tmdb.org/t/p/original/s16H6tpS2bnqUZv9pUlynpxC2no.jpg",
      "popularity": 94,
      "featured": false,
      "duration": "Upcoming",
      "certification": "PG-13",
      "status": "upcoming",
      "studio": "Warner Bros. / HBO",
      "cast": ["To Be Announced"],
      "trailer": "https://www.youtube.com/results?search_query=harry+potter+hbo+series+teaser",
      "dateAdded": "2024-12-17",
      "country": "USA",
      "seasons": [
        {
          "seasonNumber": 1,
          "episodes": [
            {
              "number": 1,
              "title": "Voldemort: Origins of the Heir",
              "duration": "Upcoming",
              "servers": {
                "raw": [
                  { "name": "Raw-HD-01", "url": "https://server-raw.com/voldemort-1" },
                  { "name": "Raw-HD-02", "url": "https://server-raw.com/voldemort-2" },
                  { "name": "Raw-HD-03", "url": "https://server-raw.com/voldemort-3" }
                ],
                "sub": [
                  { "name": "Sub-HD-01", "url": "https://server-sub.com/voldemort-1" },
                  { "name": "Sub-HD-02", "url": "https://server-sub.com/voldemort-2" },
                  { "name": "Sub-HD-03", "url": "https://server-sub.com/voldemort-3" }
                ],
                "dub": [
                  { "name": "Dub-HD-01", "url": "https://server-dub.com/voldemort-1" },
                  { "name": "Dub-HD-02", "url": "https://server-dub.com/voldemort-2" },
                  { "name": "Dub-HD-03", "url": "https://server-dub.com/voldemort-3" }
                ]
              }
            }
          ]
        }
      ]
    },
    {
      "id": "superman-2025",
      "title": "Superman",
      "originalTitle": "Superman",
      "type": "movie",
      "category": "action",
      "year": 2025,
      "rating": 0.0,
      "description": "Directed by James Gunn, this film follows Superman as he reconciles his heritage with his human upbringing. He is the embodiment of truth, justice, and a better tomorrow.",
      "genres": ["Action", "Adventure", "Sci-Fi"],
      "poster": "https://image.tmdb.org/t/p/original/78ba8N6T96GTMq98Y6y69HkWvM7s.jpg",
      "backdrop": "https://image.tmdb.org/t/p/original/5mY69M7sIu7j69HkWvM7sIu7j.jpg",
      "popularity": 100,
      "featured": true,
      "duration": "Upcoming",
      "certification": "PG-13",
      "status": "upcoming",
      "studio": "DC Studios / Warner Bros.",
      "cast": ["David Corenswet", "Rachel Brosnahan", "Nicholas Hoult"],
      "trailer": "https://www.youtube.com/results?search_query=superman+2025+official+trailer",
      "dateAdded": "2024-12-17",
      "country": "USA",
      "seasons": [
        {
          "seasonNumber": 1,
          "episodes": [
            {
              "number": 1,
              "title": "Superman",
              "duration": "Upcoming",
              "servers": {
                "raw": [
                  { "name": "Raw-HD-01", "url": "https://server-raw.com/superman-2025-1" },
                  { "name": "Raw-HD-02", "url": "https://server-raw.com/superman-2025-2" },
                  { "name": "Raw-HD-03", "url": "https://server-raw.com/superman-2025-3" }
                ],
                "sub": [
                  { "name": "Sub-HD-01", "url": "https://server-sub.com/superman-2025-1" },
                  { "name": "Sub-HD-02", "url": "https://server-sub.com/superman-2025-2" },
                  { "name": "Sub-HD-03", "url": "https://server-sub.com/superman-2025-3" }
                ],
                "dub": [
                  { "name": "Dub-HD-01", "url": "https://server-dub.com/superman-2025-1" },
                  { "name": "Dub-HD-02", "url": "https://server-dub.com/superman-2025-2" },
                  { "name": "Dub-HD-03", "url": "https://server-dub.com/superman-2025-3" }
                ]
              }
            }
          ]
        }
      ]
    },
    {
      "id": "mission-impossible-dead-reckoning-part-2",
      "title": "Mission: Impossible - Dead Reckoning Part Two",
      "originalTitle": "Mission: Impossible - Dead Reckoning Part Two",
      "type": "movie",
      "category": "action",
      "year": 2025,
      "rating": 0.0,
      "description": "Ethan Hunt and his IMF team embark on their most dangerous mission yet to track down a terrifying new weapon that threatens all of humanity.",
      "genres": ["Action", "Adventure", "Thriller"],
      "poster": "https://image.tmdb.org/t/p/original/6v6pBvM6oXG7WpYm8M9r8R0R6j.jpg",
      "backdrop": "https://image.tmdb.org/t/p/original/vL5o40STRXS2Zrx0mR95t996qqW.jpg",
      "popularity": 98,
      "featured": false,
      "duration": "Upcoming",
      "certification": "PG-13",
      "status": "upcoming",
      "studio": "Paramount Pictures",
      "cast": ["Tom Cruise", "Hayley Atwell", "Ving Rhames"],
      "trailer": "https://www.youtube.com/results?search_query=mission+impossible+8+trailer",
      "dateAdded": "2024-12-17",
      "country": "USA",
      "seasons": [
        {
          "seasonNumber": 1,
          "episodes": [
            {
              "number": 1,
              "title": "Mission: Impossible - Dead Reckoning Part Two",
              "duration": "Upcoming",
              "servers": {
                "raw": [
                  { "name": "Raw-HD-01", "url": "https://server-raw.com/mi8-1" },
                  { "name": "Raw-HD-02", "url": "https://server-raw.com/mi8-2" },
                  { "name": "Raw-HD-03", "url": "https://server-raw.com/mi8-3" }
                ],
                "sub": [
                  { "name": "Sub-HD-01", "url": "https://server-sub.com/mi8-1" },
                  { "name": "Sub-HD-02", "url": "https://server-sub.com/mi8-2" },
                  { "name": "Sub-HD-03", "url": "https://server-sub.com/mi8-3" }
                ],
                "dub": [
                  { "name": "Dub-HD-01", "url": "https://server-dub.com/mi8-1" },
                  { "name": "Dub-HD-02", "url": "https://server-dub.com/mi8-2" },
                  { "name": "Dub-HD-03", "url": "https://server-dub.com/mi8-3" }
                ]
              }
            }
          ]
        }
      ]
    },
    {
      "id": "puss-in-boots-last-wish-2022",
      "title": "Puss in Boots: The Last Wish",
      "originalTitle": "Puss in Boots: The Last Wish",
      "type": "movie",
      "category": "animation",
      "year": 2022,
      "rating": 7.8,
      "description": "Puss in Boots discovers that his passion for adventure has taken its toll: he has burned through eight of his nine lives. Puss sets out on an epic journey to find the mythical Last Wish and restore his nine lives.",
      "genres": ["Animation", "Adventure", "Comedy"],
      "poster": "https://image.tmdb.org/t/p/original/kuf6evRbcS3UOAfmH0HNsCc1SPg.jpg",
      "backdrop": "https://image.tmdb.org/t/p/original/r9oUsaruelv3YmZdqaoBcSD9p1X.jpg",
      "popularity": 95,
      "featured": false,
      "duration": "102 min",
      "certification": "PG",
      "status": "completed",
      "studio": "DreamWorks Animation",
      "cast": ["Antonio Banderas", "Salma Hayek"],
      "trailer": "https://www.youtube.com/watch?v=RqrXhwS33yc",
      "dateAdded": "2024-12-17",
      "country": "USA",
      "seasons": [
        {
          "seasonNumber": 1,
          "episodes": [
            {
              "number": 1,
              "title": "Puss in Boots: The Last Wish",
              "duration": "102 min",
              "servers": {
                "raw": [
                  { "name": "Raw-HD-01", "url": "https://server-raw.com/puss-boots-1" },
                  { "name": "Raw-HD-02", "url": "https://server-raw.com/puss-boots-2" },
                  { "name": "Raw-HD-03", "url": "https://server-raw.com/puss-boots-3" }
                ],
                "sub": [
                  { "name": "Sub-HD-01", "url": "https://server-sub.com/puss-boots-1" },
                  { "name": "Sub-HD-02", "url": "https://server-sub.com/puss-boots-2" },
                  { "name": "Sub-HD-03", "url": "https://server-sub.com/puss-boots-3" }
                ],
                "dub": [
                  { "name": "Dub-HD-01", "url": "https://server-dub.com/puss-boots-1" },
                  { "name": "Dub-HD-02", "url": "https://server-dub.com/puss-boots-2" },
                  { "name": "Dub-HD-03", "url": "https://server-dub.com/puss-boots-3" }
                ]
              }
            }
          ]
        }
      ]
    },
    {
      "id": "top-gun-maverick-2022",
      "title": "Top Gun: Maverick",
      "originalTitle": "Top Gun: Maverick",
      "type": "movie",
      "category": "action",
      "year": 2022,
      "rating": 8.2,
      "description": "After thirty years, Maverick is still pushing the envelope as a top naval aviator, but must confront ghosts of his past when he leads TOP GUN's elite graduates on a mission that demands the ultimate sacrifice.",
      "genres": ["Action", "Drama"],
      "poster": "https://image.tmdb.org/t/p/original/62HCnUTziL75KWvYWnu35Yp10mZ.jpg",
      "backdrop": "https://image.tmdb.org/t/p/original/Aa91p7mq13L7vYStFc09a9N9YmB.jpg",
      "popularity": 97,
      "featured": false,
      "duration": "130 min",
      "certification": "PG-13",
      "status": "completed",
      "studio": "Paramount Pictures",
      "cast": ["Tom Cruise", "Miles Teller", "Jennifer Connelly"],
      "trailer": "https://www.youtube.com/watch?v=giXco2jaZ_4",
      "dateAdded": "2024-12-17",
      "country": "USA",
      "seasons": [
        {
          "seasonNumber": 1,
          "episodes": [
            {
              "number": 1,
              "title": "Top Gun: Maverick",
              "duration": "130 min",
              "servers": {
                "raw": [
                  { "name": "Raw-HD-01", "url": "https://server-raw.com/topgun2-1" },
                  { "name": "Raw-HD-02", "url": "https://server-raw.com/topgun2-2" },
                  { "name": "Raw-HD-03", "url": "https://server-raw.com/topgun2-3" }
                ],
                "sub": [
                  { "name": "Sub-HD-01", "url": "https://server-sub.com/topgun2-1" },
                  { "name": "Sub-HD-02", "url": "https://server-sub.com/topgun2-2" },
                  { "name": "Sub-HD-03", "url": "https://server-sub.com/topgun2-3" }
                ],
                "dub": [
                  { "name": "Dub-HD-01", "url": "https://server-dub.com/topgun2-1" },
                  { "name": "Dub-HD-02", "url": "https://server-dub.com/topgun2-2" },
                  { "name": "Dub-HD-03", "url": "https://server-dub.com/topgun2-3" }
                ]
              }
            }
          ]
        }
      ]
    },
    {
      "id": "mha-s2",
      "title": "My Hero Academia Season 2",
      "originalTitle": "Boku no Hero Academia 2nd Season",
      "type": "anime",
      "category": "action",
      "year": 2017,
      "rating": 8.1,
      "description": "The UA students compete in the world-renowned Sports Festival. Later, Deku, Iida, and Todoroki face off against the fearsome Hero Killer: Stain.",
      "genres": ["Action", "School", "Shounen", "Super Power"],
      "poster": "https://cdn.myanimelist.net/images/anime/11/84560l.jpg",
      "backdrop": "https://image.tmdb.org/t/p/original/6v6pBvM6oXG7WpYm8M9r8R0R6j.jpg",
      "popularity": 97,
      "featured": false,
      "duration": "24 min",
      "certification": "TV-14",
      "status": "completed",
      "studio": "Bones",
      "cast": ["Daiki Yamashita", "Nobuhiko Okamoto", "Yuki Kaji"],
      "trailer": "https://www.youtube.com/watch?v=42X4H9G5I6c",
      "dateAdded": "2024-12-01",
      "country": "Japan",
      "seasons": [
        {
          "seasonNumber": 2,
          "episodes": [
            {
              "number": 1,
              "title": "Episode 1",
              "duration": "24 min",
              "servers": {
                "raw": [
                  { "name": "Raw-HD-01", "url": "https://server-raw.com/mha-s2-e1-1" },
                  { "name": "Raw-HD-02", "url": "https://server-raw.com/mha-s2-e1-2" },
                  { "name": "Raw-HD-03", "url": "https://server-raw.com/mha-s2-e1-3" }
                ],
                "sub": [
                  { "name": "Sub-HD-01", "url": "https://server-sub.com/mha-s2-e1-1" },
                  { "name": "Sub-HD-02", "url": "https://server-sub.com/mha-s2-e1-2" },
                  { "name": "Sub-HD-03", "url": "https://server-sub.com/mha-s2-e1-3" }
                ],
                "dub": [
                  { "name": "Dub-HD-01", "url": "https://server-dub.com/mha-s2-e1-1" },
                  { "name": "Dub-HD-02", "url": "https://server-dub.com/mha-s2-e1-2" },
                  { "name": "Dub-HD-03", "url": "https://server-dub.com/mha-s2-e1-3" }
                ]
              }
            }
          ]
        }
      ]
    },
    {
      "id": "mha-s3",
      "title": "My Hero Academia Season 3",
      "originalTitle": "Boku no Hero Academia 3rd Season",
      "type": "anime",
      "category": "action",
      "year": 2018,
      "rating": 8.1,
      "description": "During a summer training camp, the League of Villains launches a surprise attack. This leads to the historic final battle between All Might and All For One.",
      "genres": ["Action", "School", "Shounen", "Super Power"],
      "poster": "https://cdn.myanimelist.net/images/anime/1319/92083l.jpg",
      "backdrop": "https://image.tmdb.org/t/p/original/9r9rYm8M9r8R0R6j.jpg",
      "popularity": 96,
      "featured": false,
      "duration": "24 min",
      "certification": "TV-14",
      "status": "completed",
      "studio": "Bones",
      "cast": ["Daiki Yamashita", "Kenta Miyake", "Akio Otsuka"],
      "trailer": "https://www.youtube.com/watch?v=VQGCKyvzIM4",
      "dateAdded": "2024-12-01",
      "country": "Japan",
      "seasons": [
        {
          "seasonNumber": 3,
          "episodes": [
            {
              "number": 1,
              "title": "Episode 1",
              "duration": "24 min",
              "servers": {
                "raw": [
                  { "name": "Raw-HD-01", "url": "https://server-raw.com/mha-s3-e1-1" },
                  { "name": "Raw-HD-02", "url": "https://server-raw.com/mha-s3-e1-2" },
                  { "name": "Raw-HD-03", "url": "https://server-raw.com/mha-s3-e1-3" }
                ],
                "sub": [
                  { "name": "Sub-HD-01", "url": "https://server-sub.com/mha-s3-e1-1" },
                  { "name": "Sub-HD-02", "url": "https://server-sub.com/mha-s3-e1-2" },
                  { "name": "Sub-HD-03", "url": "https://server-sub.com/mha-s3-e1-3" }
                ],
                "dub": [
                  { "name": "Dub-HD-01", "url": "https://server-dub.com/mha-s3-e1-1" },
                  { "name": "Dub-HD-02", "url": "https://server-dub.com/mha-s3-e1-2" },
                  { "name": "Dub-HD-03", "url": "https://server-dub.com/mha-s3-e1-3" }
                ]
              }
            }
          ]
        }
      ]
    },
    {
      "id": "mha-s4",
      "title": "My Hero Academia Season 4",
      "originalTitle": "Boku no Hero Academia 4th Season",
      "type": "anime",
      "category": "action",
      "year": 2019,
      "rating": 7.9,
      "description": "Deku takes on an internship with Sir Nighteye and joins a mission to rescue a young girl named Eri from the Yakuza leader, Overhaul.",
      "genres": ["Action", "School", "Shounen", "Super Power"],
      "poster": "https://cdn.myanimelist.net/images/anime/1412/105513l.jpg",
      "backdrop": "https://image.tmdb.org/t/p/original/nTvMzcB7vicU2YNQUnS64fsEzbL.jpg",
      "popularity": 95,
      "featured": false,
      "duration": "24 min",
      "certification": "TV-14",
      "status": "completed",
      "studio": "Bones",
      "cast": ["Daiki Yamashita", "Shin-ichiro Miki", "Seiran Kobayashi"],
      "trailer": "https://www.youtube.com/watch?v=PraFso1sVIc",
      "dateAdded": "2024-12-01",
      "country": "Japan",
      "seasons": [
        {
          "seasonNumber": 4,
          "episodes": [
            {
              "number": 1,
              "title": "Episode 1",
              "duration": "24 min",
              "servers": {
                "raw": [
                  { "name": "Raw-HD-01", "url": "https://server-raw.com/mha-s4-e1-1" },
                  { "name": "Raw-HD-02", "url": "https://server-raw.com/mha-s4-e1-2" },
                  { "name": "Raw-HD-03", "url": "https://server-raw.com/mha-s4-e1-3" }
                ],
                "sub": [
                  { "name": "Sub-HD-01", "url": "https://server-sub.com/mha-s4-e1-1" },
                  { "name": "Sub-HD-02", "url": "https://server-sub.com/mha-s4-e1-2" },
                  { "name": "Sub-HD-03", "url": "https://server-sub.com/mha-s4-e1-3" }
                ],
                "dub": [
                  { "name": "Dub-HD-01", "url": "https://server-dub.com/mha-s4-e1-1" },
                  { "name": "Dub-HD-02", "url": "https://server-dub.com/mha-s4-e1-2" },
                  { "name": "Dub-HD-03", "url": "https://server-dub.com/mha-s4-e1-3" }
                ]
              }
            }
          ]
        }
      ]
    },
    {
      "id": "mha-s5",
      "title": "My Hero Academia Season 5",
      "originalTitle": "Boku no Hero Academia 5th Season",
      "type": "anime",
      "category": "action",
      "year": 2021,
      "rating": 7.4,
      "description": "Class 1-A and Class 1-B battle in a joint training exercise. Meanwhile, the League of Villains faces off against the Meta Liberation Army.",
      "genres": ["Action", "School", "Shounen", "Super Power"],
      "poster": "https://cdn.myanimelist.net/images/anime/1908/114031l.jpg",
      "backdrop": "https://image.tmdb.org/t/p/original/o969966p377N2776R8L.jpg",
      "popularity": 94,
      "featured": false,
      "duration": "24 min",
      "certification": "TV-14",
      "status": "completed",
      "studio": "Bones",
      "cast": ["Daiki Yamashita", "Koki Uchiyama", "Misato Fukuen"],
      "trailer": "https://www.youtube.com/watch?v=8pI7_V_0V9c",
      "dateAdded": "2024-12-01",
      "country": "Japan",
      "seasons": [
        {
          "seasonNumber": 5,
          "episodes": [
            {
              "number": 1,
              "title": "Episode 1",
              "duration": "24 min",
              "servers": {
                "raw": [
                  { "name": "Raw-HD-01", "url": "https://server-raw.com/mha-s5-e1-1" },
                  { "name": "Raw-HD-02", "url": "https://server-raw.com/mha-s5-e1-2" },
                  { "name": "Raw-HD-03", "url": "https://server-raw.com/mha-s5-e1-3" }
                ],
                "sub": [
                  { "name": "Sub-HD-01", "url": "https://server-sub.com/mha-s5-e1-1" },
                  { "name": "Sub-HD-02", "url": "https://server-sub.com/mha-s5-e1-2" },
                  { "name": "Sub-HD-03", "url": "https://server-sub.com/mha-s5-e1-3" }
                ],
                "dub": [
                  { "name": "Dub-HD-01", "url": "https://server-dub.com/mha-s5-e1-1" },
                  { "name": "Dub-HD-02", "url": "https://server-dub.com/mha-s5-e1-2" },
                  { "name": "Dub-HD-03", "url": "https://server-dub.com/mha-s5-e1-3" }
                ]
              }
            }
          ]
        }
      ]
    },
    {
      "id": "mha-s6",
      "title": "My Hero Academia Season 6",
      "originalTitle": "Boku no Hero Academia 6th Season",
      "type": "anime",
      "category": "action",
      "year": 2022,
      "rating": 8.2,
      "description": "The Paranormal Liberation War begins. Heroes and Villains engage in an all-out war that will change hero society forever.",
      "genres": ["Action", "School", "Shounen", "Super Power"],
      "poster": "https://cdn.myanimelist.net/images/anime/1492/127320l.jpg",
      "backdrop": "https://image.tmdb.org/t/p/original/tcYO8ay3A0liCWxHu2creU3Q9IB.jpg",
      "popularity": 97,
      "featured": false,
      "duration": "24 min",
      "certification": "TV-14",
      "status": "completed",
      "studio": "Bones",
      "cast": ["Daiki Yamashita", "Nobuhiko Okamoto", "Koki Uchiyama"],
      "trailer": "https://www.youtube.com/watch?v=PraFso1sVIc",
      "dateAdded": "2024-12-01",
      "country": "Japan",
      "seasons": [
        {
          "seasonNumber": 6,
          "episodes": [
            {
              "number": 1,
              "title": "Episode 1",
              "duration": "24 min",
              "servers": {
                "raw": [
                  { "name": "Raw-HD-01", "url": "https://server-raw.com/mha-s6-e1-1" },
                  { "name": "Raw-HD-02", "url": "https://server-raw.com/mha-s6-e1-2" },
                  { "name": "Raw-HD-03", "url": "https://server-raw.com/mha-s6-e1-3" }
                ],
                "sub": [
                  { "name": "Sub-HD-01", "url": "https://server-sub.com/mha-s6-e1-1" },
                  { "name": "Sub-HD-02", "url": "https://server-sub.com/mha-s6-e1-2" },
                  { "name": "Sub-HD-03", "url": "https://server-sub.com/mha-s6-e1-3" }
                ],
                "dub": [
                  { "name": "Dub-HD-01", "url": "https://server-dub.com/mha-s6-e1-1" },
                  { "name": "Dub-HD-02", "url": "https://server-dub.com/mha-s6-e1-2" },
                  { "name": "Dub-HD-03", "url": "https://server-dub.com/mha-s6-e1-3" }
                ]
              }
            }
          ]
        }
      ]
    },
    {
      "id": "mha-s7",
      "title": "My Hero Academia Season 7",
      "originalTitle": "Boku no Hero Academia 7th Season",
      "type": "anime",
      "category": "action",
      "year": 2024,
      "rating": 8.3,
      "description": "The final war between Heroes and Villains begins as Star and Stripe arrives from the USA to face Shigaraki.",
      "genres": ["Action", "School", "Shounen"],
      "poster": "https://cdn.myanimelist.net/images/anime/1276/150585l.jpg",
      "backdrop": "https://cdn.imgchest.com/files/837e9f15d946.jpeg",
      "popularity": 98,
      "featured": false,
      "duration": "24 min",
      "certification": "TV-14",
      "status": "ongoing",
      "studio": "Bones",
      "cast": ["Daiki Yamashita", "Nobuhiko Okamoto", "Yuki Kaji"],
      "trailer": "https://www.youtube.com/watch?v=7oxoT2w9cCA",
      "dateAdded": "2024-12-01",
      "country": "Japan",
      "seasons": [
        {
          "seasonNumber": 7,
          "episodes": [
            {
              "number": 1,
              "title": "Episode 1",
              "duration": "24 min",
              "servers": {
                "raw": [
                  { "name": "Raw-HD-01", "url": "https://server-raw.com/mha-s7-e1-1" },
                  { "name": "Raw-HD-02", "url": "https://server-raw.com/mha-s7-e1-2" },
                  { "name": "Raw-HD-03", "url": "https://server-raw.com/mha-s7-e1-3" }
                ],
                "sub": [
                  { "name": "Sub-HD-01", "url": "https://server-sub.com/mha-s7-e1-1" },
                  { "name": "Sub-HD-02", "url": "https://server-sub.com/mha-s7-e1-2" },
                  { "name": "Sub-HD-03", "url": "https://server-sub.com/mha-s7-e1-3" }
                ],
                "dub": [
                  { "name": "Dub-HD-01", "url": "https://server-dub.com/mha-s7-e1-1" },
                  { "name": "Dub-HD-02", "url": "https://server-dub.com/mha-s7-e1-2" },
                  { "name": "Dub-HD-03", "url": "https://server-dub.com/mha-s7-e1-3" }
                ]
              }
            }
          ]
        }
      ]
    },
    {
      "id": "mha-s8",
      "title": "My Hero Academia Final Season",
      "originalTitle": "Boku no Hero Academia Final Season",
      "type": "anime",
      "category": "action",
      "year": 2025,
      "rating": 8.7,
      "description": "The appearance of \"quirks,\" newly discovered super powers, has been steadily increasing over the years, with 80 percent of humanity possessing various abilities from manipulation of elements to shapeshifting. This leaves the remainder of the world completely powerless, and Izuku Midoriya is one such individual.",
      "genres": ["Action", "School", "Shounen", "Super Power"],
      "poster": "https://cdn.myanimelist.net/images/anime/1276/150585l.jpg",
      "backdrop": "https://cdn.imgchest.com/files/6cfdfb14a02b.jfif",
      "popularity": 98,
      "featured": false,
      "duration": "24 min",
      "certification": "TV-14",
      "status": "upcoming",
      "studio": "Bones",
      "cast": ["Daiki Yamashita", "Nobuhiko Okamoto", "Yuki Kaji"],
      "trailer": "https://www.youtube.com/watch?v=example",
      "dateAdded": "2024-12-01",
      "country": "Japan",
      "seasons": [
        {
          "seasonNumber": 8,
          "episodes": [
            {
              "number": 1,
              "title": "Episode 1",
              "duration": "24 min",
              "servers": {
                "raw": [
                  { "name": "Raw-HD-01", "url": "https://server-raw.com/mha-s8-e1-1" },
                  { "name": "Raw-HD-02", "url": "https://server-raw.com/mha-s8-e1-2" },
                  { "name": "Raw-HD-03", "url": "https://server-raw.com/mha-s8-e1-3" }
                ],
                "sub": [
                  { "name": "Sub-HD-01", "url": "https://server-sub.com/mha-s8-e1-1" },
                  { "name": "Sub-HD-02", "url": "https://server-sub.com/mha-s8-e1-2" },
                  { "name": "Sub-HD-03", "url": "https://server-sub.com/mha-s8-e1-3" }
                ],
                "dub": [
                  { "name": "Dub-HD-01", "url": "https://server-dub.com/mha-s8-e1-1" },
                  { "name": "Dub-HD-02", "url": "https://server-dub.com/mha-s8-e1-2" },
                  { "name": "Dub-HD-03", "url": "https://server-dub.com/mha-s8-e1-3" }
                ]
              }
            }
          ]
        }
      ]
    },
    {
      "id": "mha-movie-1",
      "title": "My Hero Academia: Two Heroes",
      "originalTitle": "Futari no Hero",
      "type": "movie",
      "category": "action",
      "year": 2018,
      "rating": 7.4,
      "description": "Deku and All Might visit I-Island to meet an old friend, but they find themselves trapped when a sophisticated security system is hacked by villains.",
      "genres": ["Animation", "Action", "Sci-Fi"],
      "poster": "https://cdn.myanimelist.net/images/anime/1126/91102l.jpg",
      "backdrop": "https://image.tmdb.org/t/p/original/9r9rYm8M9r8R0R6j.jpg",
      "popularity": 89,
      "featured": false,
      "duration": "96 min",
      "certification": "PG-13",
      "status": "completed",
      "studio": "Bones",
      "cast": ["Daiki Yamashita", "Kenta Miyake", "Mirai Shida"],
      "trailer": "https://www.youtube.com/watch?v=S8pB68VAsf8",
      "dateAdded": "2024-12-17",
      "country": "Japan",
      "seasons": [
        {
          "seasonNumber": 1,
          "episodes": [
            {
              "number": 1,
              "title": "My Hero Academia: Two Heroes",
              "duration": "96 min",
              "servers": {
                "raw": [
                  { "name": "Raw-HD-01", "url": "https://server-raw.com/mha-movie1-1" },
                  { "name": "Raw-HD-02", "url": "https://server-raw.com/mha-movie1-2" },
                  { "name": "Raw-HD-03", "url": "https://server-raw.com/mha-movie1-3" }
                ],
                "sub": [
                  { "name": "Sub-HD-01", "url": "https://server-sub.com/mha-movie1-1" },
                  { "name": "Sub-HD-02", "url": "https://server-sub.com/mha-movie1-2" },
                  { "name": "Sub-HD-03", "url": "https://server-sub.com/mha-movie1-3" }
                ],
                "dub": [
                  { "name": "Dub-HD-01", "url": "https://server-dub.com/mha-movie1-1" },
                  { "name": "Dub-HD-02", "url": "https://server-dub.com/mha-movie1-2" },
                  { "name": "Dub-HD-03", "url": "https://server-dub.com/mha-movie1-3" }
                ]
              }
            }
          ]
        }
      ]
    },
    {
      "id": "mha-movie-2",
      "title": "My Hero Academia: Heroes Rising",
      "originalTitle": "Boku no Hero Academia the Movie: Heroes:Rising",
      "type": "movie",
      "category": "action",
      "year": 2019,
      "rating": 7.9,
      "description": "Class 1-A visits Nabu Island for a safety project, but their peaceful trip is cut short when they are attacked by a powerful villain named Nine.",
      "genres": ["Animation", "Action", "Fantasy"],
      "poster": "https://cdn.myanimelist.net/images/anime/1623/103330l.jpg",
      "backdrop": "https://image.tmdb.org/t/p/original/nTvMzcB7vicU2YNQUnS64fsEzbL.jpg",
      "popularity": 92,
      "featured": false,
      "duration": "104 min",
      "certification": "PG-13",
      "status": "completed",
      "studio": "Bones",
      "cast": ["Daiki Yamashita", "Nobuhiko Okamoto", "Yoshio Inoue"],
      "trailer": "https://www.youtube.com/watch?v=PraFso1sVIc",
      "dateAdded": "2024-12-17",
      "country": "Japan",
      "seasons": [
        {
          "seasonNumber": 1,
          "episodes": [
            {
              "number": 1,
              "title": "My Hero Academia: Heroes Rising",
              "duration": "104 min",
              "servers": {
                "raw": [
                  { "name": "Raw-HD-01", "url": "https://server-raw.com/mha-movie2-1" },
                  { "name": "Raw-HD-02", "url": "https://server-raw.com/mha-movie2-2" },
                  { "name": "Raw-HD-03", "url": "https://server-raw.com/mha-movie2-3" }
                ],
                "sub": [
                  { "name": "Sub-HD-01", "url": "https://server-sub.com/mha-movie2-1" },
                  { "name": "Sub-HD-02", "url": "https://server-sub.com/mha-movie2-2" },
                  { "name": "Sub-HD-03", "url": "https://server-sub.com/mha-movie2-3" }
                ],
                "dub": [
                  { "name": "Dub-HD-01", "url": "https://server-dub.com/mha-movie2-1" },
                  { "name": "Dub-HD-02", "url": "https://server-dub.com/mha-movie2-2" },
                  { "name": "Dub-HD-03", "url": "https://server-dub.com/mha-movie2-3" }
                ]
              }
            }
          ]
        }
      ]
    },
    {
      "id": "mha-movie-3",
      "title": "My Hero Academia: World Heroes' Mission",
      "originalTitle": "World Heroes' Mission",
      "type": "movie",
      "category": "action",
      "year": 2021,
      "rating": 7.5,
      "description": "When a cult releases a chemical that makes Quirks go out of control, the world's heroes must divide and conquer across the globe to stop them.",
      "genres": ["Animation", "Action", "Adventure"],
      "poster": "https://cdn.myanimelist.net/images/anime/1118/116972l.jpg",
      "backdrop": "https://image.tmdb.org/t/p/original/o969966p377N2776R8L.jpg",
      "popularity": 90,
      "featured": false,
      "duration": "105 min",
      "certification": "PG-13",
      "status": "completed",
      "studio": "Bones",
      "cast": ["Daiki Yamashita", "Nobuhiko Okamoto", "Yuki Kaji"],
      "trailer": "https://www.youtube.com/watch?v=8pI7_V_0V9c",
      "dateAdded": "2024-12-17",
      "country": "Japan",
      "seasons": [
        {
          "seasonNumber": 1,
          "episodes": [
            {
              "number": 1,
              "title": "My Hero Academia: World Heroes' Mission",
              "duration": "105 min",
              "servers": {
                "raw": [
                  { "name": "Raw-HD-01", "url": "https://server-raw.com/mha-movie3-1" },
                  { "name": "Raw-HD-02", "url": "https://server-raw.com/mha-movie3-2" },
                  { "name": "Raw-HD-03", "url": "https://server-raw.com/mha-movie3-3" }
                ],
                "sub": [
                  { "name": "Sub-HD-01", "url": "https://server-sub.com/mha-movie3-1" },
                  { "name": "Sub-HD-02", "url": "https://server-sub.com/mha-movie3-2" },
                  { "name": "Sub-HD-03", "url": "https://server-sub.com/mha-movie3-3" }
                ],
                "dub": [
                  { "name": "Dub-HD-01", "url": "https://server-dub.com/mha-movie3-1" },
                  { "name": "Dub-HD-02", "url": "https://server-dub.com/mha-movie3-2" },
                  { "name": "Dub-HD-03", "url": "https://server-dub.com/mha-movie3-3" }
                ]
              }
            }
          ]
        }
      ]
    },
    {
      "id": "mha-movie-4",
      "title": "My Hero Academia: You're Next",
      "originalTitle": "Boku no Hero Academia the Movie: You're Next",
      "type": "movie",
      "category": "action",
      "year": 2024,
      "rating": 7.6,
      "description": "In a society crumbling from war, a mysterious man resembling the former 'Symbol of Peace' appears, forcing Deku and Class 1-A into a new conflict.",
      "genres": ["Animation", "Action", "Drama"],
      "poster": "https://cdn.myanimelist.net/images/anime/1585/143586l.jpg",
      "backdrop": "https://image.tmdb.org/t/p/original/tcYO8ay3A0liCWxHu2creU3Q9IB.jpg",
      "popularity": 96,
      "featured": false,
      "duration": "110 min",
      "certification": "PG-13",
      "status": "completed",
      "studio": "Bones",
      "cast": ["Daiki Yamashita", "Kenta Miyake", "Mamoru Miyano"],
      "trailer": "https://www.youtube.com/watch?v=7oxoT2w9cCA",
      "dateAdded": "2024-12-17",
      "country": "Japan",
      "seasons": [
        {
          "seasonNumber": 1,
          "episodes": [
            {
              "number": 1,
              "title": "My Hero Academia: You're Next",
              "duration": "110 min",
              "servers": {
                "raw": [
                  { "name": "Raw-HD-01", "url": "https://server-raw.com/mha-movie4-1" },
                  { "name": "Raw-HD-02", "url": "https://server-raw.com/mha-movie4-2" },
                  { "name": "Raw-HD-03", "url": "https://server-raw.com/mha-movie4-3" }
                ],
                "sub": [
                  { "name": "Sub-HD-01", "url": "https://server-sub.com/mha-movie4-1" },
                  { "name": "Sub-HD-02", "url": "https://server-sub.com/mha-movie4-2" },
                  { "name": "Sub-HD-03", "url": "https://server-sub.com/mha-movie4-3" }
                ],
                "dub": [
                  { "name": "Dub-HD-01", "url": "https://server-dub.com/mha-movie4-1" },
                  { "name": "Dub-HD-02", "url": "https://server-dub.com/mha-movie4-2" },
                  { "name": "Dub-HD-03", "url": "https://server-dub.com/mha-movie4-3" }
                ]
              }
            }
          ]
        }
      ]
    },
    {
      "id": "jjk-s1",
      "title": "Jujutsu Kaisen Season 1",
      "originalTitle": "Jujutsu Kaisen",
      "type": "anime",
      "category": "action",
      "year": 2020,
      "rating": 8.7,
      "description": "Yuji Itadori enters the world of Sorcerers after consuming a cursed finger of the demon Sukuna to save his friends.",
      "genres": ["Animation", "Action", "Fantasy"],
      "poster": "https://cdn.myanimelist.net/images/anime/1171/109222l.jpg",
      "backdrop": "https://image.tmdb.org/t/p/original/h4B7mYm8M9r8R0R6j.jpg",
      "popularity": 98,
      "featured": false,
      "duration": "23 min",
      "certification": "TV-MA",
      "status": "completed",
      "studio": "MAPPA",
      "cast": ["Junya Enoki", "Yuma Uchida", "Yuichi Nakamura"],
      "trailer": "https://www.youtube.com/watch?v=pkKu78JvS8c",
      "dateAdded": "2024-01-20",
      "country": "Japan",
      "seasons": [
        {
          "seasonNumber": 1,
          "episodes": [
            {
              "number": 1,
              "title": "Episode 1",
              "duration": "23 min",
              "servers": {
                "raw": [
                  { "name": "Raw-HD-01", "url": "https://server-raw.com/jjk-s1-e1-1" },
                  { "name": "Raw-HD-02", "url": "https://server-raw.com/jjk-s1-e1-2" },
                  { "name": "Raw-HD-03", "url": "https://server-raw.com/jjk-s1-e1-3" }
                ],
                "sub": [
                  { "name": "Sub-HD-01", "url": "https://server-sub.com/jjk-s1-e1-1" },
                  { "name": "Sub-HD-02", "url": "https://server-sub.com/jjk-s1-e1-2" },
                  { "name": "Sub-HD-03", "url": "https://server-sub.com/jjk-s1-e1-3" }
                ],
                "dub": [
                  { "name": "Dub-HD-01", "url": "https://server-dub.com/jjk-s1-e1-1" },
                  { "name": "Dub-HD-02", "url": "https://server-dub.com/jjk-s1-e1-2" },
                  { "name": "Dub-HD-03", "url": "https://server-dub.com/jjk-s1-e1-3" }
                ]
              }
            }
          ]
        }
      ]
    },
    {
      "id": "jjk-movie-0",
      "title": "Jujutsu Kaisen 0",
      "originalTitle": "Gekijouban Jujutsu Kaisen 0",
      "type": "movie",
      "category": "action",
      "year": 2021,
      "rating": 8.5,
      "description": "A prequel following Yuta Okkotsu, a boy haunted by the powerful cursed spirit of his childhood friend.",
      "genres": ["Animation", "Action", "Fantasy"],
      "poster": "https://cdn.myanimelist.net/images/anime/1121/119044l.jpg",
      "backdrop": "https://image.tmdb.org/t/p/original/jjk0_backdrop.jpg",
      "popularity": 95,
      "featured": false,
      "duration": "1h 45m",
      "certification": "PG-13",
      "status": "completed",
      "studio": "MAPPA",
      "cast": ["Megumi Ogata", "Kana Hanazawa", "Yuichi Nakamura"],
      "trailer": "https://www.youtube.com/watch?v=WGiUXKgdIbk",
      "dateAdded": "2024-01-22",
      "country": "Japan",
      "seasons": [
        {
          "seasonNumber": 1,
          "episodes": [
            {
              "number": 1,
              "title": "Jujutsu Kaisen 0",
              "duration": "1h 45m",
              "servers": {
                "raw": [
                  { "name": "Raw-HD-01", "url": "https://server-raw.com/jjk0-1" },
                  { "name": "Raw-HD-02", "url": "https://server-raw.com/jjk0-2" },
                  { "name": "Raw-HD-03", "url": "https://server-raw.com/jjk0-3" }
                ],
                "sub": [
                  { "name": "Sub-HD-01", "url": "https://server-sub.com/jjk0-1" },
                  { "name": "Sub-HD-02", "url": "https://server-sub.com/jjk0-2" },
                  { "name": "Sub-HD-03", "url": "https://server-sub.com/jjk0-3" }
                ],
                "dub": [
                  { "name": "Dub-HD-01", "url": "https://server-dub.com/jjk0-1" },
                  { "name": "Dub-HD-02", "url": "https://server-dub.com/jjk0-2" },
                  { "name": "Dub-HD-03", "url": "https://server-dub.com/jjk0-3" }
                ]
              }
            }
          ]
        }
      ]
    },
    {
      "id": "jujutsu-kaisen-s2",
      "title": "Jujutsu Kaisen Season 2",
      "originalTitle": "Jujutsu Kaisen 2nd Season",
      "type": "anime",
      "category": "action",
      "year": 2023,
      "rating": 8.9,
      "description": "Yuji Itadori faces his darkest challenges yet during the devastating Shibuya Incident.",
      "genres": ["Animation", "Action", "Fantasy"],
      "poster": "https://image.tmdb.org/t/p/original/fHpKWq9ayzSk8nSwqRuaAUemRKh.jpg",
      "backdrop": "https://image.tmdb.org/t/p/w1280/2xV0OKitkU5HZfRhsxykF7g7r9l.jpg",
      "popularity": 97,
      "featured": false,
      "duration": "23 min",
      "certification": "TV-MA",
      "status": "completed",
      "studio": "MAPPA",
      "cast": ["Junya Enoki", "Yuma Uchida", "Yuichi Nakamura"],
      "trailer": "https://www.youtube.com/watch?v=2O1eZg4D_yY",
      "dateAdded": "2024-01-25",
      "country": "Japan",
      "seasons": [
        {
          "seasonNumber": 2,
          "episodes": [
            {
              "number": 1,
              "title": "Episode 1",
              "duration": "23 min",
              "servers": {
                "raw": [
                  { "name": "Raw-HD-01", "url": "https://server-raw.com/jjk-s2-e1-1" },
                  { "name": "Raw-HD-02", "url": "https://server-raw.com/jjk-s2-e1-2" },
                  { "name": "Raw-HD-03", "url": "https://server-raw.com/jjk-s2-e1-3" }
                ],
                "sub": [
                  { "name": "Sub-HD-01", "url": "https://server-sub.com/jjk-s2-e1-1" },
                  { "name": "Sub-HD-02", "url": "https://server-sub.com/jjk-s2-e1-2" },
                  { "name": "Sub-HD-03", "url": "https://server-sub.com/jjk-s2-e1-3" }
                ],
                "dub": [
                  { "name": "Dub-HD-01", "url": "https://server-dub.com/jjk-s2-e1-1" },
                  { "name": "Dub-HD-02", "url": "https://server-dub.com/jjk-s2-e1-2" },
                  { "name": "Dub-HD-03", "url": "https://server-dub.com/jjk-s2-e1-3" }
                ]
              }
            }
          ]
        }
      ]
    },
    {
      "id": "aot-s1",
      "title": "Attack on Titan Season 1",
      "originalTitle": "Shingeki no Kyojin",
      "type": "anime",
      "category": "action",
      "year": 2013,
      "rating": 9.1,
      "description": "After his hometown is destroyed and his mother is killed, young Eren Yeager vows to cleanse the earth of the giant humanoid Titans.",
      "genres": ["Animation", "Action", "Drama"],
      "poster": "https://cdn.myanimelist.net/images/anime/10/47347l.jpg",
      "backdrop": "https://image.tmdb.org/t/p/original/rqbCbjB19amtOtFQbb3K2lgm2zv.jpg",
      "popularity": 100,
      "featured": true,
      "duration": "24 min",
      "certification": "TV-MA",
      "status": "completed",
      "studio": "WIT Studio",
      "cast": ["Yuki Kaji", "Yui Ishikawa", "Marina Inoue"],
      "trailer": "https://www.youtube.com/watch?v=MGRm4IzK1SQ",
      "dateAdded": "2024-12-17",
      "country": "Japan",
      "seasons": [
        {
          "seasonNumber": 1,
          "episodes": [
            {
              "number": 1,
              "title": "To You, 2,000 Years in the Future: The Fall of Shiganshina (1)",
              "duration": "24 min",
              "servers": {
                "raw": [
                  { "name": "Raw-HD-01", "url": "https://server-raw.com/aot1e1-1" },
                  { "name": "Raw-HD-02", "url": "https://server-raw.com/aot1e1-2" },
                  { "name": "Raw-HD-03", "url": "https://server-raw.com/aot1e1-3" }
                ],
                "sub": [
                  { "name": "Sub-HD-01", "url": "https://server-sub.com/aot1e1-1" },
                  { "name": "Sub-HD-02", "url": "https://server-sub.com/aot1e1-2" },
                  { "name": "Sub-HD-03", "url": "https://server-sub.com/aot1e1-3" }
                ],
                "dub": [
                  { "name": "Dub-HD-01", "url": "https://server-dub.com/aot1e1-1" },
                  { "name": "Dub-HD-02", "url": "https://server-dub.com/aot1e1-2" },
                  { "name": "Dub-HD-03", "url": "https://server-dub.com/aot1e1-3" }
                ]
              }
            }
          ]
        }
      ]
    },
    {
      "id": "aot-oad-no-regrets",
      "title": "Attack on Titan: No Regrets",
      "originalTitle": "Kuinaki Sentaku",
      "type": "anime",
      "category": "action",
      "year": 2014,
      "rating": 8.4,
      "description": "The prequel story of Captain Levi Ackerman, exploring his life in the underground city and his first encounter with Commander Erwin Smith.",
      "genres": ["Animation", "Action", "Suspense"],
      "poster": "https://cdn.myanimelist.net/images/anime/7/68037l.jpg",
      "backdrop": "https://image.tmdb.org/t/p/original/m9r8R0R6j.jpg",
      "popularity": 88,
      "featured": false,
      "duration": "27 min",
      "certification": "TV-MA",
      "status": "completed",
      "studio": "WIT Studio",
      "cast": ["Hiroshi Kamiya", "Daisuke Ono"],
      "trailer": "https://www.youtube.com/watch?v=LqN6_oPsc-Y",
      "dateAdded": "2024-12-17",
      "country": "Japan",
      "seasons": [
        {
          "seasonNumber": 1,
          "episodes": [
            {
              "number": 1,
              "title": "No Regrets Part 1",
              "duration": "27 min",
              "servers": {
                "raw": [
                  { "name": "Raw-HD-01", "url": "https://server-raw.com/aot-noregrets-1" },
                  { "name": "Raw-HD-02", "url": "https://server-raw.com/aot-noregrets-2" },
                  { "name": "Raw-HD-03", "url": "https://server-raw.com/aot-noregrets-3" }
                ],
                "sub": [
                  { "name": "Sub-HD-01", "url": "https://server-sub.com/aot-noregrets-1" },
                  { "name": "Sub-HD-02", "url": "https://server-sub.com/aot-noregrets-2" },
                  { "name": "Sub-HD-03", "url": "https://server-sub.com/aot-noregrets-3" }
                ],
                "dub": [
                  { "name": "Dub-HD-01", "url": "https://server-dub.com/aot-noregrets-1" },
                  { "name": "Dub-HD-02", "url": "https://server-dub.com/aot-noregrets-2" },
                  { "name": "Dub-HD-03", "url": "https://server-dub.com/aot-noregrets-3" }
                ]
              }
            }
          ]
        }
      ]
    }
  ]
}

 src/index.njk file code; 

---
layout: null
---
<!DOCTYPE html>
<html class="dark" lang="en">
<head>
    <meta charset="utf-8"/>
    <meta content="width=device-width, initial-scale=1.0" name="viewport"/>
    <title>Quravel - Homepage</title>
    <meta name="algolia-site-verification" content="F6BCD1C35FCD1EB6" />
    <script src="https://cdn.tailwindcss.com?plugins=forms,container-queries"></script>
    <script>
        tailwind.config = {
            darkMode: "class",
            theme: {
                extend: {
                    colors: {
                        primary: "#498BBB", 
                        "background-light": "#F3F4F6",
                        "background-dark": "#0B0E19",
                        "surface-dark": "#151926",
                        "footer-dark": "#0C0E14",
                        "text-light": "#E5E7EB",
                        "text-muted": "#9CA3AF"
                    },
                    fontFamily: {
                        display: ["Inter", "sans-serif"],
                        body: ["Inter", "sans-serif"],
                    },
                    borderRadius: {
                        DEFAULT: "0.5rem",
                    },
                },
            },
        };
    </script>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&amp;display=swap" rel="stylesheet"/>
    <link href="https://fonts.googleapis.com/css2?family=Material+Symbols+Outlined:wght,FILL@100..700,0..1&amp;display=swap" rel="stylesheet"/>
    <style>
        body {
            font-family: 'Inter', sans-serif;
        }
        .hide-scrollbar::-webkit-scrollbar {
            display: none;
        }
        .hide-scrollbar {
            -ms-overflow-style: none;
            scrollbar-width: none;
        }
        #mobile-menu {
            transition: transform 0.3s ease-in-out;
        }
        .menu-open {
            transform: translateX(0) !important;
        }
        #hero-track {
            display: flex;
            transition: transform 0.5s ease-in-out;
            height: 100%;
            width: 100%;
        }
        .carousel-slide {
            min-width: 100%;
            height: 100%;
            position: relative;
            flex-shrink: 0;
        }
        #search-suggestions, #mobile-search-suggestions {
            max-height: 70vh;
            overflow-y: auto;
            scrollbar-width: thin;
            scrollbar-color: #498BBB #151926;
        }
        #search-suggestions::-webkit-scrollbar,
        #mobile-search-suggestions::-webkit-scrollbar {
            width: 8px;
        }
        #search-suggestions::-webkit-scrollbar-track,
        #mobile-search-suggestions::-webkit-scrollbar-track {
            background: #151926;
        }
        #search-suggestions::-webkit-scrollbar-thumb,
        #mobile-search-suggestions::-webkit-scrollbar-thumb {
            background-color: #498BBB;
            border-radius: 4px;
        }
        .dropdown-container:hover .dropdown-content {
            opacity: 1;
            visibility: visible;
            transform: translateY(0);
        }
        .dropdown-content {
            opacity: 0;
            visibility: hidden;
            transform: translateY(10px);
            transition: all 0.2s ease;
        }
        /* Heart icon styles */
        .heart-icon {
            background: rgba(255, 255, 255, 0.1);
            backdrop-filter: blur(10px);
            -webkit-backdrop-filter: blur(10px);
            border: 1px solid rgba(255, 255, 255, 0.2);
        }
        .heart-icon:hover {
            background: rgba(255, 255, 255, 0.2);
            border-color: rgba(255, 255, 255, 0.3);
        }
        .heart-icon.active {
            background: rgba(239, 68, 68, 0.2);
            border-color: rgba(239, 68, 68, 0.4);
        }
        .heart-icon.active span {
            color: #ef4444 !important;
        }
        .heart-icon.watching {
            background: rgba(73, 139, 187, 0.2);
            border-color: rgba(73, 139, 187, 0.4);
        }
        .heart-icon.completed {
            background: rgba(34, 197, 94, 0.2);
            border-color: rgba(34, 197, 94, 0.4);
        }
        .heart-icon.planning {
            background: rgba(249, 115, 22, 0.2);
            border-color: rgba(249, 115, 22, 0.4);
        }
        /* Hide dropdown initially */
        .heart-dropdown {
            display: none;
            opacity: 0;
            transform: translateY(-10px);
            transition: opacity 0.2s ease, transform 0.2s ease;
        }
        .heart-dropdown.active {
            display: block;
            opacity: 1;
            transform: translateY(0);
        }
    </style>
</head>
<body class="bg-background-light dark:bg-background-dark text-gray-900 dark:text-text-light transition-colors duration-300 min-h-screen flex flex-col relative">

    <!-- Mobile Menu Overlay -->
    <div class="fixed inset-0 bg-black/50 z-40 hidden lg:hidden" id="mobile-menu-overlay" onclick="toggleMobileMenu()"></div>
    
    <!-- Mobile Menu -->
    <div class="fixed top-0 left-0 h-full w-64 bg-white dark:bg-[#151926] z-50 transform -translate-x-full lg:hidden overflow-y-auto shadow-2xl" id="mobile-menu">
        <div class="p-4 border-b border-gray-200 dark:border-gray-700 flex justify-between items-center">
            <img alt="Quravel Logo" class="h-8 object-contain" src="https://cdn.imgchest.com/files/449aa5626e23.png"/>
            <button class="text-gray-500 hover:text-primary" onclick="toggleMobileMenu()">
                <span class="material-symbols-outlined">close</span>
            </button>
        </div>
        <div class="p-4 space-y-4">
            <a class="block text-sm font-medium hover:text-primary py-2 border-b border-gray-100 dark:border-gray-800" href="/">Home</a>
            
            <div class="py-2 border-b border-gray-100 dark:border-gray-800">
                <button class="flex items-center justify-between w-full text-sm font-medium hover:text-primary focus:outline-none" onclick="toggleMobileDropdown('genre-mobile')">
                    <span>Genre</span>
                    <span class="material-symbols-outlined text-sm transform transition-transform" id="genre-arrow">expand_more</span>
                </button>
                <div class="hidden mt-2 ml-4 space-y-2 text-sm text-gray-500 dark:text-gray-400" id="genre-mobile">
                    <a class="block hover:text-primary" href="#">Action</a>
<a class="block hover:text-primary" href="#">Adventure</a>
<a class="block hover:text-primary" href="#">Cars</a>
<a class="block hover:text-primary" href="#">Comedy</a>
<a class="block hover:text-primary" href="#">Dementia</a>
<a class="block hover:text-primary" href="#">Demons</a>
<a class="block hover:text-primary" href="#">Drama</a>
<a class="block hover:text-primary" href="#">Ecchi</a>
<a class="block hover:text-primary" href="#">Fantasy</a>
<a class="block hover:text-primary" href="#">Game</a>
<a class="block hover:text-primary" href="#">Harem</a>
<a class="block hover:text-primary" href="#">Historical</a>
<a class="block hover:text-primary" href="#">Horror</a>
<a class="block hover:text-primary" href="#">Isekai</a>
<a class="block hover:text-primary" href="#">Josei</a>
<a class="block hover:text-primary" href="#">Kids</a>
<a class="block hover:text-primary" href="#">Magic</a>
<a class="block hover:text-primary" href="#">Martial Arts</a>
<a class="block hover:text-primary" href="#">Mecha</a>
<a class="block hover:text-primary" href="#">Military</a>
<a class="block hover:text-primary" href="#">Music</a>
<a class="block hover:text-primary" href="#">Mystery</a>
<a class="block hover:text-primary" href="#">Noir</a>
<a class="block hover:text-primary" href="#">Parody</a>
<a class="block hover:text-primary" href="#">Police</a>
<a class="block hover:text-primary" href="#">Psychological</a>
<a class="block hover:text-primary" href="#">Politic</a>
<a class="block hover:text-primary" href="#">Romance</a>
<a class="block hover:text-primary" href="#">Reality-Show</a>
<a class="block hover:text-primary" href="#">Reality-TV</a>
<a class="block hover:text-primary" href="#">Samurai</a>
<a class="block hover:text-primary" href="#">School</a>
<a class="block hover:text-primary" href="#">Sci-Fi</a>
<a class="block hover:text-primary" href="#">Seinen</a>
<a class="block hover:text-primary" href="#">Shoujo</a>
<a class="block hover:text-primary" href="#">Shoujo Ai</a>
<a class="block hover:text-primary" href="#">Shounen</a>
<a class="block hover:text-primary" href="#">Shounen Ai</a>
<a class="block hover:text-primary" href="#">Slice of Life</a>
<a class="block hover:text-primary" href="#">Space</a>
<a class="block hover:text-primary" href="#">Sports</a>
<a class="block hover:text-primary" href="#">Super Power</a>
<a class="block hover:text-primary" href="#">Supernatural</a>
<a class="block hover:text-primary" href="#">Thriller</a>
<a class="block hover:text-primary" href="#">Vampire</a>
<a class="block hover:text-primary" href="#">War</a>
                </div>
            </div>
            
            <div class="py-2 border-b border-gray-100 dark:border-gray-800">
                <button class="flex items-center justify-between w-full text-sm font-medium hover:text-primary focus:outline-none" onclick="toggleMobileDropdown('country-mobile')">
                    <span>Country</span>
                    <span class="material-symbols-outlined text-sm transform transition-transform" id="country-arrow">expand_more</span>
                </button>
                <div class="hidden mt-2 ml-4 space-y-2 text-sm text-gray-500 dark:text-gray-400" id="country-mobile">
                    <a class="block hover:text-primary" href="#">Argentina</a>
<a class="block hover:text-primary" href="#">Australia</a>
<a class="block hover:text-primary" href="#">Austria</a>
<a class="block hover:text-primary" href="#">Bangladesh</a>
<a class="block hover:text-primary" href="#">Belgium</a>
<a class="block hover:text-primary" href="#">Brazil</a>
<a class="block hover:text-primary" href="#">Canada</a>
<a class="block hover:text-primary" href="#">Chile</a>
<a class="block hover:text-primary" href="#">China</a>
<a class="block hover:text-primary" href="#">Colombia</a>
<a class="block hover:text-primary" href="#">Czechia</a>
<a class="block hover:text-primary" href="#">Denmark</a>
<a class="block hover:text-primary" href="#">Egypt</a>
<a class="block hover:text-primary" href="#">Finland</a>
<a class="block hover:text-primary" href="#">France</a>
<a class="block hover:text-primary" href="#">Germany</a>
<a class="block hover:text-primary" href="#">Greece</a>
<a class="block hover:text-primary" href="#">Hong Kong</a>
<a class="block hover:text-primary" href="#">Hungary</a>
<a class="block hover:text-primary" href="#">Iceland</a>
<a class="block hover:text-primary" href="#">India</a>
<a class="block hover:text-primary" href="#">Indonesia</a>
<a class="block hover:text-primary" href="#">Iran</a>
<a class="block hover:text-primary" href="#">Ireland</a>
<a class="block hover:text-primary" href="#">Israel</a>
<a class="block hover:text-primary" href="#">Italy</a>
<a class="block hover:text-primary" href="#">Japan</a>
<a class="block hover:text-primary" href="#">Mexico</a>
<a class="block hover:text-primary" href="#">Netherlands</a>
<a class="block hover:text-primary" href="#">New Zealand</a>
<a class="block hover:text-primary" href="#">Nigeria</a>
<a class="block hover:text-primary" href="#">Pakistan</a>
<a class="block hover:text-primary" href="#">Philippines</a>
<a class="block hover:text-primary" href="#">Poland</a>
<a class="block hover:text-primary" href="#">Russia</a>
<a class="block hover:text-primary" href="#">South Africa</a>
<a class="block hover:text-primary" href="#">Spain</a>
<a class="block hover:text-primary" href="#">Sweden</a>
<a class="block hover:text-primary" href="#">Taiwan</a>
<a class="block hover:text-primary" href="#">Thailand</a>
<a class="block hover:text-primary" href="#">Turkey</a>
<a class="block hover:text-primary" href="#">UK</a>
                </div>
            </div>
            
            <a class="block text-sm font-medium hover:text-primary py-2 border-b border-gray-100 dark:border-gray-800" href="#">Top IMDB</a>
            <a class="block text-sm font-medium hover:text-primary py-2 border-b border-gray-100 dark:border-gray-800" href="#">Updates</a>
            <a class="block text-sm font-medium hover:text-primary py-2" href="https://editor.wix.com/wixel-view/forms/7405900275916997729">Sent Request</a>
        </div>
    </div>

    <!-- Header -->
    <header class="fixed top-0 w-full z-40 bg-white/95 dark:bg-[#0B0E19]/95 backdrop-blur-sm border-b border-gray-200 dark:border-gray-800 shadow-sm">
        <div class="container mx-auto px-4 h-16 flex items-center justify-between">
            <div class="flex items-center gap-4">
                <button class="lg:hidden text-gray-600 dark:text-gray-200 focus:outline-none" onclick="toggleMobileMenu()">
                    <span class="material-symbols-outlined text-3xl">menu</span>
                </button>
                <nav class="hidden lg:flex items-center space-x-6 text-sm font-medium">
                    <a class="hover:text-primary transition-colors text-primary" href="/">Home</a>
                    
                    <!-- Genre Dropdown -->
                    <div class="relative group">
                        <button class="flex items-center space-x-1 hover:text-primary transition-colors focus:outline-none py-4">
                            <span>Genre</span>
                            <span class="material-symbols-outlined text-sm">expand_more</span>
                        </button>
                        <div class="absolute top-full left-0 w-[600px] bg-white dark:bg-[#1A1D29] rounded-b-lg shadow-xl opacity-0 invisible group-hover:opacity-100 group-hover:visible transition-all duration-200 border-t-2 border-primary grid grid-cols-4 gap-4 p-6 z-50">
                            <a class="hover:text-primary block text-sm text-gray-600 dark:text-gray-400" href="#">Adventure</a>
<a class="hover:text-primary block text-sm text-gray-600 dark:text-gray-400" href="#">Adult</a>
<a class="hover:text-primary block text-sm text-gray-600 dark:text-gray-400" href="#">Cars</a>
<a class="hover:text-primary block text-sm text-gray-600 dark:text-gray-400" href="#">Comedy</a>
<a class="hover:text-primary block text-sm text-gray-600 dark:text-gray-400" href="#">Dementia</a>
<a class="hover:text-primary block text-sm text-gray-600 dark:text-gray-400" href="#">Demons</a>
<a class="hover:text-primary block text-sm text-gray-600 dark:text-gray-400" href="#">Drama</a>
<a class="hover:text-primary block text-sm text-gray-600 dark:text-gray-400" href="#">Ecchi</a>
<a class="hover:text-primary block text-sm text-gray-600 dark:text-gray-400" href="#">Fantasy</a>
<a class="hover:text-primary block text-sm text-gray-600 dark:text-gray-400" href="#">Game</a>
<a class="hover:text-primary block text-sm text-gray-600 dark:text-gray-400" href="#">Harem</a>
<a class="hover:text-primary block text-sm text-gray-600 dark:text-gray-400" href="#">Historical</a>
<a class="hover:text-primary block text-sm text-gray-600 dark:text-gray-400" href="#">Horror</a>
<a class="hover:text-primary block text-sm text-gray-600 dark:text-gray-400" href="#">Isekai</a>
<a class="hover:text-primary block text-sm text-gray-600 dark:text-gray-400" href="#">Josei</a>
<a class="hover:text-primary block text-sm text-gray-600 dark:text-gray-400" href="#">Kids</a>
<a class="hover:text-primary block text-sm text-gray-600 dark:text-gray-400" href="#">Magic</a>
<a class="hover:text-primary block text-sm text-gray-600 dark:text-gray-400" href="#">Martial Arts</a>
<a class="hover:text-primary block text-sm text-gray-600 dark:text-gray-400" href="#">Mecha</a>
<a class="hover:text-primary block text-sm text-gray-600 dark:text-gray-400" href="#">Military</a>
<a class="hover:text-primary block text-sm text-gray-600 dark:text-gray-400" href="#">Music</a>
<a class="hover:text-primary block text-sm text-gray-600 dark:text-gray-400" href="#">Mystery</a>
<a class="hover:text-primary block text-sm text-gray-600 dark:text-gray-400" href="#">Parody</a>
<a class="hover:text-primary block text-sm text-gray-600 dark:text-gray-400" href="#">Police</a>
<a class="hover:text-primary block text-sm text-gray-600 dark:text-gray-400" href="#">Politic</a>
<a class="hover:text-primary block text-sm text-gray-600 dark:text-gray-400" href="#">Psychological</a>
<a class="hover:text-primary block text-sm text-gray-600 dark:text-gray-400" href="#">Romance</a>
<a class="hover:text-primary block text-sm text-gray-600 dark:text-gray-400" href="#">Samurai</a>
<a class="hover:text-primary block text-sm text-gray-600 dark:text-gray-400" href="#">School</a>
<a class="hover:text-primary block text-sm text-gray-600 dark:text-gray-400" href="#">Sci-Fi</a>
<a class="hover:text-primary block text-sm text-gray-600 dark:text-gray-400" href="#">Seinen</a>
<a class="hover:text-primary block text-sm text-gray-600 dark:text-gray-400" href="#">Shoujo</a>
<a class="hover:text-primary block text-sm text-gray-600 dark:text-gray-400" href="#">Shoujo Ai</a>
<a class="hover:text-primary block text-sm text-gray-600 dark:text-gray-400" href="#">Shounen</a>
<a class="hover:text-primary block text-sm text-gray-600 dark:text-gray-400" href="#">Shounen Ai</a>
<a class="hover:text-primary block text-sm text-gray-600 dark:text-gray-400" href="#">Slice of Life</a>
<a class="hover:text-primary block text-sm text-gray-600 dark:text-gray-400" href="#">Space</a>
<a class="hover:text-primary block text-sm text-gray-600 dark:text-gray-400" href="#">Sports</a>
<a class="hover:text-primary block text-sm text-gray-600 dark:text-gray-400" href="#">Super Power</a>
<a class="hover:text-primary block text-sm text-gray-600 dark:text-gray-400" href="#">Supernatural</a>
<a class="hover:text-primary block text-sm text-gray-600 dark:text-gray-400" href="#">Thriller</a>
<a class="hover:text-primary block text-sm text-gray-600 dark:text-gray-400" href="#">Vampire</a>
<a class="hover:text-primary block text-sm text-gray-600 dark:text-gray-400" href="#">War</a>
                        </div>
                    </div>
                    
                    <!-- Country Dropdown -->
                    <div class="relative group">
                        <button class="flex items-center space-x-1 hover:text-primary transition-colors focus:outline-none py-4">
                            <span>Country</span>
                            <span class="material-symbols-outlined text-sm">expand_more</span>
                        </button>
                        <div class="absolute top-full left-0 w-[600px] bg-white dark:bg-[#1A1D29] rounded-b-lg shadow-xl opacity-0 invisible group-hover:opacity-100 group-hover:visible transition-all duration-200 border-t-2 border-primary grid grid-cols-4 gap-4 p-6 z-50">
                            <a class="hover:text-primary block text-sm text-gray-600 dark:text-gray-400" href="#">Argentina</a>
<a class="hover:text-primary block text-sm text-gray-600 dark:text-gray-400" href="#">Australia</a>
<a class="hover:text-primary block text-sm text-gray-600 dark:text-gray-400" href="#">Austria</a>
<a class="hover:text-primary block text-sm text-gray-600 dark:text-gray-400" href="#">Belgium</a>
<a class="hover:text-primary block text-sm text-gray-600 dark:text-gray-400" href="#">Brazil</a>
<a class="hover:text-primary block text-sm text-gray-600 dark:text-gray-400" href="#">Canada</a>
<a class="hover:text-primary block text-sm text-gray-600 dark:text-gray-400" href="#">China</a>
<a class="hover:text-primary block text-sm text-gray-600 dark:text-gray-400" href="#">Colombia</a>
<a class="hover:text-primary block text-sm text-gray-600 dark:text-gray-400" href="#">Czech Republic</a>
<a class="hover:text-primary block text-sm text-gray-600 dark:text-gray-400" href="#">Denmark</a>
<a class="hover:text-primary block text-sm text-gray-600 dark:text-gray-400" href="#">Finland</a>
<a class="hover:text-primary block text-sm text-gray-600 dark:text-gray-400" href="#">France</a>
<a class="hover:text-primary block text-sm text-gray-600 dark:text-gray-400" href="#">Germany</a>
<a class="hover:text-primary block text-sm text-gray-600 dark:text-gray-400" href="#">Hong Kong</a>
<a class="hover:text-primary block text-sm text-gray-600 dark:text-gray-400" href="#">Hungary</a>
<a class="hover:text-primary block text-sm text-gray-600 dark:text-gray-400" href="#">India</a>
<a class="hover:text-primary block text-sm text-gray-600 dark:text-gray-400" href="#">Ireland</a>
<a class="hover:text-primary block text-sm text-gray-600 dark:text-gray-400" href="#">Israel</a>
<a class="hover:text-primary block text-sm text-gray-600 dark:text-gray-400" href="#">Italy</a>
<a class="hover:text-primary block text-sm text-gray-600 dark:text-gray-400" href="#">Japan</a>
<a class="hover:text-primary block text-sm text-gray-600 dark:text-gray-400" href="#">Luxembourg</a>
<a class="hover:text-primary block text-sm text-gray-600 dark:text-gray-400" href="#">Mexico</a>
<a class="hover:text-primary block text-sm text-gray-600 dark:text-gray-400" href="#">Netherlands</a>
<a class="hover:text-primary block text-sm text-gray-600 dark:text-gray-400" href="#">New Zealand</a>
<a class="hover:text-primary block text-sm text-gray-600 dark:text-gray-400" href="#">Nigeria</a>
<a class="hover:text-primary block text-sm text-gray-600 dark:text-gray-400" href="#">Norway</a>
<a class="hover:text-primary block text-sm text-gray-600 dark:text-gray-400" href="#">Philippines</a>
<a class="hover:text-primary block text-sm text-gray-600 dark:text-gray-400" href="#">Poland</a>
<a class="hover:text-primary block text-sm text-gray-600 dark:text-gray-400" href="#">Romania</a>
<a class="hover:text-primary block text-sm text-gray-600 dark:text-gray-400" href="#">Russia</a>
<a class="hover:text-primary block text-sm text-gray-600 dark:text-gray-400" href="#">South Africa</a>
<a class="hover:text-primary block text-sm text-gray-600 dark:text-gray-400" href="#">South Korea</a>
<a class="hover:text-primary block text-sm text-gray-600 dark:text-gray-400" href="#">Spain</a>
<a class="hover:text-primary block text-sm text-gray-600 dark:text-gray-400" href="#">Sweden</a>
<a class="hover:text-primary block text-sm text-gray-600 dark:text-gray-400" href="#">Switzerland</a>
<a class="hover:text-primary block text-sm text-gray-600 dark:text-gray-400" href="#">Taiwan</a>
<a class="hover:text-primary block text-sm text-gray-600 dark:text-gray-400" href="#">Thailand</a>
<a class="hover:text-primary block text-sm text-gray-600 dark:text-gray-400" href="#">Turkey</a>
<a class="hover:text-primary block text-sm text-gray-600 dark:text-gray-400" href="#">United Kingdom</a>
<a class="hover:text-primary block text-sm text-gray-600 dark:text-gray-400" href="#">United States</a>
                        </div>
                    </div>
                    
                    <a class="hover:text-primary transition-colors" href="#">Top IMDB</a>
                    <a class="hover:text-primary transition-colors" href="#">Updates</a>
                    <a class="hover:text-primary transition-colors" href="https://editor.wix.com/wixel-view/forms/7405900275916997729">Sent Request</a>
                </nav>
            </div>
            
            <div class="absolute left-1/2 transform -translate-x-1/2">
                <a class="block" href="/">
                    <img alt="Quravel Logo" class="h-8 md:h-10 object-contain" src="https://lh3.googleusercontent.com/aida-public/AB6AXuCqLjw2b3zIJYAUXSR-0wnqCCSiHxBpWopeX4YkK91UxQUQErP8E3fBTKHGPMn44svm6TkV73RcFl8uZYm6unBNmb_F5B0XAtvw-yAnSKJzR-DIoMzoWA519xKDUhoH8DE4biRu7joxNso-Ui3U1pLkiOaL02GPgdP6zHD6BmF10aMv5toxV6-cghRon9fHKmJihBEYz21Rmh4zx3Kz6pm1xk_o-fcYhwfAxeV0fx3eRLBxYIrLqzBBjdbVn1H1B5RVpSEDH9EgFZ4"/>
                </a>
            </div>
            
            <div class="flex items-center space-x-4 relative">
                <!-- Desktop Search -->
                <div class="relative hidden sm:block">
                    <input class="bg-gray-100 dark:bg-gray-800 text-sm rounded-full py-2 pl-4 pr-10 focus:outline-none focus:ring-2 focus:ring-primary w-48 transition-all dark:text-white border-none" 
                           placeholder="Search..." type="text" id="main-search"/>
                    <span class="material-symbols-outlined absolute right-3 top-2 text-gray-400 text-lg">search</span>
                    
                    <!-- Search Suggestions Dropdown -->
                    <div id="search-suggestions" class="absolute hidden w-full mt-2 bg-surface-dark rounded-lg shadow-2xl z-50 overflow-hidden border border-gray-700">
                        <div id="suggestions-list" class="max-h-96 overflow-y-auto"></div>
                        <a href="/search" id="view-all-btn" class="block w-full text-center p-3 bg-primary text-white font-bold hover:bg-opacity-90">
                            View All Results
                        </a>
                    </div>
                </div>
                <button class="sm:hidden text-gray-600 dark:text-gray-200" onclick="toggleMobileSearch()">
                    <span class="material-symbols-outlined">search</span>
                </button>
            </div>
        </div>
        
        <!-- Mobile Search Bar -->
        <div class="hidden sm:hidden bg-white dark:bg-[#0B0E19] border-b border-gray-200 dark:border-gray-800 p-3 absolute w-full top-16 left-0 z-30" id="mobile-search-bar">
            <div class="relative">
                <input class="w-full bg-gray-100 dark:bg-gray-800 text-sm rounded-full py-2 pl-4 pr-10 focus:outline-none focus:ring-2 focus:ring-primary dark:text-white border-none" 
                       placeholder="Search movies, shows..." type="text" id="mobile-search"/>
                <span class="material-symbols-outlined absolute right-3 top-2 text-gray-400 text-lg">search</span>

                <!-- Mobile Search Suggestions -->
                <div id="mobile-search-suggestions" class="absolute hidden w-full mt-2 bg-surface-dark rounded-lg shadow-2xl z-50 overflow-hidden border border-gray-700">
                    <div id="mobile-suggestions-list" class="max-h-80 overflow-y-auto"></div>
                    <a href="/search" id="mobile-view-all-btn" class="block w-full text-center p-3 bg-primary text-white font-bold hover:bg-opacity-90">
                        View All Results
                    </a>
                </div>
            </div>
        </div>
    </header>

    <main class="flex-grow pt-20 pb-12">
        <!-- Hero Carousel - SHOWS 10 POSTS -->
        <div class="container mx-auto px-4 mb-12 relative h-[700px] w-full rounded-2xl overflow-hidden" id="hero-carousel">
            <div class="flex h-full w-full transition-transform duration-500 ease-in-out" id="hero-track">
                {% set heroPosts = posts.posts | slice(0, 10) %}
                {% if heroPosts.length > 0 %}
                    {% for post in heroPosts %}
                    <div class="carousel-slide w-full h-full relative group">
                        <img alt="{{ post.title }}" class="w-full h-full object-cover" src="{{ post.banner or post.backdrop or post.poster }}" onerror="this.src='https://via.placeholder.com/1920x700?text=Quravel'"/>
                        <div class="absolute inset-0 bg-gradient-to-t from-black via-black/40 to-transparent"></div>
                        <div class="absolute inset-0 bg-gradient-to-r from-black/80 via-black/40 to-transparent"></div>
                        <div class="absolute bottom-0 left-0 p-8 md:p-12 w-full md:w-2/3">
                            <div class="flex items-center gap-2 text-xs md:text-sm text-gray-300 mb-2">
                                {% if post.genres and post.genres.length > 0 %}
                                <span class="text-primary font-semibold">{{ post.genres[0] }}</span>
                                {% for genre in post.genres.slice(1, 3) %}
                                <span>•</span>
                                <span>{{ genre }}</span>
                                {% endfor %}
                                {% endif %}
                            </div>
                            <h2 class="text-4xl md:text-5xl font-bold text-white mb-4 leading-tight">{{ post.title }}</h2>
                            <div class="flex items-center gap-3 text-xs md:text-sm text-white mb-4">
                                <span class="bg-yellow-500 text-black px-1.5 py-0.5 rounded font-bold text-[10px]">IMDb {{ post.rating or 'N/A' }}</span>
                                <span class="border border-white/30 px-1.5 py-0.5 rounded text-[10px]">HD</span>
                                {% if post.certification %}
                                <span class="border border-white/30 px-1.5 py-0.5 rounded text-[10px]">{{ post.certification }}</span>
                                {% endif %}
                                <span>{{ post.duration or 'N/A' }}</span>
                                <span>{{ post.year or 'N/A' }}</span>
                            </div>
                            <p class="text-gray-300 text-sm md:text-base line-clamp-3 mb-6 max-w-xl">
                                {{ post.description | truncate(200) or 'No description available.' }}
                            </p>
                            <div class="flex items-center gap-4">
                                <!-- FIXED: Correct flow: Homepage -> Post Details -->
                                <a href="/post/{{ post.title | slugify }}/" class="inline-block">
                                    <button class="bg-primary hover:bg-opacity-90 text-white font-semibold py-3 px-8 rounded-full flex items-center gap-2 transition-all shadow-lg shadow-primary/30 transform hover:-translate-y-0.5">
                                        Watch Now <span class="material-symbols-outlined">play_circle</span>
                                    </button>
                                </a>
                                <!-- Heart Icon with Dropdown -->
                                <div class="relative heart-container" data-post-id="{{ post.id or post.title | slugify }}">
                                    <button class="heart-icon w-12 h-12 rounded-full flex items-center justify-center transition-all hover:scale-105"
                                            onclick="toggleHeartDropdown('{{ post.id or post.title | slugify }}')">
                                        <span class="material-symbols-outlined text-white text-xl">favorite</span>
                                    </button>
                                    <div class="heart-dropdown absolute left-0 bottom-full mb-2 w-48 bg-surface-dark rounded-lg shadow-xl py-2 z-30 border border-gray-700 text-sm">
                                        <button class="block w-full text-left px-4 py-2 hover:bg-gray-800 text-gray-300 transition-colors"
                                                onclick="saveToWatchlist('{{ post.id or post.title | slugify }}', 'Planning to watch', '{{ post.title }}')">
                                            <span class="material-symbols-outlined align-middle mr-2 text-orange-500 text-base">schedule</span>
                                            Planning to watch
                                        </button>
                                        <button class="block w-full text-left px-4 py-2 hover:bg-gray-800 text-gray-300 transition-colors"
                                                onclick="saveToWatchlist('{{ post.id or post.title | slugify }}', 'Watching', '{{ post.title }}')">
                                            <span class="material-symbols-outlined align-middle mr-2 text-primary text-base">play_circle</span>
                                            Watching
                                        </button>
                                        <button class="block w-full text-left px-4 py-2 hover:bg-gray-800 text-gray-300 transition-colors"
                                                onclick="saveToWatchlist('{{ post.id or post.title | slugify }}', 'Completed', '{{ post.title }}')">
                                            <span class="material-symbols-outlined align-middle mr-2 text-green-500 text-base">check_circle</span>
                                            Completed
                                        </button>
                                        <div class="border-t border-gray-700 my-1"></div>
                                        <button class="block w-full text-left px-4 py-2 hover:bg-red-500/20 text-red-400 transition-colors"
                                                onclick="removeFromWatchlist('{{ post.id or post.title | slugify }}')">
                                            <span class="material-symbols-outlined align-middle mr-2 text-base">delete</span>
                                            Remove
                                        </button>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div class="absolute right-12 top-1/2 -translate-y-1/2 w-48 hidden lg:block shadow-2xl rounded-lg overflow-hidden border border-white/10">
                            <img alt="{{ post.title }} Poster" class="w-full h-full object-cover" src="{{ post.poster }}" onerror="this.src='https://via.placeholder.com/200x300?text=Poster'"/>
                            <div class="absolute bottom-0 left-0 right-0 bg-black/60 backdrop-blur-sm p-2 text-center">
                                <span class="text-white text-xs font-bold font-mono tracking-widest uppercase">{{ post.title | truncate(15) }}</span>
                            </div>
                        </div>
                    </div>
                    {% endfor %}
                {% else %}
                    <!-- Fallback if no posts -->
                    <div class="carousel-slide w-full h-full relative group">
                        <img alt="Default Hero" class="w-full h-full object-cover" src="https://image.tmdb.org/t/p/original/gqTz24ZRsCP6AKjARmEivY7m0cK.jpg"/>
                        <div class="absolute inset-0 bg-gradient-to-t from-black via-black/40 to-transparent"></div>
                        <div class="absolute inset-0 bg-gradient-to-r from-black/80 via-black/40 to-transparent"></div>
                        <div class="absolute bottom-0 left-0 p-8 md:p-12 w-full md:w-2/3">
                            <div class="flex items-center gap-2 text-xs md:text-sm text-gray-300 mb-2">
                                <span class="text-primary font-semibold">Action</span>
                                <span>•</span>
                                <span>Adventure</span>
                                <span>•</span>
                                <span>Fantasy</span>
                            </div>
                            <h2 class="text-4xl md:text-5xl font-bold text-white mb-4 leading-tight">Welcome to Quravel</h2>
                            <p class="text-gray-300 text-sm md:text-base line-clamp-3 mb-6 max-w-xl">
                                Discover the best movies, TV shows, and anime all in one place. Stream for free in HD quality.
                            </p>
                            <div class="flex items-center gap-4">
                                <button class="bg-primary hover:bg-opacity-90 text-white font-semibold py-3 px-8 rounded-full flex items-center gap-2 transition-all shadow-lg shadow-primary/30 transform hover:-translate-y-0.5">
                                    Start Exploring <span class="material-symbols-outlined">play_circle</span>
                                </button>
                            </div>
                        </div>
                    </div>
                {% endif %}
            </div>
            <div class="absolute bottom-8 right-8 flex items-center gap-4 z-30">
                <span class="text-white font-mono text-sm"><span id="current-slide-display">1</span> <span class="text-gray-500">/ {{ heroPosts.length or 1 }}</span></span>
                <div class="flex gap-2">
                    <button class="bg-white/10 hover:bg-white/20 backdrop-blur-md p-2 rounded text-white transition-colors border border-white/10" onclick="changeSlide(-1)">
                        <span class="material-symbols-outlined text-sm">arrow_back</span>
                    </button>
                    <button class="bg-white/10 hover:bg-white/20 backdrop-blur-md p-2 rounded text-white transition-colors border border-white/10" onclick="changeSlide(1)">
                        <span class="material-symbols-outlined text-sm">arrow_forward</span>
                    </button>
                </div>
            </div>
        </div>

        <!-- Top Airing Section -->
        <section class="container mx-auto px-4 mb-12">
            <div class="flex justify-between items-end mb-6 border-b border-gray-200 dark:border-gray-800 pb-2">
                <h2 class="text-xl md:text-2xl font-bold text-gray-900 dark:text-white border-l-4 border-primary pl-4">Top Airing</h2>
                <div class="flex items-center gap-4">
                    <div class="hidden md:flex gap-2">
                        <button class="bg-gray-200 dark:bg-gray-800 p-1 rounded-full hover:text-primary transition-colors" onclick="scrollSection('top-airing-scroll', -500)">
                            <span class="material-symbols-outlined">chevron_left</span>
                        </button>
                        <button class="bg-gray-200 dark:bg-gray-800 p-1 rounded-full hover:text-primary transition-colors" onclick="scrollSection('top-airing-scroll', 500)">
                            <span class="material-symbols-outlined">chevron_right</span>
                        </button>
                    </div>
                    <a class="text-sm text-gray-500 dark:text-gray-400 hover:text-primary flex items-center gap-1 transition-colors group" href="#">
                        View all <span class="material-symbols-outlined text-base transform group-hover:translate-x-1 transition-transform">arrow_forward</span>
                    </a>
                </div>
            </div>
            <div class="flex overflow-x-auto gap-4 pb-4 hide-scrollbar scroll-smooth" id="top-airing-scroll">
                {% set topAiring = posts.posts | sortByRating | slice(0, 12) %}
                {% if topAiring.length > 0 %}
                    {% for post in topAiring %}
                    <a href="/post/{{ post.title | slugify }}/" class="flex-shrink-0 w-40 sm:w-48 group snap-start bg-white dark:bg-surface-dark rounded-xl overflow-hidden shadow-sm hover:shadow-xl transition-all duration-300">
                        <div class="aspect-[2/3] relative overflow-hidden">
                            <img src="{{ post.poster }}" alt="{{ post.title }}" class="w-full h-full object-cover transition-transform duration-500 group-hover:scale-110" onerror="this.src='https://via.placeholder.com/200x300?text=Poster'">
                            <div class="absolute top-2 right-2 bg-primary/90 text-white text-[10px] font-bold px-2 py-0.5 rounded backdrop-blur-sm">HD</div>
                            <div class="absolute bottom-2 left-2 bg-black/60 text-white text-[10px] font-bold px-2 py-0.5 rounded backdrop-blur-sm flex items-center gap-1">
                                <span class="material-symbols-outlined text-[10px]">star</span> {{ post.rating or 'N/A' }}
                            </div>
                            <div class="absolute inset-0 bg-black/20 group-hover:bg-black/40 transition-colors flex items-center justify-center opacity-0 group-hover:opacity-100">
                                <div class="bg-primary text-white rounded-full p-3 shadow-lg transform scale-0 group-hover:scale-100 transition-transform duration-300">
                                    <span class="material-symbols-outlined text-2xl">play_arrow</span>
                                </div>
                            </div>
                        </div>
                        <div class="p-4">
                            <h3 class="font-semibold text-gray-900 dark:text-white line-clamp-1 group-hover:text-primary transition-colors mb-2">{{ post.title }}</h3>
                            <div class="flex justify-between items-center text-xs text-gray-500 dark:text-gray-400">
                                <span>{{ post.year or 'N/A' }}</span>
                                <span class="truncate max-w-[80px]">{{ post.type | capitalize or 'Movie' }}</span>
                                <span>{{ post.duration or 'N/A' }}</span>
                            </div>
                        </div>
                    </a>
                    {% endfor %}
                {% else %}
                    <div class="w-full text-center py-12 text-gray-500">
                        No top airing content available
                    </div>
                {% endif %}
            </div>
        </section>

        <!-- Latest Movies Section -->
        <section class="container mx-auto px-4 mb-12">
            <div class="flex justify-between items-end mb-6 border-b border-gray-200 dark:border-gray-800 pb-2">
                <h2 class="text-xl md:text-2xl font-bold text-gray-900 dark:text-white border-l-4 border-primary pl-4">Latest Movies</h2>
                <div class="flex items-center gap-4">
                    <div class="hidden md:flex gap-2">
                        <button class="bg-gray-200 dark:bg-gray-800 p-1 rounded-full hover:text-primary transition-colors" onclick="scrollSection('latest-movies-scroll', -500)">
                            <span class="material-symbols-outlined">chevron_left</span>
                        </button>
                        <button class="bg-gray-200 dark:bg-gray-800 p-1 rounded-full hover:text-primary transition-colors" onclick="scrollSection('latest-movies-scroll', 500)">
                            <span class="material-symbols-outlined">chevron_right</span>
                        </button>
                    </div>
                    <a class="text-sm text-gray-500 dark:text-gray-400 hover:text-primary flex items-center gap-1 transition-colors group" href="#">
                        View all <span class="material-symbols-outlined text-base transform group-hover:translate-x-1 transition-transform">arrow_forward</span>
                    </a>
                </div>
            </div>
            <div class="flex overflow-x-auto gap-4 pb-4 hide-scrollbar scroll-smooth" id="latest-movies-scroll">
                {% set latestMovies = posts.posts | filterByType("movie") | sortLatest | slice(0, 15) %}
                {% if latestMovies.length > 0 %}
                    {% for post in latestMovies %}
                    <a href="/post/{{ post.title | slugify }}/" class="flex-shrink-0 w-40 sm:w-48 group snap-start bg-white dark:bg-surface-dark rounded-xl overflow-hidden shadow-sm hover:shadow-xl transition-all duration-300">
                        <div class="aspect-[2/3] relative overflow-hidden">
                            <img src="{{ post.poster }}" alt="{{ post.title }}" class="w-full h-full object-cover transition-transform duration-500 group-hover:scale-110" onerror="this.src='https://via.placeholder.com/200x300?text=Poster'">
                            <div class="absolute top-2 right-2 bg-primary/90 text-white text-[10px] font-bold px-2 py-0.5 rounded backdrop-blur-sm">HD</div>
                            <div class="absolute inset-0 bg-black/20 group-hover:bg-black/40 transition-colors flex items-center justify-center opacity-0 group-hover:opacity-100">
                                <div class="bg-primary text-white rounded-full p-3 shadow-lg transform scale-0 group-hover:scale-100 transition-transform duration-300">
                                    <span class="material-symbols-outlined text-2xl">play_arrow</span>
                                </div>
                            </div>
                        </div>
                        <div class="p-4">
                            <h3 class="font-semibold text-gray-900 dark:text-white line-clamp-1 group-hover:text-primary transition-colors mb-2">{{ post.title }}</h3>
                            <div class="flex justify-between items-center text-xs text-gray-500 dark:text-gray-400">
                                <span>{{ post.year or 'N/A' }}</span>
                                <span class="truncate">Movie</span>
                                <span>{{ post.duration or 'N/A' }}</span>
                            </div>
                        </div>
                    </a>
                    {% endfor %}
                {% else %}
                    <div class="w-full text-center py-12 text-gray-500">
                        No movies available
                    </div>
                {% endif %}
            </div>
        </section>

        <!-- Latest TV Shows Section -->
        <section class="container mx-auto px-4 mb-12">
            <div class="flex justify-between items-end mb-6 border-b border-gray-200 dark:border-gray-800 pb-2">
                <h2 class="text-xl md:text-2xl font-bold text-gray-900 dark:text-white border-l-4 border-primary pl-4">Latest TV Shows</h2>
                <div class="flex items-center gap-4">
                    <div class="hidden md:flex gap-2">
                        <button class="bg-gray-200 dark:bg-gray-800 p-1 rounded-full hover:text-primary transition-colors" onclick="scrollSection('tv-shows-scroll', -500)">
                            <span class="material-symbols-outlined">chevron_left</span>
                        </button>
                        <button class="bg-gray-200 dark:bg-gray-800 p-1 rounded-full hover:text-primary transition-colors" onclick="scrollSection('tv-shows-scroll', 500)">
                            <span class="material-symbols-outlined">chevron_right</span>
                        </button>
                    </div>
                    <a class="text-sm text-gray-500 dark:text-gray-400 hover:text-primary flex items-center gap-1 transition-colors group" href="#">
                        View all <span class="material-symbols-outlined text-base transform group-hover:translate-x-1 transition-transform">arrow_forward</span>
                    </a>
                </div>
            </div>
            <div class="flex overflow-x-auto gap-4 pb-4 hide-scrollbar scroll-smooth" id="tv-shows-scroll">
                {% set tvShows = posts.posts | filterByType("tv-show") | sortLatest | slice(0, 12) %}
                {% if tvShows.length > 0 %}
                    {% for post in tvShows %}
                    <a href="/post/{{ post.title | slugify }}/" class="flex-shrink-0 w-40 sm:w-48 group snap-start bg-white dark:bg-surface-dark rounded-xl overflow-hidden shadow-sm hover:shadow-xl transition-all duration-300">
                        <div class="aspect-[2/3] relative overflow-hidden">
                            <img src="{{ post.poster }}" alt="{{ post.title }}" class="w-full h-full object-cover transition-transform duration-500 group-hover:scale-110" onerror="this.src='https://via.placeholder.com/200x300?text=Poster'">
                            <div class="absolute top-2 right-2 bg-primary/90 text-white text-[10px] font-bold px-2 py-0.5 rounded backdrop-blur-sm">HD</div>
                            <div class="absolute bottom-2 left-2 bg-black/60 text-white text-[10px] font-bold px-2 py-0.5 rounded backdrop-blur-sm flex items-center gap-1">
                                {% if post.episodes %}Eps {{ post.episodes }}{% else %}{{ post.totalEpisodes or 'Ongoing' }}{% endif %}
                            </div>
                            <div class="absolute inset-0 bg-black/20 group-hover:bg-black/40 transition-colors flex items-center justify-center opacity-0 group-hover:opacity-100">
                                <div class="bg-primary text-white rounded-full p-3 shadow-lg transform scale-0 group-hover:scale-100 transition-transform duration-300">
                                    <span class="material-symbols-outlined text-2xl">play_arrow</span>
                                </div>
                            </div>
                        </div>
                        <div class="p-4">
                            <h3 class="font-semibold text-gray-900 dark:text-white line-clamp-1 group-hover:text-primary transition-colors mb-2">{{ post.title }}</h3>
                            <div class="flex justify-between items-center text-xs text-gray-500 dark:text-gray-400">
                                <span>{{ post.year or 'N/A' }}</span>
                                <span class="truncate max-w-[80px]">TV Show</span>
                                <span>SS {{ post.seasons or 1 }}</span>
                            </div>
                        </div>
                    </a>
                    {% endfor %}
                {% else %}
                    <div class="w-full text-center py-12 text-gray-500">
                        No TV shows available
                    </div>
                {% endif %}
            </div>
        </section>

        <!-- Latest Anime Section -->
        <section class="container mx-auto px-4 mb-12">
            <div class="flex justify-between items-end mb-6 border-b border-gray-200 dark:border-gray-800 pb-2">
                <h2 class="text-xl md:text-2xl font-bold text-gray-900 dark:text-white border-l-4 border-primary pl-4">Latest Anime</h2>
                <div class="flex items-center gap-4">
                    <div class="hidden md:flex gap-2">
                        <button class="bg-gray-200 dark:bg-gray-800 p-1 rounded-full hover:text-primary transition-colors" onclick="scrollSection('anime-scroll', -500)">
                            <span class="material-symbols-outlined">chevron_left</span>
                        </button>
                        <button class="bg-gray-200 dark:bg-gray-800 p-1 rounded-full hover:text-primary transition-colors" onclick="scrollSection('anime-scroll', 500)">
                            <span class="material-symbols-outlined">chevron_right</span>
                        </button>
                    </div>
                    <a class="text-sm text-gray-500 dark:text-gray-400 hover:text-primary flex items-center gap-1 transition-colors group" href="#">
                        View all <span class="material-symbols-outlined text-base transform group-hover:translate-x-1 transition-transform">arrow_forward</span>
                    </a>
                </div>
            </div>
            <div class="flex overflow-x-auto gap-4 pb-4 hide-scrollbar scroll-smooth" id="anime-scroll">
                {% set anime = posts.posts | filterByType("anime") | sortLatest | slice(0, 12) %}
                {% if anime.length > 0 %}
                    {% for post in anime %}
                    <a href="/post/{{ post.title | slugify }}/" class="flex-shrink-0 w-40 sm:w-48 group snap-start bg-white dark:bg-surface-dark rounded-xl overflow-hidden shadow-sm hover:shadow-xl transition-all duration-300">
                        <div class="aspect-[2/3] relative overflow-hidden">
                            <img src="{{ post.poster }}" alt="{{ post.title }}" class="w-full h-full object-cover transition-transform duration-500 group-hover:scale-110" onerror="this.src='https://via.placeholder.com/200x300?text=Poster'">
                            <div class="absolute top-2 right-2 bg-primary/90 text-white text-[10px] font-bold px-2 py-0.5 rounded backdrop-blur-sm">HD</div>
                            <div class="absolute bottom-2 left-2 bg-black/60 text-white text-[10px] font-bold px-2 py-0.5 rounded backdrop-blur-sm flex items-center gap-1">
                                {% if post.episodes %}Eps {{ post.episodes }}{% else %}{{ post.totalEpisodes or 'Ongoing' }}{% endif %}
                            </div>
                            <div class="absolute inset-0 bg-black/20 group-hover:bg-black/40 transition-colors flex items-center justify-center opacity-0 group-hover:opacity-100">
                                <div class="bg-primary text-white rounded-full p-3 shadow-lg transform scale-0 group-hover:scale-100 transition-transform duration-300">
                                    <span class="material-symbols-outlined text-2xl">play_arrow</span>
                                </div>
                            </div>
                        </div>
                        <div class="p-4">
                            <h3 class="font-semibold text-gray-900 dark:text-white line-clamp-1 group-hover:text-primary transition-colors mb-2">{{ post.title }}</h3>
                            <div class="flex justify-between items-center text-xs text-gray-500 dark:text-gray-400">
                                <span>{{ post.year or 'N/A' }}</span>
                                <span class="truncate max-w-[80px]">Anime</span>
                                <span>{% if post.seasons %}SS {{ post.seasons }}{% else %}Ongoing{% endif %}</span>
                            </div>
                        </div>
                    </a>
                    {% endfor %}
                {% else %}
                    <div class="w-full text-center py-12 text-gray-500">
                        No anime available
                    </div>
                {% endif %}
            </div>
        </section>

        <!-- Recommended Section -->
        <section class="container mx-auto px-4 mb-12">
            <div class="flex justify-between items-end mb-6 border-b border-gray-200 dark:border-gray-800 pb-2">
                <h2 class="text-xl md:text-2xl font-bold text-gray-900 dark:text-white border-l-4 border-primary pl-4">Recommended</h2>
                <div class="flex items-center gap-4">
                    <div class="hidden md:flex gap-2">
                        <button class="bg-gray-200 dark:bg-gray-800 p-1 rounded-full hover:text-primary transition-colors" onclick="scrollSection('recommended-scroll', -500)">
                            <span class="material-symbols-outlined">chevron_left</span>
                        </button>
                        <button class="bg-gray-200 dark:bg-gray-800 p-1 rounded-full hover:text-primary transition-colors" onclick="scrollSection('recommended-scroll', 500)">
                            <span class="material-symbols-outlined">chevron_right</span>
                        </button>
                    </div>
                    <a class="text-sm text-gray-500 dark:text-gray-400 hover:text-primary flex items-center gap-1 transition-colors group" href="#">
                        View all <span class="material-symbols-outlined text-base transform group-hover:translate-x-1 transition-transform">arrow_forward</span>
                    </a>
                </div>
            </div>
            <div class="flex overflow-x-auto gap-4 pb-4 hide-scrollbar scroll-smooth" id="recommended-scroll">
                {% set recommended = posts.posts | shuffle | slice(0, 12) %}
                {% if recommended.length > 0 %}
                    {% for post in recommended %}
                    <a href="/post/{{ post.title | slugify }}/" class="flex-shrink-0 w-40 sm:w-48 group snap-start bg-white dark:bg-surface-dark rounded-xl overflow-hidden shadow-sm hover:shadow-xl transition-all duration-300">
                        <div class="aspect-[2/3] relative overflow-hidden">
                            <img src="{{ post.poster }}" alt="{{ post.title }}" class="w-full h-full object-cover transition-transform duration-500 group-hover:scale-110" onerror="this.src='https://via.placeholder.com/200x300?text=Poster'">
                            <div class="absolute top-2 right-2 bg-primary/90 text-white text-[10px] font-bold px-2 py-0.5 rounded backdrop-blur-sm">HD</div>
                            <div class="absolute bottom-2 left-2 bg-black/60 text-white text-[10px] font-bold px-2 py-0.5 rounded backdrop-blur-sm flex items-center gap-1">
                                <span class="material-symbols-outlined text-[10px]">star</span> {{ post.rating or 'N/A' }}
                            </div>
                            <div class="absolute inset-0 bg-black/20 group-hover:bg-black/40 transition-colors flex items-center justify-center opacity-0 group-hover:opacity-100">
                                <div class="bg-primary text-white rounded-full p-3 shadow-lg transform scale-0 group-hover:scale-100 transition-transform duration-300">
                                    <span class="material-symbols-outlined text-2xl">play_arrow</span>
                                </div>
                            </div>
                        </div>
                        <div class="p-4">
                            <h3 class="font-semibold text-gray-900 dark:text-white line-clamp-1 group-hover:text-primary transition-colors mb-2">{{ post.title }}</h3>
                            <div class="flex justify-between items-center text-xs text-gray-500 dark:text-gray-400">
                                <span>{{ post.year or 'N/A' }}</span>
                                <span class="truncate max-w-[80px]">{{ post.type | capitalize or 'Movie' }}</span>
                                <span>{{ post.duration or 'N/A' }}</span>
                            </div>
                        </div>
                    </a>
                    {% endfor %}
                {% else %}
                    <div class="w-full text-center py-12 text-gray-500">
                        No recommendations available
                    </div>
                {% endif %}
            </div>
        </section>
    </main>

    <footer class="bg-white dark:bg-footer-dark border-t border-gray-200 dark:border-gray-800 mt-auto">
        <div class="container mx-auto px-4 py-8 md:py-12">
            <div class="flex flex-col md:flex-row justify-between items-start md:items-center gap-6">
                <div class="flex-1 max-w-2xl">
                    <img alt="Quravel Logo" class="h-8 mb-4" src="https://cdn.imgchest.com/files/24d391d36c86.png"/>
                    <p class="text-sm text-gray-600 dark:text-gray-400 mb-6 leading-relaxed">
                        Quravel offers free, ad-free access to top movies and series in stunning quality. Stream effortlessly or save for later with easy downloads, perfect for movie lovers on the go!
                    </p>
                    <p class="text-xs text-gray-500 dark:text-gray-500">
                        This site does not store any files on our server, we only linked to the media which is hosted on 3rd party services.
                        <br/>
                        watch free movies, watch free tv shows, free animes online
                    </p>
                </div>
                <div class="flex flex-col items-center md:items-end gap-2 w-full md:w-auto">
                    <div class="flex gap-4 text-sm font-semibold text-gray-700 dark:text-gray-300">
                        <a class="hover:text-primary transition-colors" href="https://editor.wix.com/wixel-view/forms/7405879446906864641">REQUEST</a>
                        <a class="hover:text-primary transition-colors" href="https://editor.wix.com/wixel-view/forms/7405900275916997729">CONTACT</a>
                    </div>
                    <div class="text-xs text-gray-500 dark:text-gray-500 mt-2 text-center md:text-right w-full">
                        <span class="text-primary font-bold">Quravel</span>
                        <br/>
                        @ 2025 Quravel
                    </div>
                </div>
            </div>
        </div>
    </footer>
    
    <script>
    // Mobile Menu Toggle
    function toggleMobileMenu() {
        const menu = document.getElementById('mobile-menu');
        const overlay = document.getElementById('mobile-menu-overlay');
        menu.classList.toggle('menu-open');
        overlay.classList.toggle('hidden');
    }
    
    // Mobile Search Toggle
    function toggleMobileSearch() {
        const searchBar = document.getElementById('mobile-search-bar');
        searchBar.classList.toggle('hidden');
    }
    
    // Mobile Dropdown Accordion
    function toggleMobileDropdown(id) {
        const dropdown = document.getElementById(id);
        dropdown.classList.toggle('hidden');
        const arrowId = id === 'genre-mobile' ? 'genre-arrow' : 'country-arrow';
        const arrow = document.getElementById(arrowId);
        if (dropdown.classList.contains('hidden')) {
            arrow.style.transform = 'rotate(0deg)';
        } else {
            arrow.style.transform = 'rotate(180deg)';
        }
    }
    
    // Hero Carousel Logic
    let currentSlide = 0;
    const heroTrack = document.getElementById('hero-track');
    const slides = document.querySelectorAll('.carousel-slide');
    
    function changeSlide(direction) {
        const totalSlides = slides.length;
        if (totalSlides === 0) return;
        
        currentSlide = (currentSlide + direction + totalSlides) % totalSlides;
        heroTrack.style.transform = `translateX(-${currentSlide * 100}%)`;
        
        const slideCounterDisplay = document.getElementById('current-slide-display');
        if(slideCounterDisplay) slideCounterDisplay.innerText = currentSlide + 1;
    }
    
    // Auto-advance slideshow every 5 seconds
    let slideInterval = setInterval(() => {
        changeSlide(1);
    }, 5000);
    
    // Pause auto-slide on hover
    heroTrack.addEventListener('mouseenter', () => clearInterval(slideInterval));
    heroTrack.addEventListener('mouseleave', () => {
        slideInterval = setInterval(() => changeSlide(1), 5000);
    });
    
    // Section scrolling
    function scrollSection(sectionId, amount) {
        const section = document.getElementById(sectionId);
        if (section) {
            section.scrollLeft += amount;
        }
    }
    
    // HEART ICON FUNCTIONALITY
    function toggleHeartDropdown(postId) {
        const container = document.querySelector(`.heart-container[data-post-id="${postId}"]`);
        if (!container) return;
        
        const dropdown = container.querySelector('.heart-dropdown');
        const isActive = dropdown.classList.contains('active');
        
        // Close all other dropdowns
        document.querySelectorAll('.heart-dropdown.active').forEach(d => {
            d.classList.remove('active');
        });
        
        // Toggle current dropdown
        if (!isActive) {
            dropdown.classList.add('active');
            
            // Close dropdown when clicking outside
            setTimeout(() => {
                const clickHandler = (e) => {
                    if (!container.contains(e.target)) {
                        dropdown.classList.remove('active');
                        document.removeEventListener('click', clickHandler);
                    }
                };
                document.addEventListener('click', clickHandler);
            }, 10);
        }
    }
    
    function saveToWatchlist(postId, status, postTitle) {
        // Save to localStorage
        const watchlist = JSON.parse(localStorage.getItem('quravel_watchlist') || '{}');
        watchlist[postId] = {
            status: status,
            title: postTitle,
            addedAt: new Date().toISOString()
        };
        localStorage.setItem('quravel_watchlist', JSON.stringify(watchlist));
        
        // Update heart icon appearance
        const heartIcon = document.querySelector(`.heart-container[data-post-id="${postId}"] .heart-icon`);
        if (heartIcon) {
            // Remove all status classes
            heartIcon.classList.remove('active', 'watching', 'completed', 'planning');
            
            // Add appropriate class
            if (status === 'Planning to watch') {
                heartIcon.classList.add('planning');
                heartIcon.querySelector('span').textContent = 'schedule';
                heartIcon.querySelector('span').style.color = '#f97316';
            } else if (status === 'Watching') {
                heartIcon.classList.add('watching');
                heartIcon.querySelector('span').textContent = 'play_circle';
                heartIcon.querySelector('span').style.color = '#498BBB';
            } else if (status === 'Completed') {
                heartIcon.classList.add('completed');
                heartIcon.querySelector('span').textContent = 'check_circle';
                heartIcon.querySelector('span').style.color = '#22c55e';
            }
            
            // Show feedback
            const originalText = heartIcon.querySelector('span').textContent;
            const originalColor = heartIcon.querySelector('span').style.color;
            heartIcon.querySelector('span').textContent = 'check';
            heartIcon.querySelector('span').style.color = '#10b981';
            
            setTimeout(() => {
                heartIcon.querySelector('span').textContent = originalText;
                heartIcon.querySelector('span').style.color = originalColor;
            }, 1000);
        }
        
        // Close dropdown
        const dropdown = document.querySelector(`.heart-container[data-post-id="${postId}"] .heart-dropdown`);
        if (dropdown) {
            dropdown.classList.remove('active');
        }
        
        console.log(`Saved ${postTitle} as: ${status}`);
        showNotification(`Added "${postTitle}" to ${status}`);
    }
    
    function removeFromWatchlist(postId) {
        const watchlist = JSON.parse(localStorage.getItem('quravel_watchlist') || '{}');
        const postTitle = watchlist[postId]?.title || 'This item';
        
        delete watchlist[postId];
        localStorage.setItem('quravel_watchlist', JSON.stringify(watchlist));
        
        // Reset heart icon
        const heartIcon = document.querySelector(`.heart-container[data-post-id="${postId}"] .heart-icon`);
        if (heartIcon) {
            heartIcon.classList.remove('active', 'watching', 'completed', 'planning');
            heartIcon.querySelector('span').textContent = 'favorite';
            heartIcon.querySelector('span').style.color = '#ffffff';
        }
        
        // Close dropdown
        const dropdown = document.querySelector(`.heart-container[data-post-id="${postId}"] .heart-dropdown`);
        if (dropdown) {
            dropdown.classList.remove('active');
        }
        
        console.log(`Removed ${postId} from watchlist`);
        showNotification(`Removed "${postTitle}" from your list`);
    }
    
    function showNotification(message) {
        // Create notification element
        const notification = document.createElement('div');
        notification.className = 'fixed top-24 right-4 bg-surface-dark text-white px-4 py-3 rounded-lg shadow-lg z-50 transform translate-x-full transition-transform duration-300';
        notification.innerHTML = `
            <div class="flex items-center gap-2">
                <span class="material-symbols-outlined text-green-500">check_circle</span>
                <span>${message}</span>
            </div>
        `;
        
        document.body.appendChild(notification);
        
        // Animate in
        setTimeout(() => {
            notification.style.transform = 'translateX(0)';
        }, 10);
        
        // Remove after 3 seconds
        setTimeout(() => {
            notification.style.transform = 'translateX(100%)';
            setTimeout(() => {
                document.body.removeChild(notification);
            }, 300);
        }, 3000);
    }
    
    // Initialize heart icons on page load
    document.addEventListener('DOMContentLoaded', () => {
        // Load watchlist from localStorage
        const watchlist = JSON.parse(localStorage.getItem('quravel_watchlist') || '{}');
        
        // Update heart icons based on saved status
        document.querySelectorAll('.heart-container').forEach(container => {
            const postId = container.getAttribute('data-post-id');
            const savedStatus = watchlist[postId];
            
            if (savedStatus) {
                const heartIcon = container.querySelector('.heart-icon');
                heartIcon.classList.remove('active', 'watching', 'completed', 'planning');
                
                if (savedStatus.status === 'Planning to watch') {
                    heartIcon.classList.add('planning');
                    heartIcon.querySelector('span').textContent = 'schedule';
                    heartIcon.querySelector('span').style.color = '#f97316';
                } else if (savedStatus.status === 'Watching') {
                    heartIcon.classList.add('watching');
                    heartIcon.querySelector('span').textContent = 'play_circle';
                    heartIcon.querySelector('span').style.color = '#498BBB';
                } else if (savedStatus.status === 'Completed') {
                    heartIcon.classList.add('completed');
                    heartIcon.querySelector('span').textContent = 'check_circle';
                    heartIcon.querySelector('span').style.color = '#22c55e';
                }
            }
        });
    });
    
    // Search functionality
    let searchData = [];
    
    // Load search data from posts
    document.addEventListener('DOMContentLoaded', () => {
        // Fetch search data from JSON endpoint
        fetch('/search-data.json')
            .then(response => response.json())
            .then(data => {
                searchData = data.posts || data || [];
                console.log(`Loaded ${searchData.length} items for search`);
                setupSearch();
            })
            .catch(error => {
                console.error('Error loading search data:', error);
                // Fallback to inline data
                const posts = {% if posts %}{{ posts | dump | safe }}{% else %}[]{% endif %};
                let postsArray = [];
                if (Array.isArray(posts)) {
                    postsArray = posts;
                } else if (posts && posts.posts && Array.isArray(posts.posts)) {
                    postsArray = posts.posts;
                } else if (posts && Array.isArray(posts)) {
                    postsArray = posts;
                }
                
                searchData = postsArray.map(post => ({
                    id: post.id || post.title?.replace(/\s+/g, '-').toLowerCase() || 'no-id',
                    title: post.title || 'Untitled',
                    type: post.type || 'movie',
                    year: post.year || '2023',
                    rating: post.rating || 'N/A',
                    duration: post.duration || 'N/A',
                    genres: post.genres || [],
                    poster: post.poster || 'https://via.placeholder.com/48x64?text=No+Image',
                    slug: post.title ? post.title.toLowerCase().replace(/\s+/g, '-').replace(/[^\w-]+/g, '') : 'untitled'
                }));
                console.log(`Loaded ${searchData.length} items for search (fallback)`);
                setupSearch();
            });
        
        function setupSearch() {
            // Setup search for desktop
            const desktopSearch = document.getElementById('main-search');
            const desktopSuggestions = document.getElementById('search-suggestions');
            const desktopList = document.getElementById('suggestions-list');
            
            if(desktopSearch) {
                desktopSearch.addEventListener('input', (e) => handleSearchInput(e, desktopList, desktopSuggestions, 'desktop'));
                desktopSearch.addEventListener('focus', () => {
                    if(desktopSearch.value.length >= 2) {
                        desktopSuggestions.classList.remove('hidden');
                    }
                });
            }
            
            // Setup search for mobile
            const mobileSearch = document.getElementById('mobile-search');
            const mobileSuggestions = document.getElementById('mobile-search-suggestions');
            const mobileList = document.getElementById('mobile-suggestions-list');
            
            if(mobileSearch) {
                mobileSearch.addEventListener('input', (e) => handleSearchInput(e, mobileList, mobileSuggestions, 'mobile'));
                mobileSearch.addEventListener('focus', () => {
                    if(mobileSearch.value.length >= 2) {
                        mobileSuggestions.classList.remove('hidden');
                    }
                });
            }
            
            // Close suggestions when clicking outside
            document.addEventListener('click', (e) => {
                if(desktopSearch && !desktopSearch.contains(e.target) && desktopSuggestions && !desktopSuggestions.contains(e.target)) {
                    desktopSuggestions.classList.add('hidden');
                }
                if(mobileSearch && !mobileSearch.contains(e.target) && mobileSuggestions && !mobileSuggestions.contains(e.target)) {
                    mobileSuggestions.classList.add('hidden');
                }
            });
        }
        
        function handleSearchInput(e, listElement, suggestionsElement, type) {
            const val = e.target.value.trim();
            
            if (val.length < 2) {
                suggestionsElement.classList.add('hidden');
                return;
            }

            // Update the "View All Results" button URL
            const viewAllBtn = type === 'desktop' 
                ? document.getElementById('view-all-btn') 
                : document.getElementById('mobile-view-all-btn');
            
            if (viewAllBtn) {
                viewAllBtn.href = `/search/?q=${encodeURIComponent(val)}`;
            }

            const searchVal = val.toLowerCase();
            const results = searchData.filter(m => {
                if (!m || !m.title) return false;
                return m.title.toLowerCase().includes(searchVal) || 
                       (m.genres && m.genres.some(g => g && g.toLowerCase().includes(searchVal)));
            }).slice(0, 8);
            
            if(results.length === 0) {
                listElement.innerHTML = `
                    <div class="p-4 text-center text-gray-400">
                        No results found for "${val}"
                    </div>
                `;
                suggestionsElement.classList.remove('hidden');
                return;
            }
            
            listElement.innerHTML = results.map(m => {
                const slug = m.slug || m.title.toLowerCase().replace(/\s+/g, '-').replace(/[^\w-]+/g, '');
                // FIXED: Correct flow: Search -> Post Details
                const url = `/post/${slug}/`;
                
                return `
                <a href="${url}" class="flex items-center p-3 hover:bg-gray-800 cursor-pointer border-b border-gray-700 transition-colors">
                    <img src="${m.poster}" class="w-12 h-16 object-cover rounded mr-4" alt="${m.title}" onerror="this.src='https://via.placeholder.com/48x64?text=No+Image'">
                    <div class="flex-1 min-w-0">
                        <div class="font-semibold text-white truncate">${m.title}</div>
                        <div class="text-xs text-gray-400 mt-1">
                            ${m.type ? m.type.toUpperCase() : 'MOVIE'} • 
                            ${m.genres ? m.genres.slice(0, 2).join(', ') : 'N/A'} • 
                            ${m.year || 'N/A'} • 
                            ${m.duration || 'N/A'}
                        </div>
                    </div>
                    <span class="material-symbols-outlined text-gray-600 text-sm">chevron_right</span>
                </a>
                `;
            }).join('');
            
            suggestionsElement.classList.remove('hidden');
        }
    });
    </script>
</body>
</html>

 src/post-details.njk file code: 

---
layout: layouts/base.njk
pagination:
  data: posts.posts
  size: 1
  alias: post
permalink: "/post/{{ post.title | slugify }}/"
eleventyComputed:
  title: "{{ post.title }} - Quravel"
---
<!DOCTYPE html>
<html class="dark" lang="en">
<head>
    <meta charset="utf-8"/>
    <meta content="width=device-width, initial-scale=1.0" name="viewport"/>
    <title>Quravel - Show Details</title>
    <script src="https://cdn.tailwindcss.com?plugins=forms,typography"></script>
    <script>
        tailwind.config = {
            darkMode: "class",
            theme: {
                extend: {
                    colors: {
                        primary: "#498BBB",
                        "background-light": "#F3F4F6",
                        "background-dark": "#0B0E19",
                        "surface-dark": "#151926",
                        "footer-dark": "#0C0E14",
                        "text-light": "#E5E7EB",
                        "text-muted": "#9CA3AF"
                    },
                    fontFamily: {
                        display: ["Inter", "sans-serif"],
                        body: ["Inter", "sans-serif"],
                    },
                    borderRadius: {
                        DEFAULT: "0.5rem",
                    },
                },
            },
        };
    </script>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&amp;display=swap" rel="stylesheet"/>
    <link href="https://fonts.googleapis.com/css2?family=Material+Symbols+Outlined:wght,FILL@100..700,0..1&amp;display=swap" rel="stylesheet"/>
    <style>
    body {
        font-family: 'Inter', sans-serif;
        -webkit-font-smoothing: antialiased;
        -moz-osx-font-smoothing: grayscale;
    }
    
    .hide-scrollbar::-webkit-scrollbar {
        display: none;
    }
    
    .hide-scrollbar {
        -ms-overflow-style: none;
        scrollbar-width: none;
    }
    
    #mobile-menu {
        transition: transform 0.3s ease-in-out;
        -webkit-transition: transform 0.3s ease-in-out;
    }
    
    .menu-open {
        transform: translateX(0) !important;
        -webkit-transform: translateX(0) !important;
    }
    
    /* Search suggestions styling */
    .search-suggestions {
        position: absolute;
        top: 100%;
        left: 0;
        right: 0;
        background: white;
        border-radius: 0.5rem;
        box-shadow: 0 10px 25px rgba(0,0,0,0.1);
        max-height: 400px;
        overflow-y: auto;
        z-index: 1000;
        margin-top: 5px;
    }
    
    .dark .search-suggestions {
        background: #151926;
        border: 1px solid #374151;
    }
    
    .search-item {
        display: flex;
        align-items: center;
        padding: 12px;
        border-bottom: 1px solid #e5e7eb;
        cursor: pointer;
        transition: background-color 0.2s;
        -webkit-transition: background-color 0.2s;
    }
    
    .dark .search-item {
        border-bottom: 1px solid #374151;
    }
    
    .search-item:hover {
        background-color: #f3f4f6;
    }
    
    .dark .search-item:hover {
        background-color: #1f2937;
    }
    
    .search-item:last-child {
        border-bottom: none;
    }
    
    .search-item img {
        width: 40px;
        height: 60px;
        object-fit: cover;
        border-radius: 4px;
        margin-right: 12px;
    }
    
    .search-item-content {
        flex: 1;
        min-width: 0; /* Prevents flex overflow */
    }
    
    .search-item-title {
        font-weight: 500;
        margin-bottom: 4px;
        overflow: hidden;
        text-overflow: ellipsis;
        white-space: nowrap;
    }
    
    .search-item-meta {
        font-size: 12px;
        color: #6b7280;
    }
    
    .dark .search-item-meta {
        color: #9ca3af;
    }
    
    .no-results {
        padding: 20px;
        text-align: center;
        color: #6b7280;
    }
    
    .dark .no-results {
        color: #9ca3af;
    }
    
    /* Japanese font support */
    .font-japanese {
        font-family: "Hiragino Kaku Gothic Pro", "Meiryo", "MS PGothic", "ヒラギノ角ゴ Pro W3", "メイリオ", "ＭＳ Ｐゴシック", sans-serif;
        font-size: 14px;
        line-height: 1.6;
    }
    
    /* Season selector styling */
    .season-selector {
        transition: all 0.3s ease;
        -webkit-transition: all 0.3s ease;
        position: relative;
        overflow: hidden; /* Added for rounded corners */
    }
    
    .season-selector:hover {
        transform: translateY(-2px);
        -webkit-transform: translateY(-2px);
    }
    
    .season-badge {
        position: absolute;
        top: 8px;
        right: 8px;
        background: linear-gradient(135deg, #498BBB, #3a6ea5);
        color: white;
        font-size: 10px;
        font-weight: bold;
        padding: 2px 6px;
        border-radius: 4px;
        z-index: 2;
        box-shadow: 0 2px 4px rgba(0,0,0,0.2);
    }
    
    .current-season {
        border: 2px solid #498BBB;
        box-shadow: 0 0 15px rgba(73, 139, 187, 0.3);
        position: relative;
    }
    
    .current-season::after {
        content: '';
        position: absolute;
        top: 0;
        left: 0;
        right: 0;
        bottom: 0;
        border-radius: 0.5rem;
        box-shadow: inset 0 0 0 1px #498BBB;
        pointer-events: none;
    }
    
    .season-progress {
        height: 3px;
        background: rgba(73, 139, 187, 0.2);
        border-radius: 2px;
        overflow: hidden;
        margin-top: 4px;
    }
    
    .season-progress-bar {
        height: 100%;
        background: linear-gradient(90deg, #498BBB, #5da8e8);
        transition: width 0.3s ease;
        -webkit-transition: width 0.3s ease;
        width: 0; /* Default to 0 */
    }
    
    /* Fix for dark mode season cards */
    .dark .season-selector {
        background: #151926;
        border-color: #374151;
    }
    
    .dark .season-selector:hover {
        border-color: #498BBB;
    }
    
    /* Ensure images don't overflow season cards */
    .season-selector img {
        max-width: 100%;
        height: auto;
    }
</style>
<body class="bg-background-light dark:bg-background-dark text-gray-900 dark:text-text-light transition-colors duration-300 min-h-screen flex flex-col relative">

    <!-- Mobile Menu Overlay -->
    <div class="fixed inset-0 bg-black/50 z-40 hidden lg:hidden" id="mobile-menu-overlay" onclick="toggleMobileMenu()"></div>
    
    <!-- Mobile Menu -->
    <div class="fixed top-0 left-0 h-full w-64 bg-white dark:bg-[#151926] z-50 transform -translate-x-full lg:hidden overflow-y-auto shadow-2xl" id="mobile-menu">
        <div class="p-4 border-b border-gray-200 dark:border-gray-700 flex justify-between items-center">
            <img alt="Quravel Logo" class="h-8 object-contain" src="https://cdn.imgchest.com/files/449aa5626e23.png"/>
            <button class="text-gray-500 hover:text-primary" onclick="toggleMobileMenu()">
                <span class="material-symbols-outlined">close</span>
            </button>
        </div>
        <div class="p-4 space-y-4">
            <a class="block text-sm font-medium hover:text-primary py-2 border-b border-gray-100 dark:border-gray-800" href="/">Home</a>
            <div class="py-2 border-b border-gray-100 dark:border-gray-800">
                <button class="flex items-center justify-between w-full text-sm font-medium hover:text-primary focus:outline-none" onclick="toggleMobileDropdown('genre-mobile')">
                    <span>Genre</span>
                    <span class="material-symbols-outlined text-sm transform transition-transform" id="genre-arrow">expand_more</span>
                </button>
                <div class="hidden mt-2 ml-4 space-y-2 text-sm text-gray-500 dark:text-gray-400" id="genre-mobile">
                    <a class="block hover:text-primary" href="#">Action</a>
<a class="block hover:text-primary" href="#">Adventure</a>
<a class="block hover:text-primary" href="#">Cars</a>
<a class="block hover:text-primary" href="#">Comedy</a>
<a class="block hover:text-primary" href="#">Dementia</a>
<a class="block hover:text-primary" href="#">Demons</a>
<a class="block hover:text-primary" href="#">Drama</a>
<a class="block hover:text-primary" href="#">Ecchi</a>
<a class="block hover:text-primary" href="#">Fantasy</a>
<a class="block hover:text-primary" href="#">Game</a>
<a class="block hover:text-primary" href="#">Harem</a>
<a class="block hover:text-primary" href="#">Historical</a>
<a class="block hover:text-primary" href="#">Horror</a>
<a class="block hover:text-primary" href="#">Isekai</a>
<a class="block hover:text-primary" href="#">Josei</a>
<a class="block hover:text-primary" href="#">Kids</a>
<a class="block hover:text-primary" href="#">Magic</a>
<a class="block hover:text-primary" href="#">Martial Arts</a>
<a class="block hover:text-primary" href="#">Mecha</a>
<a class="block hover:text-primary" href="#">Military</a>
<a class="block hover:text-primary" href="#">Music</a>
<a class="block hover:text-primary" href="#">Mystery</a>
<a class="block hover:text-primary" href="#">Noir</a>
<a class="block hover:text-primary" href="#">Parody</a>
<a class="block hover:text-primary" href="#">Police</a>
<a class="block hover:text-primary" href="#">Psychological</a>
<a class="block hover:text-primary" href="#">Politic</a>
<a class="block hover:text-primary" href="#">Romance</a>
<a class="block hover:text-primary" href="#">Reality-Show</a>
<a class="block hover:text-primary" href="#">Reality-TV</a>
<a class="block hover:text-primary" href="#">Samurai</a>
<a class="block hover:text-primary" href="#">School</a>
<a class="block hover:text-primary" href="#">Sci-Fi</a>
<a class="block hover:text-primary" href="#">Seinen</a>
<a class="block hover:text-primary" href="#">Shoujo</a>
<a class="block hover:text-primary" href="#">Shoujo Ai</a>
<a class="block hover:text-primary" href="#">Shounen</a>
<a class="block hover:text-primary" href="#">Shounen Ai</a>
<a class="block hover:text-primary" href="#">Slice of Life</a>
<a class="block hover:text-primary" href="#">Space</a>
<a class="block hover:text-primary" href="#">Sports</a>
<a class="block hover:text-primary" href="#">Super Power</a>
<a class="block hover:text-primary" href="#">Supernatural</a>
<a class="block hover:text-primary" href="#">Thriller</a>
<a class="block hover:text-primary" href="#">Vampire</a>
<a class="block hover:text-primary" href="#">War</a>
                </div>
            </div>
<div class="py-2 border-b border-gray-100 dark:border-gray-800">
<button class="flex items-center justify-between w-full text-sm font-medium hover:text-primary focus:outline-none" onclick="toggleMobileDropdown('country-mobile')">
<span>Country</span>
<span class="material-symbols-outlined text-sm transform transition-transform" id="country-arrow">expand_more</span>
</button>
<div class="hidden mt-2 ml-4 space-y-2 text-sm text-gray-500 dark:text-gray-400" id="country-mobile">
<a class="block hover:text-primary" href="#">Afghanistan</a>
<a class="block hover:text-primary" href="#">Algeria</a>
<a class="block hover:text-primary" href="#">Argentina</a>
<a class="block hover:text-primary" href="#">Australia</a>
<a class="block hover:text-primary" href="#">Austria</a>
<a class="block hover:text-primary" href="#">Bangladesh</a>
<a class="block hover:text-primary" href="#">Belgium</a>
<a class="block hover:text-primary" href="#">Brazil</a>
<a class="block hover:text-primary" href="#">Canada</a>
<a class="block hover:text-primary" href="#">Chile</a>
<a class="block hover:text-primary" href="#">China</a>
<a class="block hover:text-primary" href="#">Colombia</a>
<a class="block hover:text-primary" href="#">Czechia</a>
<a class="block hover:text-primary" href="#">Denmark</a>
<a class="block hover:text-primary" href="#">Egypt</a>
<a class="block hover:text-primary" href="#">Finland</a>
<a class="block hover:text-primary" href="#">France</a>
<a class="block hover:text-primary" href="#">Germany</a>
<a class="block hover:text-primary" href="#">Greece</a>
<a class="block hover:text-primary" href="#">Hong Kong</a>
<a class="block hover:text-primary" href="#">Hungary</a>
<a class="block hover:text-primary" href="#">Iceland</a>
<a class="block hover:text-primary" href="#">India</a>
<a class="block hover:text-primary" href="#">Indonesia</a>
<a class="block hover:text-primary" href="#">Iran</a>
<a class="block hover:text-primary" href="#">Ireland</a>
<a class="block hover:text-primary" href="#">Israel</a>
<a class="block hover:text-primary" href="#">Italy</a>
<a class="block hover:text-primary" href="#">Japan</a>
<a class="block hover:text-primary" href="#">Mexico</a>
<a class="block hover:text-primary" href="#">Netherlands</a>
<a class="block hover:text-primary" href="#">New Zealand</a>
<a class="block hover:text-primary" href="#">Nigeria</a>
<a class="block hover:text-primary" href="#">Pakistan</a>
<a class="block hover:text-primary" href="#">Philippines</a>
<a class="block hover:text-primary" href="#">Poland</a>
<a class="block hover:text-primary" href="#">Russia</a>
<a class="block hover:text-primary" href="#">South Africa</a>
<a class="block hover:text-primary" href="#">Spain</a>
<a class="block hover:text-primary" href="#">Sweden</a>
<a class="block hover:text-primary" href="#">Taiwan</a>
<a class="block hover:text-primary" href="#">Thailand</a>
<a class="block hover:text-primary" href="#">Turkey</a>
<a class="block hover:text-primary" href="#">UK</a>
<a class="block hover:text-primary" href="#">USA</a>
</div>
</div>
            <a class="block text-sm font-medium hover:text-primary py-2 border-b border-gray-100 dark:border-gray-800" href="#">Top IMDB</a>
            <a class="block text-sm font-medium hover:text-primary py-2 border-b border-gray-100 dark:border-gray-800" href="#">Updates</a>
            <a class="block text-sm font-medium hover:text-primary py-2" href="https://editor.wix.com/wixel-view/forms/7405900275916997729">Sent Request</a>
        </div>
    </div>

    <!-- Header -->
    <header class="fixed top-0 w-full z-40 bg-white/95 dark:bg-[#0B0E19]/95 backdrop-blur-sm border-b border-gray-200 dark:border-gray-800 shadow-sm">
        <div class="container mx-auto px-4 h-16 flex items-center justify-between">
            <div class="flex items-center gap-4">
                <button class="lg:hidden text-gray-600 dark:text-gray-200 focus:outline-none" onclick="toggleMobileMenu()">
                    <span class="material-symbols-outlined text-3xl">menu</span>
                </button>
                <nav class="hidden lg:flex items-center space-x-6 text-sm font-medium">
                    <a class="hover:text-primary transition-colors" href="/">Home</a>
                    <div class="relative group">
                        <button class="flex items-center space-x-1 hover:text-primary transition-colors focus:outline-none py-4">
                            <span>Genre</span>
                            <span class="material-symbols-outlined text-sm">expand_more</span>
                        </button>
                        <div class="absolute top-full left-0 w-[600px] bg-white dark:bg-[#1A1D29] rounded-b-lg shadow-xl opacity-0 invisible group-hover:opacity-100 group-hover:visible transition-all duration-200 border-t-2 border-primary grid grid-cols-4 gap-4 p-6 z-50">
                            <a class="hover:text-primary block text-sm text-gray-600 dark:text-gray-400" href="#">Action</a>
<a class="hover:text-primary block text-sm text-gray-600 dark:text-gray-400" href="#">Adventure</a>
<a class="hover:text-primary block text-sm text-gray-600 dark:text-gray-400" href="#">Adult</a>
<a class="hover:text-primary block text-sm text-gray-600 dark:text-gray-400" href="#">Cars</a>
<a class="hover:text-primary block text-sm text-gray-600 dark:text-gray-400" href="#">Comedy</a>
<a class="hover:text-primary block text-sm text-gray-600 dark:text-gray-400" href="#">Dementia</a>
<a class="hover:text-primary block text-sm text-gray-600 dark:text-gray-400" href="#">Demons</a>
<a class="hover:text-primary block text-sm text-gray-600 dark:text-gray-400" href="#">Drama</a>
<a class="hover:text-primary block text-sm text-gray-600 dark:text-gray-400" href="#">Ecchi</a>
<a class="hover:text-primary block text-sm text-gray-600 dark:text-gray-400" href="#">Fantasy</a>
<a class="hover:text-primary block text-sm text-gray-600 dark:text-gray-400" href="#">Game</a>
<a class="hover:text-primary block text-sm text-gray-600 dark:text-gray-400" href="#">Harem</a>
<a class="hover:text-primary block text-sm text-gray-600 dark:text-gray-400" href="#">Historical</a>
<a class="hover:text-primary block text-sm text-gray-600 dark:text-gray-400" href="#">Horror</a>
<a class="hover:text-primary block text-sm text-gray-600 dark:text-gray-400" href="#">Isekai</a>
<a class="hover:text-primary block text-sm text-gray-600 dark:text-gray-400" href="#">Josei</a>
<a class="hover:text-primary block text-sm text-gray-600 dark:text-gray-400" href="#">Kids</a>
<a class="hover:text-primary block text-sm text-gray-600 dark:text-gray-400" href="#">Magic</a>
<a class="hover:text-primary block text-sm text-gray-600 dark:text-gray-400" href="#">Martial Arts</a>
<a class="hover:text-primary block text-sm text-gray-600 dark:text-gray-400" href="#">Mecha</a>
<a class="hover:text-primary block text-sm text-gray-600 dark:text-gray-400" href="#">Military</a>
<a class="hover:text-primary block text-sm text-gray-600 dark:text-gray-400" href="#">Music</a>
<a class="hover:text-primary block text-sm text-gray-600 dark:text-gray-400" href="#">Mystery</a>
<a class="hover:text-primary block text-sm text-gray-600 dark:text-gray-400" href="#">Parody</a>
<a class="hover:text-primary block text-sm text-gray-600 dark:text-gray-400" href="#">Police</a>
<a class="hover:text-primary block text-sm text-gray-600 dark:text-gray-400" href="#">Politic</a>
<a class="hover:text-primary block text-sm text-gray-600 dark:text-gray-400" href="#">Psychological</a>
<a class="hover:text-primary block text-sm text-gray-600 dark:text-gray-400" href="#">Romance</a>
<a class="hover:text-primary block text-sm text-gray-600 dark:text-gray-400" href="#">Samurai</a>
<a class="hover:text-primary block text-sm text-gray-600 dark:text-gray-400" href="#">School</a>
<a class="hover:text-primary block text-sm text-gray-600 dark:text-gray-400" href="#">Sci-Fi</a>
<a class="hover:text-primary block text-sm text-gray-600 dark:text-gray-400" href="#">Seinen</a>
<a class="hover:text-primary block text-sm text-gray-600 dark:text-gray-400" href="#">Shoujo</a>
<a class="hover:text-primary block text-sm text-gray-600 dark:text-gray-400" href="#">Shoujo Ai</a>
<a class="hover:text-primary block text-sm text-gray-600 dark:text-gray-400" href="#">Shounen</a>
<a class="hover:text-primary block text-sm text-gray-600 dark:text-gray-400" href="#">Shounen Ai</a>
<a class="hover:text-primary block text-sm text-gray-600 dark:text-gray-400" href="#">Slice of Life</a>
<a class="hover:text-primary block text-sm text-gray-600 dark:text-gray-400" href="#">Space</a>
<a class="hover:text-primary block text-sm text-gray-600 dark:text-gray-400" href="#">Sports</a>
<a class="hover:text-primary block text-sm text-gray-600 dark:text-gray-400" href="#">Super Power</a>
<a class="hover:text-primary block text-sm text-gray-600 dark:text-gray-400" href="#">Supernatural</a>
<a class="hover:text-primary block text-sm text-gray-600 dark:text-gray-400" href="#">Thriller</a>
<a class="hover:text-primary block text-sm text-gray-600 dark:text-gray-400" href="#">Vampire</a>
<a class="hover:text-primary block text-sm text-gray-600 dark:text-gray-400" href="#">War</a>
                        </div>
                    </div>
<div class="relative group">
<button class="flex items-center space-x-1 hover:text-primary transition-colors focus:outline-none py-4">
<span>Country</span>
<span class="material-symbols-outlined text-sm">expand_more</span>
</button>
<div class="absolute top-full left-0 w-[600px] bg-white dark:bg-[#1A1D29] rounded-b-lg shadow-xl opacity-0 invisible group-hover:opacity-100 group-hover:visible transition-all duration-200 border-t-2 border-primary grid grid-cols-4 gap-4 p-6 z-50">
<a class="hover:text-primary block text-sm text-gray-600 dark:text-gray-400" href="#">Argentina</a>
<a class="hover:text-primary block text-sm text-gray-600 dark:text-gray-400" href="#">Argentina</a>
<a class="hover:text-primary block text-sm text-gray-600 dark:text-gray-400" href="#">Australia</a>
<a class="hover:text-primary block text-sm text-gray-600 dark:text-gray-400" href="#">Austria</a>
<a class="hover:text-primary block text-sm text-gray-600 dark:text-gray-400" href="#">Belgium</a>
<a class="hover:text-primary block text-sm text-gray-600 dark:text-gray-400" href="#">Brazil</a>
<a class="hover:text-primary block text-sm text-gray-600 dark:text-gray-400" href="#">Canada</a>
<a class="hover:text-primary block text-sm text-gray-600 dark:text-gray-400" href="#">China</a>
<a class="hover:text-primary block text-sm text-gray-600 dark:text-gray-400" href="#">Colombia</a>
<a class="hover:text-primary block text-sm text-gray-600 dark:text-gray-400" href="#">Czech Republic</a>
<a class="hover:text-primary block text-sm text-gray-600 dark:text-gray-400" href="#">Denmark</a>
<a class="hover:text-primary block text-sm text-gray-600 dark:text-gray-400" href="#">Finland</a>
<a class="hover:text-primary block text-sm text-gray-600 dark:text-gray-400" href="#">France</a>
<a class="hover:text-primary block text-sm text-gray-600 dark:text-gray-400" href="#">Germany</a>
<a class="hover:text-primary block text-sm text-gray-600 dark:text-gray-400" href="#">Hong Kong</a>
<a class="hover:text-primary block text-sm text-gray-600 dark:text-gray-400" href="#">Hungary</a>
<a class="hover:text-primary block text-sm text-gray-600 dark:text-gray-400" href="#">India</a>
<a class="hover:text-primary block text-sm text-gray-600 dark:text-gray-400" href="#">Ireland</a>
<a class="hover:text-primary block text-sm text-gray-600 dark:text-gray-400" href="#">Israel</a>
<a class="hover:text-primary block text-sm text-gray-600 dark:text-gray-400" href="#">Italy</a>
<a class="hover:text-primary block text-sm text-gray-600 dark:text-gray-400" href="#">Japan</a>
<a class="hover:text-primary block text-sm text-gray-600 dark:text-gray-400" href="#">Luxembourg</a>
<a class="hover:text-primary block text-sm text-gray-600 dark:text-gray-400" href="#">Mexico</a>
<a class="hover:text-primary block text-sm text-gray-600 dark:text-gray-400" href="#">Netherlands</a>
<a class="hover:text-primary block text-sm text-gray-600 dark:text-gray-400" href="#">New Zealand</a>
<a class="hover:text-primary block text-sm text-gray-600 dark:text-gray-400" href="#">Nigeria</a>
<a class="hover:text-primary block text-sm text-gray-600 dark:text-gray-400" href="#">Norway</a>
<a class="hover:text-primary block text-sm text-gray-600 dark:text-gray-400" href="#">Philippines</a>
<a class="hover:text-primary block text-sm text-gray-600 dark:text-gray-400" href="#">Poland</a>
<a class="hover:text-primary block text-sm text-gray-600 dark:text-gray-400" href="#">Romania</a>
<a class="hover:text-primary block text-sm text-gray-600 dark:text-gray-400" href="#">Russia</a>
<a class="hover:text-primary block text-sm text-gray-600 dark:text-gray-400" href="#">South Africa</a>
<a class="hover:text-primary block text-sm text-gray-600 dark:text-gray-400" href="#">South Korea</a>
<a class="hover:text-primary block text-sm text-gray-600 dark:text-gray-400" href="#">Spain</a>
<a class="hover:text-primary block text-sm text-gray-600 dark:text-gray-400" href="#">Sweden</a>
<a class="hover:text-primary block text-sm text-gray-600 dark:text-gray-400" href="#">Switzerland</a>
<a class="hover:text-primary block text-sm text-gray-600 dark:text-gray-400" href="#">Taiwan</a>
<a class="hover:text-primary block text-sm text-gray-600 dark:text-gray-400" href="#">Thailand</a>
<a class="hover:text-primary block text-sm text-gray-600 dark:text-gray-400" href="#">Turkey</a>
<a class="hover:text-primary block text-sm text-gray-600 dark:text-gray-400" href="#">United Kingdom</a>
<a class="hover:text-primary block text-sm text-gray-600 dark:text-gray-400" href="#">United States</a>
</div>
</div>
                    <a class="hover:text-primary transition-colors" href="#">Top IMDB</a>
                    <a class="hover:text-primary transition-colors" href="#">Updates</a>
                    <a class="hover:text-primary transition-colors" href="https://editor.wix.com/wixel-view/forms/7405900275916997729">Sent Request</a>
                </nav>
            </div>
            
            <div class="absolute left-1/2 transform -translate-x-1/2">
                <a class="block" href="/">
                    <img alt="Quravel Logo" class="h-8 md:h-10 object-contain" src="https://lh3.googleusercontent.com/aida-public/AB6AXuBJUVSMqcvlsLRod5Xj-MZhjFAWxv45A-9D1r1RCogjetrU2yKas3rRIuvSZRytOe6KmnI1y8NBGlIDGaE0UV5-mx19YpDf5v0SsajVxTc0VUCDku8E8PC54rDIUGGhmt44NSDXMGfnGVTtfzGJ8Cj6U15erHms74L8zDNtfVtIjG013mT9k-H5Psf5KSd570YR8_DAtEfUBmcVIMfE5LNH3WO14T7Cv3psWjV5O4UWogAMASg1czrkMA4qcRagH2Mtb7wqzWRn0BQ"/>
                </a>
            </div>
            
            <div class="flex items-center space-x-4">
                <div class="relative hidden sm:block">
                    <div class="relative">
                        <input class="bg-gray-100 dark:bg-gray-800 text-sm rounded-full py-2 pl-4 pr-10 focus:outline-none focus:ring-2 focus:ring-primary w-48 transition-all dark:text-white border-none" placeholder="Search..." type="text" id="desktop-search"/>
                        <span class="material-symbols-outlined absolute right-3 top-2 text-gray-400 text-lg cursor-pointer hover:text-primary">search</span>
                        <div class="search-suggestions hidden" id="desktop-search-suggestions"></div>
                    </div>
                </div>
                <button class="sm:hidden text-gray-600 dark:text-gray-200" onclick="toggleMobileSearch()">
                    <span class="material-symbols-outlined">search</span>
                </button>
            </div>
        </div>
        
        <!-- Mobile Search Bar -->
        <div class="hidden sm:hidden bg-white dark:bg-[#0B0E19] border-b border-gray-200 dark:border-gray-800 p-3 absolute w-full top-16 left-0 z-30" id="mobile-search-bar">
            <div class="relative">
                <input class="w-full bg-gray-100 dark:bg-gray-800 text-sm rounded-full py-2 pl-4 pr-10 focus:outline-none focus:ring-2 focus:ring-primary dark:text-white border-none" placeholder="Search movies, shows..." type="text" id="mobile-search"/>
                <span class="material-symbols-outlined absolute right-3 top-2 text-gray-400 text-lg">search</span>
                <div class="search-suggestions hidden" id="mobile-search-suggestions"></div>
            </div>
        </div>
    </header>

    <main class="flex-grow pt-24 pb-12">
        <div class="container mx-auto px-4">
            <div class="bg-white dark:bg-[#151926] rounded-2xl p-6 md:p-8 lg:p-10 shadow-lg mb-12 relative overflow-hidden">
                <div class="absolute top-0 right-0 w-2/3 h-full bg-gradient-to-l from-primary/5 to-transparent pointer-events-none opacity-20"></div>
                <div class="flex flex-col md:flex-row gap-8 lg:gap-12 relative z-10">
                    <div class="flex-shrink-0 mx-auto md:mx-0 w-64 md:w-72 lg:w-80 relative group">
                        <img alt="Show Poster" class="w-full h-auto rounded-xl shadow-2xl object-cover aspect-[2/3] transform transition duration-500 hover:scale-[1.02]" src="{{ post.poster }}" onerror="this.src='https://via.placeholder.com/300x450?text=Poster+Not+Available'"/>
                        <div class="absolute inset-0 rounded-xl ring-1 ring-white/10 pointer-events-none"></div>
                    </div>
                    <div class="flex-grow flex flex-col justify-start text-center md:text-left">
                        <div class="text-primary text-sm font-semibold mb-2 uppercase tracking-wide">Home • {{ post.type | capitalize }} • {{ post.genres[0] if post.genres and post.genres.length > 0 else 'Action' }}</div>
                        <h1 class="text-3xl md:text-4xl lg:text-5xl font-bold mb-4 leading-tight">{{ post.title }}</h1>
                        <div class="flex flex-wrap items-center justify-center md:justify-start gap-4 mb-6 text-sm">
                            <div class="flex items-center space-x-1 bg-yellow-500/10 text-yellow-500 px-2 py-1 rounded border border-yellow-500/20">
                                <span class="material-symbols-outlined text-base">star</span>
                                <span class="font-bold">{{ post.rating or 'N/A' }}</span>
                                <span class="text-xs opacity-70">IMDb</span>
                            </div>
                            <div class="px-2 py-0.5 rounded border border-primary text-primary bg-primary/10 text-xs font-mono font-bold">HD</div>
                            {% if post.certification %}
                            <span class="px-2 py-0.5 rounded border border-gray-300 dark:border-gray-600 text-xs">{{ post.certification }}</span>
                            {% endif %}
                            <span class="text-gray-500 dark:text-gray-400">• {{ post.type | capitalize }}</span>
                            <span class="text-gray-500 dark:text-gray-400">• {{ post.year }}</span>
                            <span class="text-gray-500 dark:text-gray-400">• {{ post.duration }}</span>
                        </div>
                        <div class="flex flex-wrap items-center justify-center md:justify-start gap-4 mb-8">
                            <a href="/watch/{{ post.title | slugify }}/" class="bg-primary hover:bg-opacity-90 text-white font-semibold py-3 px-8 rounded-full flex items-center gap-2 transition-all shadow-lg shadow-primary/30 transform hover:-translate-y-0.5 w-full md:w-auto justify-center">
                                <span class="material-symbols-outlined">play_arrow</span>
                                Watch now
                            </a>
                            <div class="relative group dropdown-container w-full md:w-auto">
                                <button class="bg-gray-200 dark:bg-gray-800 hover:bg-gray-300 dark:hover:bg-gray-700 text-gray-800 dark:text-white font-semibold py-3 px-6 rounded-full flex items-center justify-center gap-2 transition-colors w-full md:w-auto" id="add-to-list-btn">
                                    <span class="material-symbols-outlined">add</span>
                                    <span id="current-list-status">Add to list</span>
                                    <span class="material-symbols-outlined text-sm ml-1">expand_more</span>
                                </button>
                                <div class="absolute left-0 top-full mt-2 w-full md:w-56 bg-white dark:bg-surface-dark rounded-lg shadow-xl py-2 z-20 opacity-0 invisible group-hover:opacity-100 group-hover:visible transition-all duration-200 border border-gray-200 dark:border-gray-700 text-sm">
                                    <button class="block w-full text-left px-4 py-2 hover:bg-gray-100 dark:hover:bg-gray-800 text-gray-700 dark:text-gray-300" onclick="updateListStatus('Planning to watch')">Planning to watch</button>
                                    <button class="block w-full text-left px-4 py-2 hover:bg-gray-100 dark:hover:bg-gray-800 text-gray-700 dark:text-gray-300" onclick="updateListStatus('Watching')">Watching</button>
                                    <button class="block w-full text-left px-4 py-2 hover:bg-gray-100 dark:hover:bg-gray-800 text-gray-700 dark:text-gray-300" onclick="updateListStatus('Completed')">Completed</button>
                                    <button class="block w-full text-left px-4 py-2 hover:bg-gray-100 dark:hover:bg-gray-800 text-gray-700 dark:text-gray-300" onclick="updateListStatus('Re-watching')">Re-watching</button>
                                    <button class="block w-full text-left px-4 py-2 hover:bg-gray-100 dark:hover:bg-gray-800 text-gray-700 dark:text-gray-300" onclick="updateListStatus('Dropped')">Dropped</button>
                                    <div class="border-t border-gray-200 dark:border-gray-700 my-1"></div>
                                    <button class="block w-full text-left px-4 py-2 hover:bg-red-50 dark:hover:bg-red-900/20 text-red-500" onclick="updateListStatus('Add to list')">Remove from list</button>
                                </div>
                            </div>
                        </div>
                        
                        <div class="mb-6">
                            <p class="text-gray-600 dark:text-gray-300 leading-relaxed">
                                {{ post.description or "No description available." }}
                            </p>
                        </div>
                        
                        <!-- UPDATED: Wider Show Information Section -->
                        <div class="bg-white dark:bg-[#1A1D29] rounded-xl p-6 mb-8 shadow-lg border border-gray-200 dark:border-gray-800">
                            <h3 class="text-xl font-bold mb-4 text-gray-900 dark:text-white border-b border-gray-300 dark:border-gray-700 pb-2">Show Information</h3>
                            
                            <div class="grid grid-cols-1 lg:grid-cols-2 gap-4 text-sm">
                                <!-- Left Column -->
                                <div class="space-y-3">
                                    <div class="flex items-start">
                                        <span class="font-medium text-gray-900 dark:text-white min-w-32">English Title:</span>
                                        <span class="ml-4 text-gray-700 dark:text-gray-300">{{ post.title }}</span>
                                    </div>
                                    <div class="flex items-start">
                                        <span class="font-medium text-gray-900 dark:text-white min-w-32">Japanese:</span>
                                        <span class="ml-4 text-gray-700 dark:text-gray-300 font-japanese">
                                            {{ post.japaneseTitle or "暗殺者である俺のステータスが勇者よりも明らかに強いのだが" }}
                                        </span>
                                    </div>
                                    <div class="flex items-start">
                                        <span class="font-medium text-gray-900 dark:text-white min-w-32">Synonyms:</span>
                                        <span class="ml-4 text-gray-700 dark:text-gray-300">{{ post.synonyms or "Sutetsuyo" }}</span>
                                    </div>
                                    <div class="flex items-start">
                                        <span class="font-medium text-gray-900 dark:text-white min-w-32">Aired:</span>
                                        <span class="ml-4 text-gray-700 dark:text-gray-300">{{ post.aired or "Oct 7, 2025 to ?" }}</span>
                                    </div>
                                    <div class="flex items-start">
                                        <span class="font-medium text-gray-900 dark:text-white min-w-32">Premiered:</span>
                                        <span class="ml-4 text-gray-700 dark:text-gray-300">{{ post.premiered or "Fall 2025" }}</span>
                                    </div>
                                </div>
                                
                                <!-- Right Column -->
                                <div class="space-y-3">
                                    <div class="flex items-start">
                                        <span class="font-medium text-gray-900 dark:text-white min-w-32">Duration:</span>
                                        <span class="ml-4 text-gray-700 dark:text-gray-300">{{ post.duration or "24m" }}</span>
                                    </div>
                                    <div class="flex items-start">
                                        <span class="font-medium text-gray-900 dark:text-white min-w-32">Status:</span>
                                        <span class="ml-4">
                                            {% if post.status == "ongoing" or post.status == "airing" %}
                                            <span class="px-2 py-0.5 bg-green-500/10 text-green-500 text-xs font-medium rounded border border-green-500/20">
                                                Currently Airing
                                            </span>
                                            {% else %}
                                            <span class="px-2 py-0.5 bg-gray-500/10 text-gray-500 text-xs font-medium rounded border border-gray-500/20">
                                                {{ post.status or "Finished Airing" }}
                                            </span>
                                            {% endif %}
                                        </span>
                                    </div>
                                    <div class="flex items-start">
                                        <span class="font-medium text-gray-900 dark:text-white min-w-32">MAL Score:</span>
                                        <span class="ml-4 text-gray-700 dark:text-gray-300">{{ post.malScore or "?" }}</span>
                                    </div>
                                    <div class="flex items-start">
                                        <span class="font-medium text-gray-900 dark:text-white min-w-32">Genres:</span>
                                        <div class="ml-4 flex flex-wrap gap-2">
                                            {% if post.genres and post.genres.length > 0 %}
                                                {% for genre in post.genres %}
                                                <a href="#" class="text-xs px-2 py-1 bg-gray-100 dark:bg-gray-800 hover:bg-primary hover:text-white text-gray-700 dark:text-gray-300 rounded border border-gray-300 dark:border-gray-700 transition-colors">
                                                    {{ genre }}
                                                </a>
                                                {% endfor %}
                                            {% else %}
                                                <span class="text-xs px-2 py-1 bg-gray-100 dark:bg-gray-800 text-gray-700 dark:text-gray-300 rounded border border-gray-300 dark:border-gray-700">Action</span>
                                                <span class="text-xs px-2 py-1 bg-gray-100 dark:bg-gray-800 text-gray-700 dark:text-gray-300 rounded border border-gray-300 dark:border-gray-700">Adventure</span>
                                                <span class="text-xs px-2 py-1 bg-gray-100 dark:bg-gray-800 text-gray-700 dark:text-gray-300 rounded border border-gray-300 dark:border-gray-700">Fantasy</span>
                                                <span class="text-xs px-2 py-1 bg-gray-100 dark:bg-gray-800 text-gray-700 dark:text-gray-300 rounded border border-gray-300 dark:border-gray-700">Isekai</span>
                                            {% endif %}
                                        </div>
                                    </div>
                                    <div class="flex items-start">
                                        <span class="font-medium text-gray-900 dark:text-white min-w-32">Studios:</span>
                                        <span class="ml-4 text-gray-700 dark:text-gray-300">{{ post.studio or "Sunrise" }}</span>
                                    </div>
                                    <div class="flex items-start">
                                        <span class="font-medium text-gray-900 dark:text-white min-w-32">Producers:</span>
                                        <span class="ml-4 text-gray-700 dark:text-gray-300">{{ post.producers or "TMS Entertainment, Kanon Sound" }}</span>
                                    </div>
                                </div>
                            </div>
                        </div>
                        
                        <div class="flex items-center gap-3">
                            <div class="w-10 h-10 rounded-full bg-gray-200 dark:bg-gray-700 overflow-hidden">
                                <img alt="User Avatar" src="https://lh3.googleusercontent.com/aida-public/AB6AXuCKepUuUHAz1GAAh9d1TP86fQ1cNEGF_A7Fi00ANN4rMbe5iAkgL18ZwXQ_bLabOJGS3Iw3kmWCMR-_bC6J8ZAQj7Fa0-ag_YKIFuGatJ4ZNgTMz3biJI_2j3tsHgv6s5Plmkoc0FaWk6FRXJ7WJDhwAwq6eIC8fEwWyZ8Qvnrk_GSsXRCVgO8Pvsa1YoJHTDbL3GoE4tSEYDIt8M5edImu39b2CQwvrurfgk06BuS_MZ3XIZgyYP78SnTXm3iVxTS6JSkhKhF0G4U"/>
                            </div>
                            <div class="text-xs">
                                <div class="font-bold text-primary">Share Quravel</div>
                                <div class="text-gray-500">to your friends</div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            
            <!-- Season Selector Section -->
{% set currentPostTitle = post.title | lower %}
{% set currentPostId = post.id or post.title | slugify %}

{% if post.seasons and post.seasons > 1 %}
<div class="bg-white dark:bg-[#151926] rounded-xl p-6 mb-8 shadow-lg border border-gray-200 dark:border-gray-800">
    <h3 class="text-xl font-bold mb-4 text-gray-900 dark:text-white border-l-4 border-primary pl-4">All Seasons</h3>
    <p class="text-gray-600 dark:text-gray-300 mb-6 text-sm">This show has {{ post.seasons }} seasons. Select a season to watch:</p>
    
    <div class="grid grid-cols-2 sm:grid-cols-3 md:grid-cols-4 lg:grid-cols-5 gap-4">
        {% for i in range(1, post.seasons + 1) %}
            {% set seasonData = posts.posts | getSeasonData(currentPostTitle, i) %}
            <a href="/post/{{ seasonData.slug or (post.title | slugify) }}-season-{{ i }}/" 
               class="season-selector block bg-gray-50 dark:bg-surface-dark rounded-lg p-4 relative overflow-hidden border border-gray-200 dark:border-gray-700 hover:border-primary dark:hover:border-primary transition-all {% if i == (post.seasonNumber or 1) %}current-season{% endif %}">
                
                <!-- Season Badge -->
                <div class="season-badge">
                    Season {{ i }}
                </div>
                
                <!-- Season Info -->
                <div class="text-center">
                    <div class="w-12 h-12 mx-auto mb-3 rounded-full bg-primary/10 flex items-center justify-center text-primary font-bold text-lg">
                        {{ i }}
                    </div>
                    
                    <h4 class="font-semibold text-gray-900 dark:text-white text-sm mb-1 truncate">
                        {% if seasonData.title %}
                            {{ seasonData.title }}
                        {% else %}
                            {{ post.title }} - Season {{ i }}
                        {% endif %}
                    </h4>
                    
                    <div class="text-xs text-gray-500 dark:text-gray-400 space-y-1">
                        {% if seasonData.year %}
                            <div class="flex items-center justify-center gap-1">
                                <span class="material-symbols-outlined text-[10px]">calendar_month</span>
                                {{ seasonData.year }}
                            </div>
                        {% endif %}
                        
                        {% if seasonData.episodes %}
                            <div class="flex items-center justify-center gap-1">
                                <span class="material-symbols-outlined text-[10px]">playlist_play</span>
                                {{ seasonData.episodes }} episodes
                            </div>
                        {% endif %}
                        
                        {% if seasonData.rating %}
                            <div class="flex items-center justify-center gap-1 text-yellow-500">
                                <span class="material-symbols-outlined text-[10px]">star</span>
                                {{ seasonData.rating }}
                            </div>
                        {% endif %}
                    </div>
                    
                    <!-- Progress Bar (optional) -->
                    {% if i == (post.seasonNumber or 1) %}
                        <div class="season-progress">
                            <div class="season-progress-bar" style="width: {% if post.watchProgress %}{{ post.watchProgress }}{% else %}0{% endif %}%"></div>
                        </div>
                        <div class="text-[10px] text-gray-500 mt-1">Currently watching</div>
                    {% endif %}
                </div>
                
                <!-- Highlight Current Season -->
                {% if i == (post.seasonNumber or 1) %}
                    <div class="absolute inset-0 bg-primary/5 pointer-events-none"></div>
                {% endif %}
            </a>
        {% endfor %}
    </div>
    
    <div class="mt-6 pt-6 border-t border-gray-200 dark:border-gray-700">
        <div class="flex flex-col sm:flex-row items-start sm:items-center justify-between gap-4">
            <div class="text-sm text-gray-600 dark:text-gray-300">
                <span class="font-medium text-primary">Currently viewing:</span> Season {{ post.seasonNumber or 1 }}
                {% if post.totalEpisodes %}
                • {{ post.totalEpisodes }} total episodes
                {% endif %}
            </div>
            
            <div class="flex items-center gap-3">
                {% if post.seasonNumber and post.seasonNumber > 1 %}
                    <a href="/post/{{ posts.posts | getSeasonSlug(currentPostTitle, post.seasonNumber - 1) or '#' }}" 
                       class="text-sm text-primary hover:text-primary/80 font-medium flex items-center gap-1">
                        <span class="material-symbols-outlined text-base">arrow_back</span>
                        Previous Season
                    </a>
                {% endif %}
                
                {% if post.seasonNumber and post.seasonNumber < post.seasons %}
                    <a href="/post/{{ posts.posts | getSeasonSlug(currentPostTitle, post.seasonNumber + 1) or '#' }}" 
                       class="text-sm text-primary hover:text-primary/80 font-medium flex items-center gap-1">
                        Next Season
                        <span class="material-symbols-outlined text-base">arrow_forward</span>
                    </a>
                {% endif %}
            </div>
        </div>
    </div>
</div>
{% endif %}

            <div class="mb-12">
                <h2 class="text-2xl font-bold mb-6 text-gray-900 dark:text-white border-l-4 border-primary pl-4">You may like this</h2>
                <div class="relative group">
                    <div class="absolute inset-y-0 left-0 w-12 bg-gradient-to-r from-background-light dark:from-background-dark to-transparent z-10 pointer-events-none"></div>
                    <div class="absolute inset-y-0 right-0 w-12 bg-gradient-to-l from-background-light dark:from-background-dark to-transparent z-10 pointer-events-none"></div>
                    <button class="hidden lg:flex absolute left-0 top-1/2 -translate-y-1/2 z-20 bg-black/60 hover:bg-primary text-white p-2 rounded-full shadow-lg transform -translate-x-1/2 opacity-0 group-hover:opacity-100 transition-all duration-300" onclick="scrollContainer('left')">
                        <span class="material-symbols-outlined text-2xl">chevron_left</span>
                    </button>
                    <button class="hidden lg:flex absolute right-0 top-1/2 -translate-y-1/2 z-20 bg-black/60 hover:bg-primary text-white p-2 rounded-full shadow-lg transform translate-x-1/2 opacity-0 group-hover:opacity-100 transition-all duration-300" onclick="scrollContainer('right')">
                        <span class="material-symbols-outlined text-2xl">chevron_right</span>
                    </button>
                    <div class="flex overflow-x-auto gap-4 pb-6 pt-2 px-2 hide-scrollbar snap-x snap-mandatory scroll-smooth" id="recommendations-container">
                        <!-- Recommendations will be dynamically loaded here -->
                    </div>
                </div>
            </div>
        </div>
    </main>

    <footer class="bg-white dark:bg-footer-dark border-t border-gray-200 dark:border-gray-800 mt-auto">
        <div class="container mx-auto px-4 py-8 md:py-12">
            <div class="flex flex-col md:flex-row justify-between items-start md:items-center gap-6">
                <div class="flex-1 max-w-2xl">
                    <img alt="Quravel Logo" class="h-8 mb-4" src="https://cdn.imgchest.com/files/24d391d36c86.png"/>
                    <p class="text-sm text-gray-600 dark:text-gray-400 mb-6 leading-relaxed">
                        Quravel is your destination for free, high-definition movies and TV series, all without ads. Stream instantly or download for offline viewing—perfect entertainment, wherever you go.
                    </p>
                    <p class="text-xs text-gray-500 dark:text-gray-500">
                        This site does not store any files on our server, we only linked to the media which is hosted on 3rd party services.
                        <br/>
                        Watch free Movies, watch free TV shows, watch free Anime online
                    </p>
                </div>
                <div class="flex flex-col items-center md:items-end gap-2 w-full md:w-auto">
                    <div class="flex gap-4 text-sm font-semibold text-gray-700 dark:text-gray-300">
                        <a class="hover:text-primary transition-colors" href="https://editor.wix.com/wixel-view/forms/7405900275916997729">REQUEST</a>
                        <a class="hover:text-primary transition-colors" href="https://editor.wix.com/wixel-view/forms/7405879446906864641">CONTACT</a>
                    </div>
                    <div class="text-xs text-gray-500 dark:text-gray-500 mt-2 text-center md:text-right w-full">
                        <span class="text-primary font-bold">Quravel</span>
                        <br/>
                        @ 2025 Quravel
                    </div>
                </div>
            </div>
        </div>
    </footer>

    <script>
    // Global variable to store posts data
    let postsData = [];

    // Fetch JSON data
    async function fetchPostsData() {
        try {
            // Use your posts data from 11ty
            const data = {% if posts.posts %}{{ posts.posts | dump | safe }}{% else %}[]{% endif %};
            postsData = data;
            
            // Populate recommendations based on genre, type, and rating
            populateRecommendations();
            
            // Initialize search functionality
            initializeSearch();
        } catch (error) {
            console.error('Error loading posts data:', error);
            postsData = [];
            populateRecommendations();
            initializeSearch();
        }
    }

    // Populate "You may like this" section with SMART algorithm
    function populateRecommendations() {
        const container = document.getElementById('recommendations-container');
        if (!container || postsData.length === 0) return;

        // Clear existing content
        container.innerHTML = '';

        // Get current post details
        const currentPostId = "{{ post.id or post.title | slugify }}";
        const currentPostGenres = {% if post.genres %}{{ post.genres | dump | safe }}{% else %}[]{% endif %};
        const currentPostType = "{{ post.type }}";
        
        console.log("Current post analysis:");
        console.log("Title:", "{{ post.title }}");
        console.log("Genres:", currentPostGenres);
        console.log("Type:", currentPostType);
        console.log("Rating:", {{ post.rating or 0 }});
        console.log("Total posts in database:", postsData.length);

        // Step 1: Filter out current post
        const otherPosts = postsData.filter(post => {
            const postId = post.id || post.title.toLowerCase().replace(/[^a-z0-9]/g, '-');
            return postId !== currentPostId;
        });

        console.log("Posts after removing current:", otherPosts.length);

        // Step 2: Score each post based on criteria
        const scoredPosts = otherPosts.map(post => {
            let score = 0;
            
            // 1. GENRE MATCH (Highest Priority: 50 points per match)
            if (currentPostGenres && currentPostGenres.length > 0 && post.genres && post.genres.length > 0) {
                const matchingGenres = currentPostGenres.filter(genre => 
                    post.genres.includes(genre)
                );
                score += matchingGenres.length * 50;
                console.log(`${post.title}: ${matchingGenres.length} genre matches = +${matchingGenres.length * 50} points`);
            }
            
            // 2. TYPE MATCH (High Priority: 30 points)
            if (post.type === currentPostType) {
                score += 30;
                console.log(`${post.title}: Same type (${post.type}) = +30 points`);
            }
            
            // 3. HIGH RATING (Medium Priority: points based on rating)
            if (post.rating) {
                if (post.rating >= 9.0) score += 40;  // Excellent
                else if (post.rating >= 8.5) score += 30;  // Very Good
                else if (post.rating >= 8.0) score += 20;  // Good
                else if (post.rating >= 7.5) score += 10;  // Above Average
                console.log(`${post.title}: Rating ${post.rating} = +${score} points`);
            }
            
            // 4. RECENT YEAR (Low Priority: 5 points if within 5 years)
            const currentYear = {{ post.year or 0 }};
            const postYear = post.year || 0;
            const yearDiff = Math.abs(currentYear - postYear);
            if (yearDiff <= 5) {
                score += 5;
                console.log(`${post.title}: Within 5 years (${postYear}) = +5 points`);
            }
            
            return {
                ...post,
                score: score
            };
        });

        // Step 3: Sort by score (highest first)
        const sortedPosts = scoredPosts.sort((a, b) => b.score - a.score);
        
        console.log("Sorted recommendations (top 10):");
        sortedPosts.slice(0, 10).forEach((post, index) => {
            console.log(`${index + 1}. ${post.title} - Score: ${post.score} (Genres: ${post.genres?.join(', ') || 'N/A'}, Type: ${post.type}, Rating: ${post.rating})`);
        });

        // Step 4: Select top 8 high-scoring posts
        const topRecommendations = sortedPosts.slice(0, 8);
        
        // Step 5: If we don't have 8 high-scoring posts, fill with random high-rated posts
        if (topRecommendations.length < 8) {
            const remainingPosts = sortedPosts.slice(8);
            const highRatedPosts = remainingPosts
                .filter(post => post.rating >= 7.5)
                .sort((a, b) => (b.rating || 0) - (a.rating || 0))
                .slice(0, 8 - topRecommendations.length);
            
            topRecommendations.push(...highRatedPosts);
        }

        console.log("Final recommendations to display:", topRecommendations.length);
        
        // Step 6: Display the recommendations
        topRecommendations.forEach(post => {
            const postElement = document.createElement('a');
            postElement.className = 'flex-shrink-0 w-40 sm:w-48 group snap-start';
            const postSlug = post.title.toLowerCase().replace(/[^a-z0-9]/g, '-');
            postElement.href = `/post/${postSlug}/`;
            
            // Calculate matching genres for tooltip
            let matchingGenres = [];
            if (currentPostGenres && post.genres) {
                matchingGenres = currentPostGenres.filter(genre => 
                    post.genres.includes(genre)
                );
            }
            
            postElement.innerHTML = `
                <div class="relative aspect-[2/3] rounded-lg overflow-hidden mb-3 bg-gray-200 dark:bg-gray-800 shadow-md transition-transform duration-300 group-hover:scale-105 group-hover:shadow-primary/20">
                    <img alt="${post.title}" class="w-full h-full object-cover" src="${post.poster}" loading="lazy" onerror="this.src='https://via.placeholder.com/300x450?text=Poster+Not+Available'">
                    <div class="absolute top-2 right-2 bg-primary text-white text-[10px] font-bold px-1.5 py-0.5 rounded">HD</div>
                    <div class="absolute inset-0 bg-black/40 opacity-0 group-hover:opacity-100 transition-opacity flex items-center justify-center">
                        <div class="bg-white/20 backdrop-blur rounded-full p-3 text-white">
                            <span class="material-symbols-outlined text-2xl">play_arrow</span>
                        </div>
                    </div>
                    <!-- Score indicator (for debugging) -->
                    <div class="absolute bottom-2 left-2 bg-black/70 text-white text-[8px] px-1 py-0.5 rounded opacity-0 group-hover:opacity-100 transition-opacity">
                        Score: ${post.score || 0}
                    </div>
                </div>
                <h3 class="font-medium text-sm text-gray-900 dark:text-white truncate group-hover:text-primary transition-colors">
                    ${post.title}
                    ${matchingGenres.length > 0 ? 
                        `<span class="inline-block ml-1 text-[10px] text-primary" title="Matching genres: ${matchingGenres.join(', ')}">✓</span>` : 
                        ''}
                </h3>
                <div class="flex items-center text-xs text-gray-500 dark:text-gray-400 mt-1 gap-2">
                    <span>${post.year || ''}</span>
                    <span class="w-1 h-1 bg-gray-500 rounded-full"></span>
                    <span>${post.type === 'anime' ? 'Anime' : post.type === 'tv' ? 'TV Show' : 'Movie'}</span>
                    <span class="w-1 h-1 bg-gray-500 rounded-full"></span>
                    <span class="flex items-center gap-0.5">
                        <span class="material-symbols-outlined text-[10px]">star</span>
                        ${post.rating || 'N/A'}
                    </span>
                </div>
                <div class="mt-1 flex flex-wrap gap-1">
                    ${post.genres ? post.genres.slice(0, 2).map(genre => 
                        `<span class="text-[9px] px-1 py-0.5 bg-gray-100 dark:bg-gray-800 text-gray-600 dark:text-gray-400 rounded">${genre}</span>`
                    ).join('') : ''}
                </div>
            `;
            
            container.appendChild(postElement);
        });

        // If no recommendations found, show message
        if (topRecommendations.length === 0) {
            container.innerHTML = `
                <div class="col-span-full text-center py-8 text-gray-500 dark:text-gray-400">
                    <span class="material-symbols-outlined text-4xl mb-2 opacity-50">search_off</span>
                    <p>No similar recommendations found</p>
                </div>
            `;
        }
    }

    // Search functionality (unchanged)
    function initializeSearch() {
        const desktopSearch = document.getElementById('desktop-search');
        const mobileSearch = document.getElementById('mobile-search');
        const desktopSuggestions = document.getElementById('desktop-search-suggestions');
        const mobileSuggestions = document.getElementById('mobile-search-suggestions');

        if (desktopSearch) {
            desktopSearch.addEventListener('input', (e) => {
                showSearchSuggestions(e.target.value, desktopSuggestions);
            });
            
            desktopSearch.addEventListener('focus', () => {
                if (desktopSearch.value.trim()) {
                    showSearchSuggestions(desktopSearch.value, desktopSuggestions);
                }
            });
            
            // Hide suggestions when clicking outside
            document.addEventListener('click', (e) => {
                if (!desktopSearch.contains(e.target) && !desktopSuggestions.contains(e.target)) {
                    desktopSuggestions.classList.add('hidden');
                }
            });
        }

        if (mobileSearch) {
            mobileSearch.addEventListener('input', (e) => {
                showSearchSuggestions(e.target.value, mobileSuggestions);
            });
            
            mobileSearch.addEventListener('focus', () => {
                if (mobileSearch.value.trim()) {
                    showSearchSuggestions(mobileSearch.value, mobileSuggestions);
                }
            });
            
            // Hide suggestions when clicking outside
            document.addEventListener('click', (e) => {
                if (!mobileSearch.contains(e.target) && !mobileSuggestions.contains(e.target)) {
                    mobileSuggestions.classList.add('hidden');
                }
            });
        }
    }

    function showSearchSuggestions(query, suggestionsContainer) {
        if (!query.trim()) {
            suggestionsContainer.classList.add('hidden');
            return;
        }

        const searchTerm = query.toLowerCase();
        const filteredPosts = postsData.filter(post => 
            post.title.toLowerCase().includes(searchTerm) ||
            (post.genres && post.genres.some(genre => genre.toLowerCase().includes(searchTerm))) ||
            (post.type && post.type.toLowerCase().includes(searchTerm))
        );

        if (filteredPosts.length === 0) {
            suggestionsContainer.innerHTML = '<div class="no-results">No results found</div>';
        } else {
            suggestionsContainer.innerHTML = filteredPosts.slice(0, 5).map(post => {
                const postSlug = post.title.toLowerCase().replace(/[^a-z0-9]/g, '-');
                return `
                    <a href="/post/${postSlug}/" class="search-item">
                        <img src="${post.poster}" alt="${post.title}" onerror="this.src='https://via.placeholder.com/40x60?text=Poster'">
                        <div class="search-item-content">
                            <div class="search-item-title">${post.title}</div>
                            <div class="search-item-meta">
                                ${post.year || ''} • ${post.type === 'anime' ? 'Anime' : post.type === 'tv' ? 'TV Show' : 'Movie'} • ${post.rating ? `⭐ ${post.rating}` : ''}
                            </div>
                        </div>
                    </a>
                `;
            }).join('');
        }
        
        suggestionsContainer.classList.remove('hidden');
    }

    // Local Storage logic for "Add to list" button
    const listButtonText = document.getElementById('current-list-status');
    const storageKey = 'quravel_list_{{ post.title | slugify }}';
    // Initialize button text from local storage
    const savedStatus = localStorage.getItem(storageKey);
    if (savedStatus) {
        if(savedStatus === 'Add to list') {
             listButtonText.innerText = 'Add to list';
        } else {
             listButtonText.innerText = savedStatus;
        }
    }
    function updateListStatus(status) {
        if (status === 'Add to list') {
            listButtonText.innerText = 'Add to list';
            localStorage.removeItem(storageKey);
        } else {
            listButtonText.innerText = status;
            localStorage.setItem(storageKey, status);
        }
    }
    
    // Mobile Menu Toggle
    function toggleMobileMenu() {
        const menu = document.getElementById('mobile-menu');
        const overlay = document.getElementById('mobile-menu-overlay');
        menu.classList.toggle('menu-open');
        overlay.classList.toggle('hidden');
    }
    
    // Mobile Search Toggle
    function toggleMobileSearch() {
        const searchBar = document.getElementById('mobile-search-bar');
        searchBar.classList.toggle('hidden');
    }
    
    // Mobile Dropdown Accordion
    function toggleMobileDropdown(id) {
        const dropdown = document.getElementById(id);
        dropdown.classList.toggle('hidden');
        const arrowId = id === 'genre-mobile' ? 'genre-arrow' : 'country-arrow';
        const arrow = document.getElementById(arrowId);
        if (dropdown.classList.contains('hidden')) {
            arrow.style.transform = 'rotate(0deg)';
        } else {
            arrow.style.transform = 'rotate(180deg)';
        }
    }
    
    // Scroll Logic for "You may like this"
    function scrollContainer(direction) {
        const container = document.getElementById('recommendations-container');
        const scrollAmount = 300;
        if (direction === 'left') {
            container.scrollLeft -= scrollAmount;
        } else {
            container.scrollLeft += scrollAmount;
        }
    }

    // Initialize everything when DOM is loaded
    document.addEventListener('DOMContentLoaded', function() {
        fetchPostsData();
    });
</script>
</body>
</html>

src/streaming.njk file code:

---
layout: layouts/base.njk
pagination:
  data: posts.posts
  size: 1
  alias: post
permalink: "/watch/{{ post.title | slugify }}/"
eleventyComputed:
  title: "Watch {{ post.title }} - Quravel"
---
<!DOCTYPE html>
<html class="dark" lang="en"><head>
<meta charset="utf-8"/>
<meta content="width=device-width, initial-scale=1.0" name="viewport"/>
<title>{{ title }}</title>
<script src="https://cdn.tailwindcss.com?plugins=forms,container-queries"></script>
<script>
        tailwind.config = {
            darkMode: "class",
            theme: {
                extend: {
                    colors: {
                        primary: "#3B7A93", 
                        "primary-dark": "#2C5D70",
                        "background-light": "#f6f7f8",
                        "background-dark": "#0B0E14",
                        "surface-dark": "#151926",
                        "surface-light": "#1E2232",
                        "footer-dark": "#0C0E14",
                        "text-light": "#E5E7EB",
                        "text-muted": "#9CA3AF",
                        "border-dark": "#2A2E3B"
                    },
                    fontFamily: {
                        display: "Epilogue",
                        body: ["Inter", "sans-serif"]
                    },
                    borderRadius: {
                        DEFAULT: "0.5rem",
                        lg: "1rem",
                        xl: "1.5rem",
                        full: "9999px"
                    }
                }
            }
        };
    </script>
<link href="https://fonts.googleapis.com/css2?family=Epilogue:wght@300;400;500;600;700&amp;display=swap" rel="stylesheet"/>
<link href="https://fonts.googleapis.com/css2?family=Material+Symbols+Outlined:wght,FILL@100..700,0..1&amp;display=swap" rel="stylesheet"/>
<style>
        body {
            font-family: 'Inter', sans-serif;
        }
        .hide-scrollbar::-webkit-scrollbar {
            display: none;
        }
        .hide-scrollbar {
            -ms-overflow-style: none;
            scrollbar-width: none;
        }
        #mobile-menu {
            transition: transform 0.3s ease-in-out;
        }
        .menu-open {
            transform: translateX(0) !important;
        }
        .video-overlay {
            background: linear-gradient(to top, rgba(0,0,0,0.9) 0%, rgba(0,0,0,0.5) 20%, transparent 100%);
        }
        input[type=range] {
            -webkit-appearance: none;
            background: transparent;
        }
        input[type=range]::-webkit-slider-thumb {
            -webkit-appearance: none;
            height: 12px;
            width: 12px;
            border-radius: 50%;
            background: #3B7A93;
            cursor: pointer;
            margin-top: -4px;
        }
        input[type=range]::-webkit-slider-runnable-track {
            width: 100%;
            height: 4px;
            cursor: pointer;
            background: rgba(255,255,255,0.3);
            border-radius: 2px;
        }
        .sticky-vote {
             backdrop-filter: blur(12px);
             -webkit-backdrop-filter: blur(12px);
        }
        .dropdown-enter {
            opacity: 0;
            transform: scale(0.95);
        }
        .dropdown-enter-active {
            opacity: 1;
            transform: scale(1);
            transition: opacity 100ms ease-out, transform 100ms ease-out;
        }
        .dropdown-scroll::-webkit-scrollbar {
            width: 6px;
        }
        .dropdown-scroll::-webkit-scrollbar-track {
            background: #151926; 
        }
        .dropdown-scroll::-webkit-scrollbar-thumb {
            background: #3B7A93; 
            border-radius: 3px;
        }
        @keyframes slideUp {
            from { transform: translateY(100%); opacity: 0; }
            to { transform: translateY(0); opacity: 1; }
        }
        @keyframes fadeIn {
            from { opacity: 0; }
            to { opacity: 1; }
        }
        /* Search Dropdown Scrollbar */
        #nav-search-dropdown #nav-suggestions-list,
        #mobile-search-dropdown #mobile-suggestions-list {
            max-height: 400px;
            overflow-y: auto;
        }
        #nav-search-dropdown #nav-suggestions-list::-webkit-scrollbar,
        #mobile-search-dropdown #mobile-suggestions-list::-webkit-scrollbar {
            width: 6px;
        }
        #nav-search-dropdown #nav-suggestions-list::-webkit-scrollbar-track,
        #mobile-search-dropdown #mobile-suggestions-list::-webkit-scrollbar-track {
            background: #151926;
        }
        #nav-search-dropdown #nav-suggestions-list::-webkit-scrollbar-thumb,
        #mobile-search-dropdown #mobile-suggestions-list::-webkit-scrollbar-thumb {
            background: #3B7A93;
            border-radius: 3px;
        }
        /* Custom scrollbar for episode containers */
        .custom-scrollbar::-webkit-scrollbar {
            width: 4px;
        }
        .custom-scrollbar::-webkit-scrollbar-track {
            background: #0B0E14;
        }
        .custom-scrollbar::-webkit-scrollbar-thumb {
            background: #3B7A93;
            border-radius: 2px;
        }
        /* Center player container */
        .player-container {
            margin-top: 1.5rem;
        }
        @media (min-width: 1024px) {
            .player-container {
                margin-top: 0;
            }
        }
    </style>
</head>
<body class="bg-background-light dark:bg-background-dark text-gray-900 dark:text-text-light transition-colors duration-300 min-h-screen flex flex-col relative">
<div class="fixed inset-0 bg-black/50 z-40 hidden lg:hidden" id="mobile-menu-overlay" onclick="toggleMobileMenu()"></div>
<div class="fixed top-0 left-0 h-full w-80 bg-white dark:bg-[#151926] z-50 transform -translate-x-full lg:hidden overflow-y-auto shadow-2xl transition-transform duration-300 ease-in-out" id="mobile-menu">
<div class="p-4 border-b border-gray-200 dark:border-gray-700 flex justify-between items-center sticky top-0 bg-inherit z-10">
<img alt="Quravel Logo" class="h-8 object-contain" src="https://cdn.imgchest.com/files/449aa5626e23.png"/>
<button class="text-gray-500 hover:text-primary" onclick="toggleMobileMenu()">
<span class="material-symbols-outlined">close</span>
</button>
</div>
<div class="p-4 space-y-2">
<a class="block text-base font-medium hover:text-primary py-3 border-b border-gray-100 dark:border-gray-800" href="#">Home</a>
<div class="border-b border-gray-100 dark:border-gray-800">
<button class="flex items-center justify-between w-full text-base font-medium hover:text-primary focus:outline-none py-3" onclick="toggleMobileDropdown('genre-mobile')">
<span>Genre</span>
<span class="material-symbols-outlined text-sm transform transition-transform duration-200" id="genre-arrow">expand_more</span>
</button>
<div class="hidden mt-1 mb-3 ml-2 grid grid-cols-2 gap-2 text-sm text-gray-500 dark:text-gray-400" id="genre-mobile">
<a class="block hover:text-primary" href="#">Action</a>
<a class="block hover:text-primary" href="#">Adventure</a>
<a class="block hover:text-primary" href="#">Cars</a>
<a class="block hover:text-primary" href="#">Comedy</a>
<a class="block hover:text-primary" href="#">Dementia</a>
<a class="block hover:text-primary" href="#">Demons</a>
<a class="block hover:text-primary" href="#">Drama</a>
<a class="block hover:text-primary" href="#">Ecchi</a>
<a class="block hover:text-primary" href="#">Fantasy</a>
<a class="block hover:text-primary" href="#">Game</a>
<a class="block hover:text-primary" href="#">Harem</a>
<a class="block hover:text-primary" href="#">Historical</a>
<a class="block hover:text-primary" href="#">Horror</a>
<a class="block hover:text-primary" href="#">Isekai</a>
<a class="block hover:text-primary" href="#">Josei</a>
<a class="block hover:text-primary" href="#">Kids</a>
<a class="block hover:text-primary" href="#">Magic</a>
<a class="block hover:text-primary" href="#">Martial Arts</a>
<a class="block hover:text-primary" href="#">Mecha</a>
<a class="block hover:text-primary" href="#">Military</a>
<a class="block hover:text-primary" href="#">Music</a>
<a class="block hover:text-primary" href="#">Mystery</a>
<a class="block hover:text-primary" href="#">Noir</a>
<a class="block hover:text-primary" href="#">Parody</a>
<a class="block hover:text-primary" href="#">Police</a>
<a class="block hover:text-primary" href="#">Psychological</a>
<a class="block hover:text-primary" href="#">Politic</a>
<a class="block hover:text-primary" href="#">Romance</a>
<a class="block hover:text-primary" href="#">Reality-Show</a>
<a class="block hover:text-primary" href="#">Reality-TV</a>
<a class="block hover:text-primary" href="#">Samurai</a>
<a class="block hover:text-primary" href="#">School</a>
<a class="block hover:text-primary" href="#">Sci-Fi</a>
<a class="block hover:text-primary" href="#">Seinen</a>
<a class="block hover:text-primary" href="#">Shoujo</a>
<a class="block hover:text-primary" href="#">Shoujo Ai</a>
<a class="block hover:text-primary" href="#">Shounen</a>
<a class="block hover:text-primary" href="#">Shounen Ai</a>
<a class="block hover:text-primary" href="#">Slice of Life</a>
<a class="block hover:text-primary" href="#">Space</a>
<a class="block hover:text-primary" href="#">Sports</a>
<a class="block hover:text-primary" href="#">Super Power</a>
<a class="block hover:text-primary" href="#">Supernatural</a>
<a class="block hover:text-primary" href="#">Thriller</a>
<a class="block hover:text-primary" href="#">Vampire</a>
<a class="block hover:text-primary" href="#">War</a>
</div>
</div>
<div class="border-b border-gray-100 dark:border-gray-800">
<button class="flex items-center justify-between w-full text-base font-medium hover:text-primary focus:outline-none py-3" onclick="toggleMobileDropdown('country-mobile')">
<span>Country</span>
<span class="material-symbols-outlined text-sm transform transition-transform duration-200" id="country-arrow">expand_more</span>
</button>
<div class="hidden mt-1 mb-3 ml-2 grid grid-cols-2 gap-2 text-sm text-gray-500 dark:text-gray-400" id="country-mobile">
<a class="block hover:text-primary" href="#">Afghanistan</a>
<a class="block hover:text-primary" href="#">Algeria</a>
<a class="block hover:text-primary" href="#">Argentina</a>
<a class="block hover:text-primary" href="#">Australia</a>
<a class="block hover:text-primary" href="#">Austria</a>
<a class="block hover:text-primary" href="#">Bangladesh</a>
<a class="block hover:text-primary" href="#">Belgium</a>
<a class="block hover:text-primary" href="#">Brazil</a>
<a class="block hover:text-primary" href="#">Canada</a>
<a class="block hover:text-primary" href="#">Chile</a>
<a class="block hover:text-primary" href="#">China</a>
<a class="block hover:text-primary" href="#">Colombia</a>
<a class="block hover:text-primary" href="#">Czechia</a>
<a class="block hover:text-primary" href="#">Denmark</a>
<a class="block hover:text-primary" href="#">Egypt</a>
<a class="block hover:text-primary" href="#">Finland</a>
<a class="block hover:text-primary" href="#">France</a>
<a class="block hover:text-primary" href="#">Germany</a>
<a class="block hover:text-primary" href="#">Greece</a>
<a class="block hover:text-primary" href="#">Hong Kong</a>
<a class="block hover:text-primary" href="#">Hungary</a>
<a class="block hover:text-primary" href="#">Iceland</a>
<a class="block hover:text-primary" href="#">India</a>
<a class="block hover:text-primary" href="#">Indonesia</a>
<a class="block hover:text-primary" href="#">Iran</a>
<a class="block hover:text-primary" href="#">Ireland</a>
<a class="block hover:text-primary" href="#">Israel</a>
<a class="block hover:text-primary" href="#">Italy</a>
<a class="block hover:text-primary" href="#">Japan</a>
<a class="block hover:text-primary" href="#">Mexico</a>
<a class="block hover:text-primary" href="#">Netherlands</a>
<a class="block hover:text-primary" href="#">New Zealand</a>
<a class="block hover:text-primary" href="#">Nigeria</a>
<a class="block hover:text-primary" href="#">Pakistan</a>
<a class="block hover:text-primary" href="#">Philippines</a>
<a class="block hover:text-primary" href="#">Poland</a>
<a class="block hover:text-primary" href="#">Russia</a>
<a class="block hover:text-primary" href="#">South Africa</a>
<a class="block hover:text-primary" href="#">Spain</a>
<a class="block hover:text-primary" href="#">Sweden</a>
<a class="block hover:text-primary" href="#">Taiwan</a>
<a class="block hover:text-primary" href="#">Thailand</a>
<a class="block hover:text-primary" href="#">Turkey</a>
<a class="block hover:text-primary" href="#">UK</a>
<a class="block hover:text-primary" href="#">USA</a>
</div>
</div>
<a class="block text-base font-medium hover:text-primary py-3 border-b border-gray-100 dark:border-gray-800" href="#">Top IMdb</a>
<a class="block text-base font-medium hover:text-primary py-3 border-b border-gray-100 dark:border-gray-800" href="#">Updates</a>
<a class="block text-base font-medium hover:text-primary py-3 border-b border-gray-100 dark:border-gray-800" href="https://editor.wix.com/wixel-view/forms/7405900275916997729">Sent Request</a>
</div>
</div>
<header class="fixed top-0 w-full z-40 bg-white/95 dark:bg-[#0B0E19]/95 backdrop-blur-sm border-b border-gray-200 dark:border-gray-800 shadow-sm">
<div class="container mx-auto px-4 h-16 flex items-center justify-between relative">
<div class="flex items-center gap-4">
<button class="lg:hidden text-gray-600 dark:text-gray-200 focus:outline-none" onclick="toggleMobileMenu()">
<span class="material-symbols-outlined text-3xl">menu</span>
</button>
<nav class="hidden lg:flex items-center space-x-6 text-sm font-medium">
<a class="hover:text-primary transition-colors text-gray-700 dark:text-gray-200" href="#">Home</a>
<div class="relative group">
<button class="flex items-center space-x-1 hover:text-primary transition-colors focus:outline-none py-5 text-gray-700 dark:text-gray-200">
<span>Genre</span>
<span class="material-symbols-outlined text-sm group-hover:rotate-180 transition-transform">expand_more</span>
</button>
<div class="absolute top-full left-0 w-[600px] bg-[#151926] border border-gray-800 rounded-b-xl shadow-2xl opacity-0 invisible group-hover:opacity-100 group-hover:visible transition-all duration-200 p-6 z-50 transform origin-top translate-y-2 group-hover:translate-y-0">
<div class="grid grid-cols-4 gap-y-3 gap-x-6">
<a class="hover:text-primary block text-sm text-gray-600 dark:text-gray-400" href="#">Adult</a>
<a class="hover:text-primary block text-sm text-gray-600 dark:text-gray-400" href="#">Cars</a>
<a class="hover:text-primary block text-sm text-gray-600 dark:text-gray-400" href="#">Comedy</a>
<a class="hover:text-primary block text-sm text-gray-600 dark:text-gray-400" href="#">Dementia</a>
<a class="hover:text-primary block text-sm text-gray-600 dark:text-gray-400" href="#">Demons</a>
<a class="hover:text-primary block text-sm text-gray-600 dark:text-gray-400" href="#">Drama</a>
<a class="hover:text-primary block text-sm text-gray-600 dark:text-gray-400" href="#">Ecchi</a>
<a class="hover:text-primary block text-sm text-gray-600 dark:text-gray-400" href="#">Fantasy</a>
<a class="hover:text-primary block text-sm text-gray-600 dark:text-gray-400" href="#">Game</a>
<a class="hover:text-primary block text-sm text-gray-600 dark:text-gray-400" href="#">Harem</a>
<a class="hover:text-primary block text-sm text-gray-600 dark:text-gray-400" href="#">Historical</a>
<a class="hover:text-primary block text-sm text-gray-600 dark:text-gray-400" href="#">Horror</a>
<a class="hover:text-primary block text-sm text-gray-600 dark:text-gray-400" href="#">Isekai</a>
<a class="hover:text-primary block text-sm text-gray-600 dark:text-gray-400" href="#">Josei</a>
<a class="hover:text-primary block text-sm text-gray-600 dark:text-gray-400" href="#">Kids</a>
<a class="hover:text-primary block text-sm text-gray-600 dark:text-gray-400" href="#">Magic</a>
<a class="hover:text-primary block text-sm text-gray-600 dark:text-gray-400" href="#">Martial Arts</a>
<a class="hover:text-primary block text-sm text-gray-600 dark:text-gray-400" href="#">Mecha</a>
<a class="hover:text-primary block text-sm text-gray-600 dark:text-gray-400" href="#">Military</a>
<a class="hover:text-primary block text-sm text-gray-600 dark:text-gray-400" href="#">Music</a>
<a class="hover:text-primary block text-sm text-gray-600 dark:text-gray-400" href="#">Mystery</a>
<a class="hover:text-primary block text-sm text-gray-600 dark:text-gray-400" href="#">Parody</a>
<a class="hover:text-primary block text-sm text-gray-600 dark:text-gray-400" href="#">Police</a>
<a class="hover:text-primary block text-sm text-gray-600 dark:text-gray-400" href="#">Politic</a>
<a class="hover:text-primary block text-sm text-gray-600 dark:text-gray-400" href="#">Psychological</a>
<a class="hover:text-primary block text-sm text-gray-600 dark:text-gray-400" href="#">Romance</a>
<a class="hover:text-primary block text-sm text-gray-600 dark:text-gray-400" href="#">Samurai</a>
<a class="hover:text-primary block text-sm text-gray-600 dark:text-gray-400" href="#">School</a>
<a class="hover:text-primary block text-sm text-gray-600 dark:text-gray-400" href="#">Sci-Fi</a>
<a class="hover:text-primary block text-sm text-gray-600 dark:text-gray-400" href="#">Seinen</a>
<a class="hover:text-primary block text-sm text-gray-600 dark:text-gray-400" href="#">Shoujo</a>
<a class="hover:text-primary block text-sm text-gray-600 dark:text-gray-400" href="#">Shoujo Ai</a>
<a class="hover:text-primary block text-sm text-gray-600 dark:text-gray-400" href="#">Shounen</a>
<a class="hover:text-primary block text-sm text-gray-600 dark:text-gray-400" href="#">Shounen Ai</a>
<a class="hover:text-primary block text-sm text-gray-600 dark:text-gray-400" href="#">Slice of Life</a>
<a class="hover:text-primary block text-sm text-gray-600 dark:text-gray-400" href="#">Space</a>
<a class="hover:text-primary block text-sm text-gray-600 dark:text-gray-400" href="#">Sports</a>
<a class="hover:text-primary block text-sm text-gray-600 dark:text-gray-400" href="#">Super Power</a>
<a class="hover:text-primary block text-sm text-gray-600 dark:text-gray-400" href="#">Supernatural</a>
<a class="hover:text-primary block text-sm text-gray-600 dark:text-gray-400" href="#">Thriller</a>
<a class="hover:text-primary block text-sm text-gray-600 dark:text-gray-400" href="#">Vampire</a>
<a class="hover:text-primary block text-sm text-gray-600 dark:text-gray-400" href="#">War</a>
</div>
</div>
</div>
<div class="relative group">
<button class="flex items-center space-x-1 hover:text-primary transition-colors focus:outline-none py-5 text-gray-700 dark:text-gray-200">
<span>Country</span>
<span class="material-symbols-outlined text-sm group-hover:rotate-180 transition-transform">expand_more</span>
</button>
<div class="absolute top-full left-0 w-[600px] bg-[#151926] border border-gray-800 rounded-b-xl shadow-2xl opacity-0 invisible group-hover:opacity-100 group-hover:visible transition-all duration-200 p-6 z-50 transform origin-top translate-y-2 group-hover:translate-y-0">
<div class="grid grid-cols-4 gap-y-3 gap-x-6">
<a class="text-gray-400 hover:text-primary text-sm transition-colors" href="#">Argentina</a>
<a class="text-gray-400 hover:text-primary text-sm transition-colors" href="#">Australia</a>
<a class="text-gray-400 hover:text-primary text-sm transition-colors" href="#">Austria</a>
<a class="text-gray-400 hover:text-primary text-sm transition-colors" href="#">Belgium</a>
<a class="text-gray-400 hover:text-primary text-sm transition-colors" href="#">Brazil</a>
<a class="text-gray-400 hover:text-primary text-sm transition-colors" href="#">Canada</a>
<a class="text-gray-400 hover:text-primary text-sm transition-colors" href="#">China</a>
<a class="text-gray-400 hover:text-primary text-sm transition-colors" href="#">Colombia</a>
<a class="text-gray-400 hover:text-primary text-sm transition-colors" href="#">Czech Republic</a>
<a class="text-gray-400 hover:text-primary text-sm transition-colors" href="#">Denmark</a>
<a class="text-gray-400 hover:text-primary text-sm transition-colors" href="#">Finland</a>
<a class="text-gray-400 hover:text-primary text-sm transition-colors" href="#">France</a>
<a class="text-gray-400 hover:text-primary text-sm transition-colors" href="#">Germany</a>
<a class="text-gray-400 hover:text-primary text-sm transition-colors" href="#">Hong Kong</a>
<a class="text-gray-400 hover:text-primary text-sm transition-colors" href="#">Hungary</a>
<a class="text-gray-400 hover:text-primary text-sm transition-colors" href="#">India</a>
<a class="text-gray-400 hover:text-primary text-sm transition-colors" href="#">Ireland</a>
<a class="text-gray-400 hover:text-primary text-sm transition-colors" href="#">Israel</a>
<a class="text-gray-400 hover:text-primary text-sm transition-colors" href="#">Italy</a>
<a class="text-gray-400 hover:text-primary text-sm transition-colors" href="#">Japan</a>
<a class="text-gray-400 hover:text-primary text-sm transition-colors" href="#">Luxembourg</a>
<a class="text-gray-400 hover:text-primary text-sm transition-colors" href="#">Mexico</a>
<a class="text-gray-400 hover:text-primary text-sm transition-colors" href="#">Netherlands</a>
<a class="text-gray-400 hover:text-primary text-sm transition-colors" href="#">New Zealand</a>
<a class="text-gray-400 hover:text-primary text-sm transition-colors" href="#">Nigeria</a>
<a class="text-gray-400 hover:text-primary text-sm transition-colors" href="#">Norway</a>
<a class="text-gray-400 hover:text-primary text-sm transition-colors" href="#">Philippines</a>
<a class="text-gray-400 hover:text-primary text-sm transition-colors" href="#">Poland</a>
<a class="text-gray-400 hover:text-primary text-sm transition-colors" href="#">Romania</a>
<a class="text-gray-400 hover:text-primary text-sm transition-colors" href="#">Russia</a>
<a class="text-gray-400 hover:text-primary text-sm transition-colors" href="#">South Africa</a>
<a class="text-gray-400 hover:text-primary text-sm transition-colors" href="#">South Korea</a>
<a class="text-gray-400 hover:text-primary text-sm transition-colors" href="#">Spain</a>
<a class="text-gray-400 hover:text-primary text-sm transition-colors" href="#">Sweden</a>
<a class="text-gray-400 hover:text-primary text-sm transition-colors" href="#">Switzerland</a>
<a class="text-gray-400 hover:text-primary text-sm transition-colors" href="#">Taiwan</a>
<a class="text-gray-400 hover:text-primary text-sm transition-colors" href="#">Thailand</a>
<a class="text-gray-400 hover:text-primary text-sm transition-colors" href="#">Turkey</a>
<a class="text-gray-400 hover:text-primary text-sm transition-colors" href="#">United Kingdom</a>
<a class="text-gray-400 hover:text-primary text-sm transition-colors" href="#">United States</a>
</div>
</div>
</div>
<a class="hover:text-primary transition-colors text-gray-700 dark:text-gray-200" href="#">Top IMDb</a>
<a class="hover:text-primary transition-colors text-gray-700 dark:text-gray-200" href="#">Updates</a>
<a class="hover:text-primary transition-colors text-gray-700 dark:text-gray-200" href="https://editor.wix.com/wixel-view/forms/7405900275916997729">Sent Request</a>
</nav>
</div>
<div class="absolute left-1/2 transform -translate-x-1/2">
<a class="flex-shrink-0" href="/">
<img alt="Quravel Logo" class="h-8 md:h-10 object-contain" src="https://lh3.googleusercontent.com/aida-public/AB6AXuDXN3Hca3aWuGXtAbGxqQetPT522nNIBOg8RIjyziH6DgWG1mCTHDBPTao5XsjL8w8YYRVT609JpnQcZYrYrz2BrXdcEwxEHs4FjwLpWao87awQ2ITZSp_mKq4hYsfpo2vGQ0chZtQX1Q8bZFFuZVc5e-qapTaRnRhNPUXW4LPkZV8HfOrMTfcBAQGyDW-2X27GvaNvkq10et6LTlDY7N4eLzy71hMCGFPumK2bSs13laqeYRhYX1GI6lpaRPweUyIJUWiny3_If0I"/>
</a>
</div>
<div class="flex items-center">
<!-- Desktop Search Bar -->
<div class="hidden lg:block relative max-w-xl mx-auto w-full px-4">
    <div class="flex items-center bg-surface-dark rounded-full px-5 py-2 border border-gray-700 focus-within:border-primary transition">
        <span class="material-symbols-outlined text-gray-400 mr-3">search</span>
        <input type="text" id="nav-search-input" placeholder="Search movies, anime..." 
               class="bg-transparent border-none focus:ring-0 w-full text-white outline-none py-2 text-sm">
    </div>
    
    <div id="nav-search-dropdown" class="absolute hidden w-[calc(100%-2rem)] left-4 bg-surface-dark mt-2 rounded-xl shadow-2xl z-[100] overflow-hidden border border-gray-700">
        <div id="nav-suggestions-list" class="max-h-96 overflow-y-auto"></div>
        <a id="nav-view-all-btn" href="/search" class="block w-full text-center p-3 bg-primary text-white font-bold hover:bg-opacity-90 transition text-sm">
            View All Results
        </a>
    </div>
</div>

<!-- Mobile Search Button -->
<button class="lg:hidden text-gray-600 dark:text-gray-200 ml-4" onclick="toggleMobileSearch()">
<span class="material-symbols-outlined">search</span>
</button>
</div>
</div>
<!-- Mobile Search Bar -->
<div class="hidden lg:hidden bg-white dark:bg-[#0B0E19] border-b border-gray-200 dark:border-gray-800 p-4 absolute w-full top-16 left-0 z-30" id="mobile-search-bar">
<div class="relative max-w-full mx-auto">
    <div class="flex items-center bg-surface-dark rounded-full px-5 py-2 border border-gray-700 focus-within:border-primary transition">
        <span class="material-symbols-outlined text-gray-400 mr-3">search</span>
        <input type="text" id="mobile-search-input" placeholder="Search movies, anime..." 
               class="bg-transparent border-none focus:ring-0 w-full text-white outline-none py-2 text-sm">
    </div>
    
    <div id="mobile-search-dropdown" class="absolute hidden w-full bg-surface-dark mt-2 rounded-xl shadow-2xl z-[100] overflow-hidden border border-gray-700">
        <div id="mobile-suggestions-list" class="max-h-80 overflow-y-auto"></div>
        <a id="mobile-view-all-btn" href="/search" class="block w-full text-center p-3 bg-primary text-white font-bold hover:bg-opacity-90 transition text-sm">
            View All Results
        </a>
    </div>
</div>
</div>
</header>
<main class="flex-grow pt-16 pb-24 lg:pb-12 bg-[#0B0E14]">
<!-- 11ty Template Integration Start -->
{% if post %}
<div class="container mx-auto px-4 lg:px-0">
    <div class="grid grid-cols-1 lg:grid-cols-3 gap-8 player-container">
        <!-- Left Column - Video Player (Top Center) -->
        <div class="lg:col-span-2">
            <div class="aspect-video bg-black rounded-xl overflow-hidden shadow-2xl">
                <iframe id="main-player" src="" class="w-full h-full" allowfullscreen></iframe>
            </div>

            <div class="flex gap-4 mt-6 p-4 bg-surface-dark rounded-lg">
                <span class="text-gray-400 self-center mr-2">Server:</span>
                <button onclick="setServer('sub')" id="btn-sub" class="server-btn bg-primary px-6 py-2 rounded font-bold">Sub</button>
                <button onclick="setServer('dub')" id="btn-dub" class="server-btn bg-gray-800 px-6 py-2 rounded font-bold">Dub</button>
                <button onclick="setServer('raw')" id="btn-raw" class="server-btn bg-gray-800 px-6 py-2 rounded font-bold">Raw</button>
            </div>
            
            <!-- Movie Content (if type is movie) -->
            {% if post.type == 'movie' %}
            <div class="mt-8 bg-surface-dark rounded-xl p-6">
                <div class="flex items-center justify-between mb-4">
                    <h2 class="text-xl font-bold text-white">{{ post.title }}</h2>
                    <span class="text-[10px] bg-primary/20 text-primary px-2 py-0.5 rounded uppercase tracking-widest font-bold">
                        {{ post.status | default('HD') }}
                    </span>
                </div>
                <div class="flex flex-wrap gap-2 mb-4">
                    {% if post.genres %}
                        {% for genre in post.genres %}
                        <span class="text-xs bg-gray-800 text-gray-300 px-2 py-1 rounded">{{ genre }}</span>
                        {% endfor %}
                    {% endif %}
                </div>
                <p class="text-gray-300 text-sm">{{ post.description | default('No description available.') }}</p>
            </div>
            {% endif %}
        </div>

        <!-- Right Column - Episodes/Seasons -->
        <div class="space-y-8">
            <!-- Episodes Section -->
            {% if post.type == 'series' %}
            <div class="bg-surface-dark rounded-xl p-4 md:p-6 border border-gray-800">
                <div class="flex items-center justify-between mb-4">
                    <h2 class="text-lg font-bold text-white">Episodes</h2>
                    <span class="text-[10px] bg-primary/20 text-primary px-2 py-0.5 rounded uppercase tracking-widest font-bold">
                        {{ post.status | default('Ongoing') }}
                    </span>
                </div>

                {% if post.seasons and post.seasons.length > 1 %}
                <div class="mb-4">
                    <div class="relative">
                        <select id="season-select" onchange="changeSeason(this.value)" 
                                class="w-full bg-background-dark border border-gray-700 rounded-lg py-2.5 px-4 text-sm text-white appearance-none focus:border-primary outline-none transition-colors">
                            {% for season in post.seasons %}
                                <option value="{{ loop.index0 }}">Season {{ season.seasonNumber }}</option>
                            {% endfor %}
                        </select>
                        <span class="material-symbols-outlined absolute right-3 top-2.5 text-gray-500 pointer-events-none">expand_more</span>
                    </div>
                </div>
                {% endif %}

                <div id="episode-container" class="space-y-2 max-h-[400px] overflow-y-auto pr-2 custom-scrollbar">
                    <!-- Episodes will be rendered here by JavaScript -->
                </div>
            </div>
            {% endif %}

           <!-- Most Popular Section (Connected to 11ty) -->
<div class="bg-[#151926] rounded-xl p-4 border border-gray-800">
    <h3 class="text-white font-bold mb-4 text-lg">Most Popular</h3>
    <div class="space-y-4" id="most-popular-list">
        {% set popularShows = collections.popularShows or [] %}
        {% if popularShows.length > 0 %}
            {% for show in popularShows | slice(0, 5) %}
            <a class="flex gap-3 group" href="/watch/{{ show.data.title | slugify }}/">
                <div class="w-16 h-20 rounded-md overflow-hidden flex-shrink-0">
                    <img class="w-full h-full object-cover group-hover:scale-110 transition-transform duration-300" 
                         src="{{ show.data.poster }}" 
                         alt="{{ show.data.title }}"
                         onerror="this.src='https://via.placeholder.com/64x80?text=No+Image'"/>
                </div>
                <div class="flex flex-col justify-center flex-1">
                    <h4 class="text-white font-medium text-sm line-clamp-1 group-hover:text-primary transition-colors">
                        {{ show.data.title }}
                    </h4>
                    <div class="flex items-center gap-2 mt-2">
                        <span class="bg-green-500/20 text-green-400 text-[10px] px-1.5 py-0.5 rounded flex items-center gap-1">
                            <span class="material-symbols-outlined text-[10px]">visibility</span> 
                            {{ show.data.views | default('1.2K') }}
                        </span>
                        <span class="text-gray-500 text-xs">• {{ show.data.type | default('TV') }}</span>
                    </div>
                </div>
                <span class="material-symbols-outlined text-gray-600 self-center">add</span>
            </a>
            {% endfor %}
        {% else %}
            <!-- Fallback if no popularShows data -->
            <div class="text-gray-500 text-sm text-center py-4">No popular shows available</div>
        {% endif %}
    </div>
</div>

            <!-- Recommended for You Section (Connected to 11ty) -->
<div class="bg-[#151926] rounded-xl p-4 border border-gray-800">
    <h3 class="text-white font-bold mb-4 text-lg">Recommended for you</h3>
    <div class="grid grid-cols-3 gap-2" id="recommended-list">
        {% set recommendedShows = collections.recommendedShows or [] %}
        {% if recommendedShows.length > 0 %}
            {% for show in recommendedShows | slice(0, 6) %}
            <a href="/watch/{{ show.data.title | slugify }}/" class="group cursor-pointer">
                <div class="relative aspect-[2/3] rounded-lg overflow-hidden mb-2">
                    <img class="w-full h-full object-cover group-hover:scale-105 transition-transform duration-300" 
                         src="{{ show.data.poster }}" 
                         alt="{{ show.data.title }}"
                         onerror="this.src='https://via.placeholder.com/150x225?text=No+Image'"/>
                    <div class="absolute top-1 right-1 bg-primary/90 text-white text-[9px] font-bold px-1 rounded">HD</div>
                    <div class="absolute bottom-0 left-0 w-full bg-gradient-to-t from-black/80 to-transparent p-1">
                        <span class="text-white text-[10px]">
                            {% if show.data.type == 'movie' %}
                                Movie
                            {% else %}
                                {{ show.data.episodeCount | default('12') }} Eps
                            {% endif %}
                        </span>
                    </div>
                    <div class="absolute inset-0 bg-black/40 flex items-center justify-center opacity-0 group-hover:opacity-100 transition-opacity">
                        <span class="material-symbols-outlined text-white text-3xl">play_circle</span>
                    </div>
                </div>
                <h4 class="text-white text-xs font-semibold line-clamp-1 group-hover:text-primary">{{ show.data.title }}</h4>
                <div class="flex justify-between text-[10px] text-gray-500">
                    <span>{% if show.data.type == 'movie' %}Movie{% else %}TV{% endif %}</span>
                    <span>{{ show.data.duration | default('24m') }}</span>
                </div>
            </a>
            {% endfor %}
        {% else %}
            <!-- Fallback if no recommendedShows data -->
            <div class="col-span-3 text-gray-500 text-sm text-center py-4">No recommendations available</div>
        {% endif %}
    </div>
</div>
        </div>
    </div>

    <!-- Additional Content (Comments, Rating, etc.) -->
    {% if post.type == 'series' %}
    <div class="mt-8 border-t border-gray-800 pt-8">
        <div class="flex items-center justify-between mb-6">
            <div class="flex items-center gap-4">
                <h3 class="text-primary text-xl font-bold">Comments</h3>
                <span class="text-gray-500 text-sm" id="comment-count">0 Comments</span>
            </div>
            <div class="flex items-center gap-4">
                <a class="text-xs text-white border border-gray-700 px-2 py-1 rounded hover:border-primary" href="#">Community Guidelines</a>
            </div>
        </div>
        <div class="flex gap-4 mb-8">
            <div class="w-10 h-10 rounded-full bg-primary/20 flex items-center justify-center text-primary font-bold flex-shrink-0">G</div>
            <div class="flex-1 relative">
                <textarea class="w-full bg-[#151926] border border-gray-700 rounded-lg p-3 text-gray-300 focus:outline-none focus:border-primary h-24 resize-none" id="comment-input" maxlength="500" placeholder="Leave a public comment..."></textarea>
                <div class="flex justify-between items-center mt-2">
                    <span class="text-xs text-gray-500 ml-1" id="char-counter">500 characters remaining</span>
                    <button class="bg-primary hover:bg-primary-dark text-white px-4 py-2 rounded text-sm font-semibold transition-colors" onclick="postComment()">Post Comment</button>
                </div>
            </div>
        </div>
        <div class="space-y-6" id="comments-container">
        </div>
    </div>
    {% endif %}
</div>

<script>
    // This data comes from your posts.json via 11ty
    {% if post %}
    const postData = {{ post | json | safe }};
    {% else %}
    const postData = {};
    {% endif %}
    let currentSeasonIdx = 0; // Default to the first season
    let currentServer = 'sub';
    let currentEpisodeIdx = 0;

    function initStreaming() {
        // If it's a series, render the first season's episodes
        if (postData.type === 'series' && postData.seasons && postData.seasons.length > 0) {
            renderEpisodes(currentSeasonIdx);
            if (postData.seasons.length === 1) {
                // Hide season selector if only one season
                const seasonSelect = document.getElementById('season-select');
                if (seasonSelect) {
                    seasonSelect.parentElement.classList.add('hidden');
                }
            }
        } else if (postData.type === 'movie') {
            // Just load the movie link directly
            loadMovie();
        }
        // Initialize player with first episode
        updatePlayer();
    }

    function renderEpisodes(sIdx) {
        const container = document.getElementById('episode-container');
        if (!container || !postData.seasons || !postData.seasons[sIdx]) return;
        
        const episodes = postData.seasons[sIdx].episodes;
        
        container.innerHTML = episodes.map(ep => `
            <button onclick="playEpisode(${ep.number - 1})" class="w-full flex items-center p-3 rounded-lg bg-background-dark/50 hover:bg-primary/10 border border-gray-800 hover:border-primary/30 transition-all text-left group">
                <div class="w-8 h-8 rounded bg-gray-800 flex items-center justify-center text-xs font-bold mr-3 group-hover:text-primary">
                    ${ep.number}
                </div>
                <div class="flex-1 truncate">
                    <p class="text-sm font-medium truncate">${ep.title || 'Episode ' + ep.number}</p>
                    <p class="text-[10px] text-gray-500">${ep.duration || '24m'}</p>
                </div>
            </button>
        `).join('');
    }

    function playEpisode(epIdx) {
        currentEpisodeIdx = epIdx;
        updatePlayer();
        
        // Update active state in UI
        const buttons = document.querySelectorAll('#episode-container button');
        buttons.forEach((btn, idx) => {
            if (idx === epIdx) {
                btn.classList.add('bg-primary/20', 'border-primary/50');
                btn.classList.remove('bg-background-dark/50', 'hover:bg-primary/10');
            } else {
                btn.classList.remove('bg-primary/20', 'border-primary/50');
                btn.classList.add('bg-background-dark/50', 'hover:bg-primary/10');
            }
        });
    }

    function changeSeason(idx) {
        currentSeasonIdx = parseInt(idx);
        currentEpisodeIdx = 0; // Reset to first episode
        renderEpisodes(currentSeasonIdx);
        updatePlayer();
    }

    function updatePlayer() {
        const player = document.getElementById('main-player');
        if (!player) return;
        
        if (postData.type === 'movie') {
            // Load movie URL
            const movieUrl = postData.movieUrl || (postData.servers && postData.servers.sub) || '';
            if (movieUrl) {
                player.src = movieUrl;
            }
        } else if (postData.type === 'series' && postData.seasons && postData.seasons[currentSeasonIdx]) {
            const season = postData.seasons[currentSeasonIdx];
            const episode = season.episodes && season.episodes[currentEpisodeIdx];
            
            if (episode && episode.servers) {
                // Safety check if server type exists
                const streamUrl = episode.servers[currentServer] || Object.values(episode.servers)[0];
                if (streamUrl) {
                    player.src = streamUrl;
                }
            }
        }

        // Update Server Button UI
        document.querySelectorAll('.server-btn').forEach(btn => btn.classList.replace('bg-primary', 'bg-gray-800'));
        const serverBtn = document.getElementById(`btn-${currentServer}`);
        if (serverBtn) {
            serverBtn.classList.replace('bg-gray-800', 'bg-primary');
        }
    }

    function setServer(type) {
        currentServer = type;
        updatePlayer();
    }

    function loadMovie() {
        // Movie-specific initialization
        const playBtn = document.createElement('button');
        playBtn.className = 'bg-primary hover:bg-primary-dark text-white px-8 py-3 rounded-lg font-bold mt-4 transition-colors';
        playBtn.textContent = 'Watch Now';
        playBtn.onclick = updatePlayer;
        
        const container = document.getElementById('episode-container');
        if (container) {
            container.innerHTML = '';
            container.appendChild(playBtn);
        }
    }

    // Call on load
    document.addEventListener('DOMContentLoaded', initStreaming);
</script>
{% else %}
<!-- Original Content (for when 11ty data is not available) -->
<div class="container mx-auto px-0 lg:px-4 mt-0 lg:mt-6">
<div class="grid grid-cols-1 lg:grid-cols-[1fr_350px] gap-8">
<div class="flex flex-col space-y-6">
<div class="relative w-full aspect-video bg-black lg:rounded-xl overflow-hidden group select-none">
<img alt="Video Content" class="w-full h-full object-cover opacity-60" src="https://lh3.googleusercontent.com/aida-public/AB6AXuD_WkTZM5ZJ-NmTWR2UarTBAlvQ7P9ypGwIngTqhz3x53h75oR2QehaiVHXzaZ4EdTlD7DKAbSY7ijEe53JM_Qy1bCiQ3scMkoeKM9P21Jul1ZTTeMx413_PevdOcmb47ryU920sKnA0ByZk2G-iqk0KmNn00obvswj1ep1sci1GkIQQ-ubl71d6VMhb-nRWkRCP4MgrN6zw5y4oW0kuIIRp48E3CwPOGW8HgQ-oHGsUk5CKPiXemUd6XhmHr4YMs6lRbqCLMOQLck"/>
<div class="absolute bottom-16 w-full text-center px-4 z-10">
<p class="text-white text-sm lg:text-lg font-medium drop-shadow-md bg-black/50 inline-block px-2 rounded">I will make a rational choice based on justice.</p>
</div>
<div class="absolute inset-0 flex flex-col justify-between p-4 video-overlay">
<div class="flex justify-between items-start text-white">
<div class="flex items-center gap-4">
<button class="hover:text-primary transition-colors"><span class="material-symbols-outlined text-3xl">arrow_back</span></button>
<div>
<h1 class="font-bold text-sm lg:text-lg line-clamp-1" id="video-title">Chainsaw Man - Episode 1</h1>
</div>
</div>
<div class="flex gap-4">
<button class="hover:text-primary"><span class="material-symbols-outlined">cast</span></button>
<button class="hover:text-primary"><span class="material-symbols-outlined">airplay</span></button>
</div>
</div>
<div class="absolute inset-0 flex items-center justify-center pointer-events-none">
<button class="pointer-events-auto text-white hover:text-primary transform transition-transform hover:scale-110">
<span class="material-symbols-outlined text-7xl lg:text-8xl drop-shadow-lg">play_circle</span>
</button>
</div>
<div class="flex flex-col gap-2 mb-1">
<div class="w-full h-1 bg-gray-600 rounded-full cursor-pointer relative group/progress">
<div class="absolute top-0 left-0 h-full bg-primary w-[35%] rounded-full z-10"></div>
<div class="absolute top-0 left-0 h-full bg-white/30 w-[60%] rounded-full"></div>
<div class="absolute top-1/2 -translate-y-1/2 left-[35%] w-3 h-3 bg-white rounded-full scale-0 group-hover/progress:scale-100 transition-transform z-20"></div>
</div>
<div class="flex justify-between items-center text-white mt-2">
<div class="flex items-center gap-4">
<button class="hover:text-primary"><span class="material-symbols-outlined">volume_up</span></button>
<span class="text-xs font-mono text-gray-300">09:21 / 24:00</span>
</div>
<div class="flex items-center gap-4 lg:gap-6">
<button class="hover:text-primary flex items-center gap-1 text-xs font-medium"><span class="material-symbols-outlined">replay_10</span></button>
<button class="hover:text-primary flex items-center gap-1 text-xs font-medium"><span class="material-symbols-outlined">forward_10</span></button>
<button class="hover:text-primary bg-white/10 px-1 rounded text-xs font-bold border border-white/20">CC</button>
<button class="hover:text-primary"><span class="material-symbols-outlined">settings</span></button>
<button class="hover:text-primary"><span class="material-symbols-outlined">fullscreen</span></button>
</div>
</div>
</div>
</div>
</div>
<div class="px-4 lg:px-0 text-center">
<p class="text-gray-400 text-sm mb-1">You are watching</p>
<h2 class="text-xl lg:text-2xl font-bold text-white mb-2" id="main-series-title">Chainsaw Man <span class="text-primary font-normal text-lg ml-2" id="season-display">Season 1</span></h2>
<h3 class="text-lg font-bold text-white mb-2">Episode <span class="text-primary" id="current-ep-num">1</span></h3>
<div class="flex justify-center items-center gap-4 mb-4 mt-4 relative">
<button class="bg-[#1E2232] hover:bg-primary text-white px-4 py-2 rounded-lg flex items-center gap-1 text-sm font-medium transition-colors disabled:opacity-50 disabled:cursor-not-allowed" id="prev-ep-btn">
<span class="material-symbols-outlined text-sm">arrow_back_ios</span> Previous
                            </button>
<div class="relative">
<button class="bg-primary hover:bg-primary-dark text-white px-4 py-2 rounded-lg flex items-center gap-2 text-sm font-medium transition-colors shadow-lg shadow-primary/20" id="add-list-btn">
<span class="material-symbols-outlined text-sm">add_to_queue</span> Add to list
                                </button>
<div class="hidden absolute top-full left-1/2 -translate-x-1/2 mt-2 w-48 bg-[#1E2232] border border-gray-700 rounded-lg shadow-xl z-50 overflow-hidden text-left" id="add-list-dropdown">
<button class="block w-full text-left px-4 py-2 text-sm text-gray-300 hover:bg-primary hover:text-white transition-colors" onclick="setListStatus('Planning to watch')">Planning to watch</button>
<button class="block w-full text-left px-4 py-2 text-sm text-gray-300 hover:bg-primary hover:text-white transition-colors" onclick="setListStatus('Watching')">Watching</button>
<button class="block w-full text-left px-4 py-2 text-sm text-gray-300 hover:bg-primary hover:text-white transition-colors" onclick="setListStatus('Completed')">Completed</button>
<button class="block w-full text-left px-4 py-2 text-sm text-gray-300 hover:bg-primary hover:text-white transition-colors" onclick="setListStatus('Re-watching')">Re-watching</button>
<button class="block w-full text-left px-4 py-2 text-sm text-gray-300 hover:bg-primary hover:text-white transition-colors" onclick="setListStatus('Dropped')">Dropped</button>
<div class="border-t border-gray-700 my-1"></div>
<button class="block w-full text-left px-4 py-2 text-sm text-red-400 hover:bg-red-500 hover:text-white transition-colors" onclick="setListStatus('Remove')">Remove from list</button>
</div>
</div>
<button class="bg-[#1E2232] hover:bg-primary text-white px-4 py-2 rounded-lg flex items-center gap-1 text-sm font-medium transition-colors" id="next-ep-btn">
                                Next <span class="material-symbols-outlined text-sm">arrow_forward_ios</span>
</button>
</div>
<p class="text-xs text-gray-500 mb-6">If current server doesn't work please try other servers beside.</p>
<div class="bg-[#151926] p-4 rounded-xl border border-gray-800 space-y-4 text-left">
<div class="flex items-center gap-3">
<div class="flex items-center gap-2 w-16 text-gray-300 font-bold text-sm shrink-0">
<span class="bg-primary/20 text-primary px-1 rounded text-[10px]">CC</span> SUB:
                                </div>
<div class="flex-1 overflow-x-auto hide-scrollbar flex gap-2" id="server-row-sub">
<button class="server-btn active whitespace-nowrap px-4 py-1.5 rounded bg-primary text-white text-xs font-bold shadow-lg shadow-primary/20 transition-colors" onclick="selectServer('sub', 1)">HD-1</button>
<button class="server-btn whitespace-nowrap px-4 py-1.5 rounded bg-[#1E2232] hover:bg-[#2A2E3B] text-gray-300 text-xs font-bold transition-colors" onclick="selectServer('sub', 2)">HD-2</button>
<button class="server-btn whitespace-nowrap px-4 py-1.5 rounded bg-[#1E2232] hover:bg-[#2A2E3B] text-gray-300 text-xs font-bold transition-colors" onclick="selectServer('sub', 3)">HD-3</button>
</div>
</div>
<div class="flex items-center gap-3">
<div class="flex items-center gap-2 w-16 text-gray-300 font-bold text-sm shrink-0">
<span class="material-symbols-outlined text-sm text-primary">mic</span> DUB:
                                </div>
<div class="flex-1 overflow-x-auto hide-scrollbar flex gap-2" id="server-row-dub">
<button class="server-btn whitespace-nowrap px-4 py-1.5 rounded bg-[#1E2232] hover:bg-[#2A2E3B] text-gray-300 text-xs font-bold transition-colors" onclick="selectServer('dub', 1)">HD-1</button>
<button class="server-btn whitespace-nowrap px-4 py-1.5 rounded bg-[#1E2232] hover:bg-[#2A2E3B] text-gray-300 text-xs font-bold transition-colors" onclick="selectServer('dub', 2)">HD-2</button>
<button class="server-btn whitespace-nowrap px-4 py-1.5 rounded bg-[#1E2232] hover:bg-[#2A2E3B] text-gray-300 text-xs font-bold transition-colors" onclick="selectServer('dub', 3)">HD-3</button>
</div>
</div>
<div class="flex items-center gap-3">
<div class="flex items-center gap-2 w-16 text-gray-300 font-bold text-sm shrink-0">
<span class="material-symbols-outlined text-sm text-primary">raw_on</span> RAW:
                                </div>
<div class="flex-1 overflow-x-auto hide-scrollbar flex gap-2" id="server-row-raw">
<button class="server-btn whitespace-nowrap px-4 py-1.5 rounded bg-[#1E2232] hover:bg-[#2A2E3B] text-gray-300 text-xs font-bold transition-colors" onclick="selectServer('raw', 1)">HD-1</button>
<button class="server-btn whitespace-nowrap px-4 py-1.5 rounded bg-[#1E2232] hover:bg-[#2A2E3B] text-gray-300 text-xs font-bold transition-colors" onclick="selectServer('raw', 2)">HD-2</button>
<button class="server-btn whitespace-nowrap px-4 py-1.5 rounded bg-[#1E2232] hover:bg-[#2A2E3B] text-gray-300 text-xs font-bold transition-colors" onclick="selectServer('raw', 3)">HD-3</button>
</div>
</div>
</div>
</div>
<div class="px-4 lg:px-0">
<h3 class="text-white font-semibold mb-4 text-base lg:text-lg">Watch more seasons of this anime</h3>
<div class="grid grid-cols-2 lg:grid-cols-4 gap-3" id="season-container">
<div class="season-card relative h-16 rounded-lg overflow-hidden group cursor-pointer ring-1 ring-primary/50" onclick="changeSeason('Season 1')">
<img class="w-full h-full object-cover opacity-50 group-hover:opacity-40 transition-opacity blur-[2px]" src="https://lh3.googleusercontent.com/aida-public/AB6AXuD_WkTZM5ZJ-NmTWR2UarTBAlvQ7P9ypGwIngTqhz3x53h75oR2QehaiVHXzaZ4EdTlD7DKAbSY7ijEe53JM_Qy1bCiQ3scMkoeKM9P21Jul1ZTTeMx413_PevdOcmb47ryU920sKnA0ByZk2G-iqk0KmNn00obvswj1ep1sci1GkIQQ-ubl71d6VMhb-nRWkRCP4MgrN6zw5y4oW0kuIIRp48E3CwPOGW8HgQ-oHGsUk5CKPiXemUd6XhmHr4YMs6lRbqCLMOQLck"/>
<div class="absolute inset-0 bg-black/40 flex items-center justify-center">
<span class="text-primary font-bold text-sm drop-shadow-md season-text">Season 1</span>
</div>
</div>
<div class="season-card relative h-16 rounded-lg overflow-hidden group cursor-pointer" onclick="changeSeason('OVA')">
<img class="w-full h-full object-cover opacity-50 group-hover:opacity-40 transition-opacity blur-[2px]" src="https://lh3.googleusercontent.com/aida-public/AB6AXuAzerY61qC186ZrDmNWuuvfzsInQUXqpzZBXGocDCSDc8G6dkuudM9znlZjRVTrtuhrFOfgGh6P9th0-dpRU77RABblX3VSV_Q6Y5c71hrA6wIhBFayWKz7NOp2WJ0Jt3qQpF8QgWy9m96nHVrDVJwqDbw10EmlSLX1MSwrXAY428EHqbaVXqeHsL8K2hKrdnDAb2XELmvdoLtqPlme9aOoIGft4CCRVr8crsbUr5hJ95xCkMkPznKI8VcmxVEmNgGmMZQ8zJpopXE"/>
<div class="absolute inset-0 bg-black/40 flex items-center justify-center">
<span class="text-white font-bold text-sm drop-shadow-md group-hover:text-primary transition-colors season-text">OVA</span>
</div>
</div>
<div class="season-card relative h-16 rounded-lg overflow-hidden group cursor-pointer" onclick="changeSeason('SP-1')">
<img class="w-full h-full object-cover opacity-50 group-hover:opacity-40 transition-opacity blur-[2px]" src="https://lh3.googleusercontent.com/aida-public/AB6AXuDqiUc86NAc2oPWF0jZS6ltVT0qDRUQLGYe-vsh90aCjNPCKRUYsR2joEXfq121iCQ1DMhEXbbjY-Rm6ydRKKVvOD7XCHpsnpYv4oUDQP6h-KZ9tUpwQb33LAseATibNSPDDxAViL3XAYheHWPQCau7pQCd7-XFT2YjY86y-DFUxv6SfYoh27gsa2-RiKjPMnhZfSvjYzFQSeYDzy64a_9Lmf5_NT9MkYffdzHclH1EyMht0psBW3wqnbmTFh6wbG5Xh4VXCnRWONM"/>
<div class="absolute inset-0 bg-black/40 flex items-center justify-center">
<span class="text-white font-bold text-sm drop-shadow-md group-hover:text-primary transition-colors season-text">SP-1</span>
</div>
</div>
<div class="season-card relative h-16 rounded-lg overflow-hidden group cursor-pointer" onclick="changeSeason('Season 2')">
<img class="w-full h-full object-cover opacity-50 group-hover:opacity-40 transition-opacity blur-[2px]" src="https://lh3.googleusercontent.com/aida-public/AB6AXuB6aKroKe4_Hr_QOThhIQ1eSBsj6XHa6M1h1ij1beOOwYZsLuAKaEUwhzePp5w2e0ZiNq23ueXCujFcscvpvX5l0fSEO1JhKa6gwDDPDrdfapY86HeYs5fG_M99b926v37WwsUlyZ7ugSX23giOl25toAwGLS8wOeBXwUajaxUzaTcHC_Yh5fJqnnwy6HgEx_QviGDLtROQ6LVPu2Z1BRIxBOEdc9fz9ozk1sYgF_aWaLm0ZXBf9Mh7BLQkJKaAnfSKTVLxnnvAS1o"/>
<div class="absolute inset-0 bg-black/40 flex items-center justify-center">
<span class="text-white font-bold text-sm drop-shadow-md group-hover:text-primary transition-colors season-text">Season 2</span>
</div>
</div>
<div class="season-card relative h-16 rounded-lg overflow-hidden group cursor-pointer" onclick="changeSeason('SP-2')">
<img class="w-full h-full object-cover opacity-50 group-hover:opacity-40 transition-opacity blur-[2px]" src="https://lh3.googleusercontent.com/aida-public/AB6AXuAQuHQGvQ_ZZoK-oiSbgwo97jr7QFFH3CQTV4YftvqcQxC4_9RkO3yOI4S45-TkvUvjclsVmYlr63JlsvgNOpbcEoLT34baDWU9MAahaGe82TPRYm6GqoAKj-PGiB1AWQ2Nu0dJcW-sk0LdIs1309AfZTrVu8PwjEVk1epEnACp5FEfBbKlqxYFgXjdpCa4Uh-iU1n5wm-Cf_817M-GTjUumrzvWrZPr9XbA3e6QMRs1nxmfKDH0lDMxo9aV-X1us5xqsONCa1Z73Q"/>
<div class="absolute inset-0 bg-black/40 flex items-center justify-center">
<span class="text-white font-bold text-sm drop-shadow-md group-hover:text-primary transition-colors season-text">SP-2</span>
</div>
</div>
<div class="season-card relative h-16 rounded-lg overflow-hidden group cursor-pointer" onclick="changeSeason('Season 3')">
<img class="w-full h-full object-cover opacity-50 group-hover:opacity-40 transition-opacity blur-[2px]" src="https://lh3.googleusercontent.com/aida-public/AB6AXuCwH3f4VjulnnLYk8EgFSCiOqFs12q4ivPSqucW7P7k4uOAN3qXURGd7iOxByylKHLJhbpiobEV442fMLZHwobXplWdRez-c71bcZODHHIHORqZw97zdSx_JgA4Cdym9n6VMtpcJXo3o5jc7jvKx13nsU2frrHJ8wgbcRH1cHIY8n7jLkRIsYOLDQ1uZWoGe99Imz98f_X9qskRvSTRVJiiJKF_DtE-ce0qw825vrwhgb66FQM3e_ymqoB8eBbjLZ5HuUePqbU5kYg"/>
<div class="absolute inset-0 bg-black/40 flex items-center justify-center">
<span class="text-white font-bold text-sm drop-shadow-md season-text">Season 3</span>
</div>
</div>
</div>
</div>
<div class="px-4 lg:px-0">
<h3 class="text-white font-semibold mb-4 text-base lg:text-lg">List of episodes:</h3>
<div class="relative">
<input class="bg-[#151926] border border-gray-700 text-gray-300 text-xs rounded pl-3 pr-8 py-1.5 focus:outline-none focus:border-primary w-32" placeholder="Number of Ep" type="text"/>
<span class="material-symbols-outlined absolute right-2 top-1.5 text-gray-500 text-sm">search</span>
</div>
</div>
<div class="bg-[#151926] rounded-xl overflow-hidden border border-gray-800 max-h-[400px] overflow-y-auto custom-scrollbar mt-4" id="episode-list">
</div>
</div>
<div class="px-4 lg:px-0 mt-8 mb-4">
<div class="bg-gradient-to-r from-[#1F2333] to-[#151926] rounded-2xl p-6 border border-gray-800/50 flex flex-col md:flex-row justify-between items-center gap-4 relative overflow-hidden">
<div class="absolute top-0 right-0 w-64 h-64 bg-primary/5 rounded-full blur-[80px] -z-0"></div>
<div class="flex items-center gap-4 z-10">
<div class="flex items-center gap-2">
<span class="text-yellow-400 text-3xl drop-shadow-md">★</span>
<span class="text-white text-4xl font-extrabold" id="rating-score">6.3</span>
</div>
<div class="h-8 w-[1px] bg-gray-700 mx-2"></div>
<div class="flex flex-col">
<span class="text-white font-semibold text-lg">Rate this anime</span>
<span class="text-gray-400 text-xs" id="vote-count-display">1,245 votes</span>
</div>
</div>
<button class="z-10 bg-white text-black font-bold px-8 py-3 rounded-full hover:bg-gray-200 transition-all shadow-lg hover:shadow-xl hover:scale-105 active:scale-95" id="main-vote-btn" onclick="openVoteModal()">
                                Vote now
                            </button>
</div>
</div>
<div class="mt-8 border-t border-gray-800 pt-8 px-4 lg:px-0">
<div class="flex items-center justify-between mb-6">
<div class="flex items-center gap-4">
<h3 class="text-primary text-xl font-bold">Comments</h3>
<span class="text-gray-500 text-sm" id="comment-count-2">0 Comments</span>
</div>
<div class="flex items-center gap-4">
<a class="text-xs text-white border border-gray-700 px-2 py-1 rounded hover:border-primary" href="#">Community Guidelines</a>
</div>
</div>
<div class="flex gap-4 mb-8">
<div class="w-10 h-10 rounded-full bg-primary/20 flex items-center justify-center text-primary font-bold flex-shrink-0">G</div>
<div class="flex-1 relative">
<textarea class="w-full bg-[#151926] border border-gray-700 rounded-lg p-3 text-gray-300 focus:outline-none focus:border-primary h-24 resize-none" id="comment-input-2" maxlength="500" placeholder="Leave a public comment..."></textarea>
<div class="flex justify-between items-center mt-2">
<span class="text-xs text-gray-500 ml-1" id="char-counter-2">500 characters remaining</span>
<button class="bg-primary hover:bg-primary-dark text-white px-4 py-2 rounded text-sm font-semibold transition-colors" onclick="postComment2()">Post Comment</button>
</div>
</div>
</div>
<div class="space-y-6" id="comments-container-2">
</div>
</div>
</div>
<div class="space-y-8 lg:sticky lg:top-24 h-fit mt-12 lg:mt-0">
<div class="bg-[#151926] rounded-xl p-4 border border-gray-800">
<h3 class="text-white font-bold mb-4 text-lg">Most Popular</h3>
<div class="space-y-4" id="most-popular-list-2">
</div>
</div>
<div>
<h3 class="text-white font-bold mb-4 text-lg">Recommended for you</h3>
<div class="grid grid-cols-3 gap-2" id="recommended-list-2">
</div>
</div>
</div>
</div>
</div>
{% endif %}
<!-- 11ty Template Integration End -->
</main>
<div class="fixed bottom-0 left-0 w-full z-30 sticky-vote bg-surface-dark/90 dark:bg-[#1A1D29]/80 border-t border-gray-800 p-4 pb-6 flex justify-between items-center lg:hidden">
<div class="flex items-center gap-2">
<span class="text-yellow-400 text-xl">★</span>
<span class="text-white text-2xl font-bold" id="mobile-rating-score">6.3</span>
</div>
<button class="bg-white text-black font-bold px-6 py-2 rounded-full hover:bg-gray-200 transition-colors" onclick="openVoteModal()">
            Vote now
        </button>
</div>
<div class="fixed inset-0 z-50 flex items-end sm:items-center justify-center bg-black/70 hidden transition-opacity" id="vote-modal">
<div class="bg-[#1F2333] w-full sm:w-[450px] rounded-t-2xl sm:rounded-2xl p-6 transform transition-transform animate-[slideUp_0.3s_ease-out] relative">
<button class="absolute top-4 right-4 text-gray-400 hover:text-white transition-colors" onclick="closeVoteModal()">
<span class="material-symbols-outlined text-2xl">close</span>
</button>
<div class="flex justify-between items-center mb-6">
<div class="flex items-center gap-3">
<span class="text-yellow-400 text-2xl">★</span>
<span class="text-white text-3xl font-extrabold" id="modal-rating-score">6.3</span>
<span class="text-gray-400 text-sm ml-1" id="modal-vote-count">1,245 votes</span>
</div>
</div>
<p class="text-white text-center mb-8 text-xl font-semibold">What do you think about this anime?</p>
<div class="grid grid-cols-3 gap-4" id="vote-options">
<button class="bg-gray-200 hover:bg-gray-300 active:bg-gray-400 rounded-xl py-6 flex flex-col items-center gap-3 transition-all transform hover:-translate-y-1 group" onclick="submitVote('Boring')">
<span class="text-4xl group-hover:scale-110 transition-transform">😩</span>
<span class="text-black font-bold text-base">Boring</span>
</button>
<button class="bg-gray-200 hover:bg-gray-300 active:bg-gray-400 rounded-xl py-6 flex flex-col items-center gap-3 transition-all transform hover:-translate-y-1 group" onclick="submitVote('Great')">
<span class="text-4xl group-hover:scale-110 transition-transform">😃</span>
<span class="text-black font-bold text-base">Great</span>
</button>
<button class="bg-gray-200 hover:bg-gray-300 active:bg-gray-400 rounded-xl py-6 flex flex-col items-center gap-3 transition-all transform hover:-translate-y-1 group" onclick="submitVote('Amazing')">
<span class="text-4xl group-hover:scale-110 transition-transform">🤩</span>
<span class="text-black font-bold text-base">Amazing</span>
</button>
</div>
<div class="hidden text-center py-4" id="voted-state">
<div class="w-16 h-16 bg-green-500/20 rounded-full flex items-center justify-center mx-auto mb-4 animate-[fadeIn_0.5s_ease-out]">
<span class="material-symbols-outlined text-green-500 text-3xl">check</span>
</div>
<h3 class="text-white text-xl font-bold mb-2">Thanks for voting!</h3>
<p class="text-gray-400 text-sm">You rated this as <span class="text-primary font-bold" id="user-vote-selection"></span>.</p>
</div>
</div>
</div>
<footer class="bg-white dark:bg-footer-dark border-t border-gray-200 dark:border-gray-800 mt-auto pb-24 lg:pb-0">
<div class="container mx-auto px-4 py-8 md:py-12">
<div class="flex flex-col md:flex-row justify-between items-start md:items-center gap-6">
<div class="flex-1 max-w-2xl">
<img alt="Quravel Logo" class="h-8 mb-4" src="https://cdn.imgchest.com/files/24d391d36c86.png"/>
<p class="text-sm text-gray-600 dark:text-gray-400 mb-6 leading-relaxed">
                        Quravel offers free, ad-free access to top movies and series in stunning quality. Stream effortlessly or save for later with easy downloads, perfect for movie lovers on the go!
                    </p>
<p class="text-xs text-gray-500 dark:text-gray-500">
                        This site does not store any files on our server, we only linked to the media which is hosted on 3rd party services.
                        <br/>
                        watch free movies, watch free tv shows,watch free anime online
                    </p>
</div>
<div class="flex flex-col items-center md:items-end gap-2 w-full md:w-auto">
<div class="flex gap-4 text-sm font-semibold text-gray-700 dark:text-gray-300">
<a class="hover:text-primary transition-colors" href="https://editor.wix.com/wixel-view/forms/7405900275916997729">REQUEST</a>
<a class="hover:text-primary transition-colors" href="https://editor.wix.com/wixel-view/forms/7405900275916997729">CONTACT</a>
</div>
<div class="text-xs text-gray-500 dark:text-gray-500 mt-2 text-center md:text-right w-full">
<span class="text-primary font-bold">Quravel</span>
<br/>
                        @ 2025 Quravel
                    </div>
</div>
</div>
</div>
</footer>
<!-- Search Functionality Script -->
<script>
    (function() {
        // Desktop search functionality
        const searchInput = document.getElementById('nav-search-input');
        const dropdown = document.getElementById('nav-search-dropdown');
        const suggestionsList = document.getElementById('nav-suggestions-list');
        const viewAllBtn = document.getElementById('nav-view-all-btn');
        
        // Mobile search functionality
        const mobileSearchInput = document.getElementById('mobile-search-input');
        const mobileDropdown = document.getElementById('mobile-search-dropdown');
        const mobileSuggestionsList = document.getElementById('mobile-suggestions-list');
        const mobileViewAllBtn = document.getElementById('mobile-view-all-btn');
        
        let searchDB = [];

        // 1. Fetch the data generated by 11ty
        fetch('/search-data.json')
            .then(res => res.json())
            .then(data => searchDB = data)
            .catch(err => console.error('Error loading search data:', err));

        // Function to filter and display results
        function performSearch(query, suggestionsContainer, viewAllLink, dropdownElement) {
            if (query.length < 2) {
                dropdownElement.classList.add('hidden');
                return;
            }

            // Filter data and limit to 6 results
            const matches = searchDB.filter(item => 
                item.title && item.title.toLowerCase().includes(query) || 
                (item.japaneseTitle && item.japaneseTitle.toLowerCase().includes(query))
            ).slice(0, 6);

            if (matches.length > 0) {
                dropdownElement.classList.remove('hidden');
                
                // Update the "View All" link
                viewAllLink.href = `/search/?q=${encodeURIComponent(query)}`;
                
                // Build the HTML for suggestions
                suggestionsContainer.innerHTML = matches.map(item => {
                    // Create the slug for the link
                    const slug = item.title.toLowerCase().replace(/\s+/g, '-').replace(/[^\w-]+/g, '');
                    
                    return `
                    <a href="/watch/${slug}/" class="flex items-center p-3 hover:bg-gray-800 transition border-b border-gray-700">
                        <img src="${item.poster || 'https://via.placeholder.com/48x64?text=No+Image'}" class="w-12 h-16 object-cover rounded shadow mr-4">
                        <div class="flex-1 overflow-hidden">
                            <h4 class="text-white font-bold text-sm truncate">${item.title}</h4>
                            <p class="text-[10px] text-gray-400 mt-1 uppercase tracking-wider truncate">
                                ${item.type || 'N/A'} • ${item.genres ? item.genres[0] : 'N/A'} • ${item.year || 'N/A'} • ${item.duration || 'N/A'}
                            </p>
                        </div>
                        <span class="material-symbols-outlined text-gray-600 text-sm">chevron_right</span>
                    </a>
                    `;
                }).join('');
            } else {
                dropdownElement.classList.add('hidden');
            }
        }

        // 2. Listen for user input on desktop
        if (searchInput) {
            searchInput.addEventListener('input', (e) => {
                const query = e.target.value.toLowerCase();
                performSearch(query, suggestionsList, viewAllBtn, dropdown);
            });
        }

        // 3. Listen for user input on mobile
        if (mobileSearchInput) {
            mobileSearchInput.addEventListener('input', (e) => {
                const query = e.target.value.toLowerCase();
                performSearch(query, mobileSuggestionsList, mobileViewAllBtn, mobileDropdown);
            });
        }

        // Close dropdown if user clicks outside (desktop)
        if (dropdown) {
            document.addEventListener('click', (e) => {
                if (!searchInput.contains(e.target) && !dropdown.contains(e.target)) {
                    dropdown.classList.add('hidden');
                }
            });
        }

        // Close dropdown if user clicks outside (mobile)
        if (mobileDropdown) {
            document.addEventListener('click', (e) => {
                if (mobileSearchInput && !mobileSearchInput.contains(e.target) && !mobileDropdown.contains(e.target)) {
                    mobileDropdown.classList.add('hidden');
                }
            });
        }
    })();
</script>

<!-- Original Script (for when 11ty data is not available) -->
<script>
    // State
    let currentEp = 1;
    let currentSeason = 'Season 1';
    const totalEps = 12;
    // --- Data Population (Simulating Content) ---
    const popularItems = [
        { title: "One Piece", views: "1152", img: "https://lh3.googleusercontent.com/aida-public/AB6AXuCwH3f4VjulnnLYk8EgFSCiOqFs12q4ivPSqucW7P7k4uOAN3qXURGd7iOxByylKHLJhbpiobEV442fMLZHwobXplWdRez-c71bcZODHHIHORqZw97zdSx_JgA4Cdym9n6VMtpcJXo3o5jc7jvKx13nsU2frrHJ8wgbcRH1cHIY8n7jLkRIsYOLDQ1uZWoGe99Imz98f_X9qskRvSTRVJiiJKF_DtE-ce0qw825vrwhgb66FQM3e_ymqoB8eBbjLZ5HuUePqbU5kYg" },
        { title: "Chainsaw Man", views: "940", img: "https://lh3.googleusercontent.com/aida-public/AB6AXuAQuHQGvQ_ZZoK-oiSbgwo97jr7QFFH3CQTV4YftvqcQxC4_9RkO3yOI4S45-TkvUvjclsVmYlr63JlsvgNOpbcEoLT34baDWU9MAahaGe82TPRYm6GqoAKj-PGiB1AWQ2Nu0dJcW-sk0LdIs1309AfZTrVu8PwjEVk1epEnACp5FEfBbKlqxYFgXjdpCa4Uh-iU1n5wm-Cf_817M-GTjUumrzvWrZPr9XbA3e6QMRs1nxmfKDH0lDMxo9aV-X1us5xqsONCa1Z73Q" },
        { title: "Jujutsu Kaisen", views: "880", img: "https://lh3.googleusercontent.com/aida-public/AB6AXuDqiUc86NAc2oPWF0jZS6ltVT0qDRUQLGYe-vsh90aCjNPCKRUYsR2joEXfq121iCQ1DMhEXbbjY-Rm6ydRKKVvOD7XCHpsnpYv4oUDQP6h-KZ9tUpwQb33LAseATibNSPDDxAViL3XAYheHWPQCau7pQCd7-XFT2YjY86y-DFUxv6SfYoh27gsa2-RiKjPMnhZfSvjYzFQSeYDzy64a_9Lmf5_NT9MkYffdzHclH1EyMht0psBW3wqnbmTFh6wbG5Xh4VXCnRWONM" },
        { title: "Bleach", views: "750", img: "https://lh3.googleusercontent.com/aida-public/AB6AXuBL8sSKQhkIHjJRpfaXPOb2Ntr-YMNUhdTfQQNGnnmqGZu3SSewBEFAnXpGTo1YxqHXlb8pOCJCZrgrSF00Ey3CMmhZW5Q7dqz5o0qIOeV3DXsmqV-RKQGF2yEnwCFPLqyZ1R9luYVGdw-P_L6bRKjMPRM2RO5ISubiOat46Ovv-uMFsJfxGzRT0ngWoCZXAiiHQbJOA91N5Wyn21gKPKb6rWilqbabiqUYqUEEe31UdFQXOki6b3glJcCnNMssztZkZ0UYU_mwBbY" },
        { title: "Naruto", views: "1200", img: "https://lh3.googleusercontent.com/aida-public/AB6AXuBL8sSKQhkIHjJRpfaXPOb2Ntr-YMNUhdTfQQNGnnmqGZu3SSewBEFAnXpGTo1YxqHXlb8pOCJCZrgrSF00Ey3CMmhZW5Q7dqz5o0qIOeV3DXsmqV-RKQGF2yEnwCFPLqyZ1R9luYVGdw-P_L6bRKjMPRM2RO5ISubiOat46Ovv-uMFsJfxGzRT0ngWoCZXAiiHQbJOA91N5Wyn21gKPKb6rWilqbabiqUYqUEEe31UdFQXOki6b3glJcCnNMssztZkZ0UYU_mwBbY" },
        { title: "Demon Slayer", views: "999", img: "https://lh3.googleusercontent.com/aida-public/AB6AXuBJUVSMqcvlsLRod5Xj-MZhjFAWxv45A-9D1r1RCogjetrU2yKas3rRIuvSZRytOe6KmnI1y8NBGlIDGaE0UV5-mx19YpDf5v0SsajVxTc0VUCDku8E8PC54rDIUGGhmt44NSDXMGfnGVTtfzGJ8Cj6U15erHms74L8zDNtfVtIjG013mT9k-H5Psf5KSd570YR8_DAtEfUBmcVIMfE5LNH3WO14T7Cv3psWjV5O4UWogAMASg1czrkMA4qcRagH2Mtb7wqzWRn0BQ" },
        { title: "Spy x Family", views: "850", img: "https://lh3.googleusercontent.com/aida-public/AB6AXuAyQkhWkWRKHdBKcKeKIQPSp0dqUxzkKXlQI9e-linyzdZc9vxD5aQvA-ZV_wOo7084k8eQ29HZJd3WqF6fhl5ywezJ9q4mrXm4IXYZnsrFWIdQpQGJRxxoSsAH0BJ7T_rXsfSDASTzBL9VkhWJq2VaqxNU8lIq-c1X5b8JBJP3GlTMQPDc7w1h4CxDMBAlzCY-SB1q84jFGtF6k7hS7VqPnzYc8hjOHgQWrprfsOoJEFcCFtN-N3rEH8TW-lRH0reqCAVonCPGynA" },
        { title: "Blue Lock", views: "670", img: "https://lh3.googleusercontent.com/aida-public/AB6AXuCwH3f4VjulnnLYk8EgFSCiOqFs12q4ivPSqucW7P7k4uOAN3qXURGd7iOxByylKHLJhbpiobEV442fMLZHwobXplWdRez-c71bcZODHHIHORqZw97zdSx_JgA4Cdym9n6VMtpcJXo3o5jc7jvKx13nsU2frrHJ8wgbcRH1cHIY8n7jLkRIsYOLDQ1uZWoGe99Imz98f_X9qskRvSTRVJiiJKF_DtE-ce0qw825vrwhgb66FQM3e_ymqoB8eBbjLZ5HuUePqbU5kYg" }
    ];
    const recommendedItems = [
        { title: "Shawshank", eps: "12 Eps", img: "https://lh3.googleusercontent.com/aida-public/AB6AXuBL8sSKQhkIHjJRpfaXPOb2Ntr-YMNUhdTfQQNGnnmqGZu3SSewBEFAnXpGTo1YxqHXlb8pOCJCZrgrSF00Ey3CMmhZW5Q7dqz5o0qIOeV3DXsmqV-RKQGF2yEnwCFPLqyZ1R9luYVGdw-P_L6bRKjMPRM2RO5ISubiOat46Ovv-uMFsJfxGzRT0ngWoCZXAiiHQbJOA91N5Wyn21gKPKb6rWilqbabiqUYqUEEe31UdFQXOki6b3glJcCnNMssztZkZ0UYU_mwBbY" },
        { title: "Breaking Bad", eps: "62 Eps", img: "https://lh3.googleusercontent.com/aida-public/AB6AXuBL8sSKQhkIHjJRpfaXPOb2Ntr-YMNUhdTfQQNGnnmqGZu3SSewBEFAnXpGTo1YxqHXlb8pOCJCZrgrSF00Ey3CMmhZW5Q7dqz5o0qIOeV3DXsmqV-RKQGF2yEnwCFPLqyZ1R9luYVGdw-P_L6bRKjMPRM2RO5ISubiOat46Ovv-uMFsJfxGzRT0ngWoCZXAiiHQbJOA91N5Wyn21gKPKb6rWilqbabiqUYqUEEe31UdFQXOki6b3glJcCnNMssztZkZ0UYU_mwBbY" },
        { title: "GOT", eps: "73 Eps", img: "https://lh3.googleusercontent.com/aida-public/AB6AXuBJUVSMqcvlsLRod5Xj-MZhjFAWxv45A-9D1r1RCogjetrU2yKas3rRIuvSZRytOe6KmnI1y8NBGlIDGaE0UV5-mx19YpDf5v0SsajVxTc0VUCDku8E8PC54rDIUGGhmt44NSDXMGfnGVTtfzGJ8Cj6U15erHms74L8zDNtfVtIjG013mT9k-H5Psf5KSd570YR8_DAtEfUBmcVIMfE5LNH3WO14T7Cv3psWjV5O4UWogAMASg1czrkMA4qcRagH2Mtb7wqzWRn0BQ" },
        { title: "The Office", eps: "201 Eps", img: "https://lh3.googleusercontent.com/aida-public/AB6AXuAyQkhWkWRKHdBKcKeKIQPSp0dqUxzkKXlQI9e-linyzdZc9vxD5aQvA-ZV_wOo7084k8eQ29HZJd3WqF6fhl5ywezJ9q4mrXm4IXYZnsrFWIdQpQGJRxxoSsAH0BJ7T_rXsfSDASTzBL9VkhWJq2VaqxNU8lIq-c1X5b8JBJP3GlTMQPDc7w1h4CxDMBAlzCY-SB1q84jFGtF6k7hS7VqPnzYc8hjOHgQWrprfsOoJEFcCFtN-N3rEH8TW-lRH0reqCAVonCPGynA" },
        { title: "Godfather", eps: "Movie", img: "https://lh3.googleusercontent.com/aida-public/AB6AXuCwH3f4VjulnnLYk8EgFSCiOqFs12q4ivPSqucW7P7k4uOAN3qXURGd7iOxByylKHLJhbpiobEV442fMLZHwobXplWdRez-c71bcZODHHIHORqZw97zdSx_JgA4Cdym9n6VMtpcJXo3o5jc7jvKx13nsU2frrHJ8wgbcRH1cHIY8n7jLkRIsYOLDQ1uZWoGe99Imz98f_X9qskRvSTRVJiiJKF_DtE-ce0qw825vrwhgb66FQM3e_ymqoB8eBbjLZ5HuUePqbU5kYg" },
        { title: "12 Angry Men", eps: "Movie", img: "https://lh3.googleusercontent.com/aida-public/AB6AXuAWDG7W-EHvCGO6AOk0LDv2cxGsetsdcPblclKS1wVK3MQv4Fj_GiJpDoSYDcNwJrCYOz29g-FhsQOo9O_1CP7dvKsW3GKE6JfGAq8LUCU3Vk8A-AgKIbpFT50VlqnKIa-bNWxP6wrMSM1bk0abtMKKSCUoY8e8NTUY4CGgfqqjZkW-eJP5--tz8pfc8XzVLKbfvPpA015qvL4RQQ1H4ozFhJNr3H2YwCAMneW3D-iySlLubqn9nb1Edu-hnxmvSEkNQh7snL7aGL0" },
        { title: "Dark", eps: "26 Eps", img: "https://lh3.googleusercontent.com/aida-public/AB6AXuBL8sSKQhkIHjJRpfaXPOb2Ntr-YMNUhdTfQQNGnnmqGZu3SSewBEFAnXpGTo1YxqHXlb8pOCJCZrgrSF00Ey3CMmhZW5Q7dqz5o0qIOeV3DXsmqV-RKQGF2yEnwCFPLqyZ1R9luYVGdw-P_L6bRKjMPRM2RO5ISubiOat46Ovv-uMFsJfxGzRT0ngWoCZXAiiHQbJOA91N5Wyn21gKPKb6rWilqbabiqUYqUEEe31UdFQXOki6b3glJcCnNMssztZkZ0UYU_mwBbY" },
        { title: "Stranger Things", eps: "34 Eps", img: "https://lh3.googleusercontent.com/aida-public/AB6AXuBL8sSKQhkIHjJRpfaXPOb2Ntr-YMNUhdTfQQNGnnmqGZu3SSewBEFAnXpGTo1YxqHXlb8pOCJCZrgrSF00Ey3CMmhZW5Q7dqz5o0qIOeV3DXsmqV-RKQGF2yEnwCFPLqyZ1R9luYVGdw-P_L6bRKjMPRM2RO5ISubiOat46Ovv-uMFsJfxGzRT0ngWoCZXAiiHQbJOA91N5Wyn21gKPKb6rWilqbabiqUYqUEEe31UdFQXOki6b3glJcCnNMssztZkZ0UYU_mwBbY" },
        { title: "The Wire", eps: "60 Eps", img: "https://lh3.googleusercontent.com/aida-public/AB6AXuBJUVSMqcvlsLRod5Xj-MZhjFAWxv45A-9D1r1RCogjetrU2yKas3rRIuvSZRytOe6KmnI1y8NBGlIDGaE0UV5-mx19YpDf5v0SsajVxTc0VUCDku8E8PC54rDIUGGhmt44NSDXMGfnGVTtfzGJ8Cj6U15erHms74L8zDNtfVtIjG013mT9k-H5Psf5KSd570YR8_DAtEfUBmcVIMfE5LNH3WO14T7Cv3psWjV5O4UWogAMASg1czrkMA4qcRagH2Mtb7wqzWRn0BQ" },
        { title: "Sopranos", eps: "86 Eps", img: "https://lh3.googleusercontent.com/aida-public/AB6AXuAyQkhWkWRKHdBKcKeKIQPSp0dqUxzkKXlQI9e-linyzdZc9vxD5aQvA-ZV_wOo7084k8eQ29HZJd3WqF6fhl5ywezJ9q4mrXm4IXYZnsrFWIdQpQGJRxxoSsAH0BJ7T_rXsfSDASTzBL9VkhWJq2VaqxNU8lIq-c1X5b8JBJP3GlTMQPDc7w1h4CxDMBAlzCY-SB1q84jFGtF6k7hS7VqPnzYc8hjOHgQWrprfsOoJEFcCFtN-N3rEH8TW-lRH0reqCAVonCPGynA" },
        { title: "Interstellar", eps: "Movie", img: "https://lh3.googleusercontent.com/aida-public/AB6AXuCwH3f4VjulnnLYk8EgFSCiOqFs12q4ivPSqucW7P7k4uOAN3qXURGd7iOxByylKHLJhbpiobEV442fMLZHwobXplWdRez-c71bcZODHHIHORqZw97zdSx_JgA4Cdym9n6VMtpcJXo3o5jc7jvKx13nsU2frrHJ8wgbcRH1cHIY8n7jLkRIsYOLDQ1uZWoGe99Imz98f_X9qskRvSTRVJiiJKF_DtE-ce0qw825vrwhgb66FQM3e_ymqoB8eBbjLZ5HuUePqbU5kYg" },
        { title: "Inception", eps: "Movie", img: "https://lh3.googleusercontent.com/aida-public/AB6AXuAWDG7W-EHvCGO6AOk0LDv2cxGsetsdcPblclKS1wVK3MQv4Fj_GiJpDoSYDcNwJrCYOz29g-FhsQOo9O_1CP7dvKsW3GKE6JfGAq8LUCU3Vk8A-AgKIbpFT50VlqnKIa-bNWxP6wrMSM1bk0abtMKKSCUoY8e8NTUY4CGgfqqjZkW-eJP5--tz8pfc8XzVLKbfvPpA015qvL4RQQ1H4ozFhJNr3H2YwCAMneW3D-iySlLubqn9nb1Edu-hnxmvSEkNQh7snL7aGL0" },
        { title: "Parasite", eps: "Movie", img: "https://lh3.googleusercontent.com/aida-public/AB6AXuBL8sSKQhkIHjJRpfaXPOb2Ntr-YMNUhdTfQQNGnnmqGZu3SSewBEFAnXpGTo1YxqHXlb8pOCJCZrgrSF00Ey3CMmhZW5Q7dqz5o0qIOeV3DXsmqV-RKQGF2yEnwCFPLqyZ1R9luYVGdw-P_L6bRKjMPRM2RO5ISubiOat46Ovv-uMFsJfxGzRT0ngWoCZXAiiHQbJOA91N5Wyn21gKPKb6rWilqbabiqUYqUEEe31UdFQXOki6b3glJcCnNMssztZkZ0UYU_mwBbY" },
        { title: "Joker", eps: "Movie", img: "https://lh3.googleusercontent.com/aida-public/AB6AXuBL8sSKQhkIHjJRpfaXPOb2Ntr-YMNUhdTfQQNGnnmqGZu3SSewBEFAnXpGTo1YxqHXlb8pOCJCZrgrSF00Ey3CMmhZW5Q7dqz5o0qIOeV3DXsmqV-RKQGF2yEnwCFPLqyZ1R9luYVGdw-P_L6bRKjMPRM2RO5ISubiOat46Ovv-uMFsJfxGzRT0ngWoCZXAiiHQbJOA91N5Wyn21gKPKb6rWilqbabiqUYqUEEe31UdFQXOki6b3glJcCnNMssztZkZ0UYU_mwBbY" }
    ];
    // --- Render Functions ---
    function renderPopular() {
        const container = document.getElementById('most-popular-list-2');
        if (!container) return;
        container.innerHTML = popularItems.map(item => `
            <a class="flex gap-3 group" href="#">
                <div class="w-16 h-20 rounded-md overflow-hidden flex-shrink-0">
                    <img class="w-full h-full object-cover group-hover:scale-110 transition-transform duration-300" src="${item.img}"/>
                </div>
                <div class="flex flex-col justify-center flex-1">
                    <h4 class="text-white font-medium text-sm line-clamp-1 group-hover:text-primary transition-colors">${item.title}</h4>
                    <div class="flex items-center gap-2 mt-2">
                        <span class="bg-green-500/20 text-green-400 text-[10px] px-1.5 py-0.5 rounded flex items-center gap-1"><span class="material-symbols-outlined text-[10px]">visibility</span> ${item.views}</span>
                        <span class="text-gray-500 text-xs">• TV</span>
                    </div>
                </div>
                <span class="material-symbols-outlined text-gray-600 self-center">add</span>
            </a>
        `).join('');
    }
    function renderRecommended() {
        const container = document.getElementById('recommended-list-2');
        if (!container) return;
        container.innerHTML = recommendedItems.map(item => `
            <div class="group cursor-pointer">
                <div class="relative aspect-[2/3] rounded-lg overflow-hidden mb-2">
                    <img class="w-full h-full object-cover group-hover:scale-105 transition-transform duration-300" src="${item.img}"/>
                    <div class="absolute top-1 right-1 bg-primary/90 text-white text-[9px] font-bold px-1 rounded">HD</div>
                    <div class="absolute bottom-0 left-0 w-full bg-gradient-to-t from-black/80 to-transparent p-1">
                        <span class="text-white text-[10px]">${item.eps}</span>
                    </div>
                    <div class="absolute inset-0 bg-black/40 flex items-center justify-center opacity-0 group-hover:opacity-100 transition-opacity">
                        <span class="material-symbols-outlined text-white text-3xl">play_circle</span>
                    </div>
                </div>
                <h4 class="text-white text-xs font-semibold line-clamp-1 group-hover:text-primary">${item.title}</h4>
                <div class="flex justify-between text-[10px] text-gray-500">
                    <span>${item.eps.includes('Movie') ? 'Movie' : 'TV'}</span>
                    <span>22m</span>
                </div>
            </div>
        `).join('');
    }
    function renderEpisodeList() {
        const container = document.getElementById('episode-list');
        if (!container) return;
        let html = '';
        for (let i = 1; i <= totalEps; i++) {
            const isActive = i === currentEp;
            if (isActive) {
                html += `
                    <div class="flex justify-between items-center p-3 bg-primary/10 border-l-4 border-primary" id="ep-item-${i}">
                        <div class="flex items-center gap-4">
                            <span class="text-white font-bold w-6">${i}</span>
                            <span class="text-primary font-medium text-sm">Episode ${i}</span>
                        </div>
                        <span class="material-symbols-outlined text-primary text-xl">play_circle</span>
                    </div>
                `;
            } else {
                html += `
                    <div onclick="changeEpisode(${i})" class="flex justify-between items-center p-3 hover:bg-[#1E2232] border-b border-gray-800/50 transition-colors cursor-pointer group" id="ep-item-${i}">
                        <div class="flex items-center gap-4">
                            <span class="text-gray-500 font-bold w-6 group-hover:text-white">${i}</span>
                            <span class="text-gray-300 font-medium text-sm group-hover:text-white">Episode ${i}</span>
                        </div>
                    </div>
                `;
            }
        }
        container.innerHTML = html;
    }
    // --- Interaction Functions ---
    function changeEpisode(ep) {
        currentEp = ep;
        // Update UI text
        document.getElementById('current-ep-num').textContent = ep;
        document.getElementById('video-title').textContent = `Chainsaw Man ${currentSeason} - Episode ${ep}`;
        // Re-render list to show active state
        renderEpisodeList();
        // Update button states
        updateNavButtons();
    }
    function changeSeason(seasonName) {
        currentSeason = seasonName;
        currentEp = 1; // Reset to first episode of season
        // Update Display Text
        document.getElementById('season-display').textContent = seasonName;
        document.getElementById('video-title').textContent = `Chainsaw Man ${seasonName} - Episode 1`;
        document.getElementById('current-ep-num').textContent = 1;
        // Visual Selection Logic
        const cards = document.querySelectorAll('.season-card');
        cards.forEach(card => {
            // Remove active styles
            card.classList.remove('ring-1', 'ring-primary/50');
            const text = card.querySelector('.season-text');
            text.classList.remove('text-primary');
            text.classList.add('text-white');
            // Check if this card matches the new season
            // Simple check by text content
            if (text.textContent.trim() === seasonName) {
                card.classList.add('ring-1', 'ring-primary/50');
                text.classList.remove('text-white');
                text.classList.add('text-primary');
            }
        });
        // Re-render episodes (simulating new content)
        renderEpisodeList();
        updateNavButtons();
    }
    function updateNavButtons() {
        const prevBtn = document.getElementById('prev-ep-btn');
        const nextBtn = document.getElementById('next-ep-btn');
        if (prevBtn) prevBtn.disabled = currentEp <= 1;
        if (nextBtn) nextBtn.disabled = currentEp >= totalEps;
        // Add/remove click handlers to ensure latest state
        if (prevBtn) prevBtn.onclick = () => { if(currentEp > 1) changeEpisode(currentEp - 1); };
        if (nextBtn) nextBtn.onclick = () => { if(currentEp < totalEps) changeEpisode(currentEp + 1); };
    }
    function selectServer(type, id) {
        // Reset buttons in that row
        const row = document.getElementById(`server-row-${type}`);
        if (!row) return;
        const buttons = row.getElementsByTagName('button');
        for (let btn of buttons) {
            btn.className = "whitespace-nowrap px-4 py-1.5 rounded bg-[#1E2232] hover:bg-[#2A2E3B] text-gray-300 text-xs font-bold transition-colors";
        }
        const target = event.target;
        target.className = "whitespace-nowrap px-4 py-1.5 rounded bg-primary text-white text-xs font-bold shadow-lg shadow-primary/20 transition-colors";
        // In a real app, this would trigger a player source change
        console.log(`Switched to ${type.toUpperCase()} Server ${id}`);
    }
    // --- Add to List Logic ---
    const listBtn = document.getElementById('add-list-btn');
    const listDropdown = document.getElementById('add-list-dropdown');
    if (listBtn) {
        listBtn.addEventListener('click', (e) => {
            e.stopPropagation();
            listDropdown.classList.toggle('hidden');
        });
    }
    // Close dropdown when clicking outside
    document.addEventListener('click', (e) => {
        if (listBtn && !listBtn.contains(e.target) && !listDropdown.contains(e.target)) {
            listDropdown.classList.add('hidden');
        }
    });
    function setListStatus(status) {
        localStorage.setItem('animeWatchStatus', status);
        if (listDropdown) listDropdown.classList.add('hidden');
        // Update button text to reflect status
        if (listBtn) {
            if (status === 'Remove') {
                listBtn.innerHTML = '<span class="material-symbols-outlined text-sm">add_to_queue</span> Add to list';
                localStorage.removeItem('animeWatchStatus');
            } else {
                listBtn.innerHTML = `<span class="material-symbols-outlined text-sm">check</span> ${status}`;
            }
        }
    }
    // Initialize saved status
    const savedStatus = localStorage.getItem('animeWatchStatus');
    if (savedStatus && listBtn) {
        listBtn.innerHTML = `<span class="material-symbols-outlined text-sm">check</span> ${savedStatus}`;
    }
    // --- Comment Logic ---
    // Helper: Generate a simple unique ID
    function generateId() {
        return Date.now().toString(36) + Math.random().toString(36).substr(2);
    }
    // --- Char Counter Initialization ---
    const commentInput = document.getElementById('comment-input-2');
    const charCounter = document.getElementById('char-counter-2');
    const maxChars = 500;
    if (commentInput && charCounter) {
        commentInput.addEventListener('input', () => {
            const remaining = maxChars - commentInput.value.length;
            charCounter.textContent = `${remaining} characters remaining`;
        });
    }
    function loadComments() {
        const container = document.getElementById('comments-container-2');
        if (!container) return;
        // Load combined comments from storage or initialize with default
        let allComments = JSON.parse(localStorage.getItem('animeCommentsV2'));
        if (!allComments) {
            // Default comments with IDs and empty replies
            const defaultComments = [
                {
                    id: 'c1',
                    name: 'Rose',
                    color: 'text-yellow-500',
                    time: 'an hour ago',
                    text: 'This episode was absolutely fire! 🔥 The animation quality dropped a bit in the middle but the ending made up for it.',
                    avatar: 'https://lh3.googleusercontent.com/aida-public/AB6AXuD_WkTZM5ZJ-NmTWR2UarTBAlvQ7P9ypGwIngTqhz3x53h75oR2QehaiVHXzaZ4EdTlD7DKAbSY7ijEe53JM_Qy1bCiQ3scMkoeKM9P21Jul1ZTTeMx413_PevdOcmb47ryU920sKnA0ByZk2G-iqk0KmNn00obvswj1ep1sci1GkIQQ-ubl71d6VMhb-nRWkRCP4MgrN6zw5y4oW0kuIIRp48E3CwPOGW8HgQ-oHGsUk5CKPiXemUd6XhmHr4YMs6lRbqCLMOQLck',
                    likes: 12,
                    dislikes: 0,
                    userAction: null, // 'like', 'dislike', or null
                    replies: []
                },
                {
                    id: 'c2',
                    name: 'BookLion0374',
                    color: 'text-blue-400',
                    time: '4 hours ago',
                    text: 'Can anyone tell me the name of the OST playing at 14:20? It sounds so familiar.',
                    avatar: 'https://lh3.googleusercontent.com/aida-public/AB6AXuAQuHQGvQ_ZZoK-oiSbgwo97jr7QFFH3CQTV4YftvqcQxC4_9RkO3yOI4S45-TkvUvjclsVmYlr63JlsvgNOpbcEoLT34baDWU9MAahaGe82TPRYm6GqoAKj-PGiB1AWQ2Nu0dJcW-sk0LdIs1309AfZTrVu8PwjEVk1epEnACp5FEfBbKlqxYFgXjdpCa4Uh-iU1n5wm-Cf_817M-GTjUumrzvWrZPr9XbA3e6QMRs1nxmfKDH0lDMxo9aV-X1us5xqsONCa1Z73Q',
                    likes: 5,
                    dislikes: 0,
                    userAction: null,
                    replies: [
                        {
                            id: 'r2-1',
                            name: 'MusicLover',
                            color: 'text-purple-400',
                            time: '3 hours ago',
                            text: 'It is called "Edge of Chainsaw" by Kensuke Ushio.',
                            avatar: '',
                            likes: 2,
                            dislikes: 0,
                            userAction: null
                        }
                    ]
                },
                {
                    id: 'c3',
                    name: 'AnimeLover99',
                    color: 'text-green-400',
                    time: '5 hours ago',
                    text: 'Honestly, I expected more action. This felt like a filler episode to me. 😴',
                    avatar: '',
                    likes: 0,
                    dislikes: 8,
                    userAction: null,
                    replies: []
                },
                {
                    id: 'c4',
                    name: 'DarkSlayer',
                    color: 'text-red-500',
                    time: '6 hours ago',
                    text: 'The fight scene at the beginning was insane! MAPPA really outdid themselves this time.',
                    avatar: '',
                    likes: 24,
                    dislikes: 1,
                    userAction: null,
                    replies: []
                },
                {
                    id: 'c5',
                    name: 'MangaReader',
                    color: 'text-purple-400',
                    time: '8 hours ago',
                    text: 'They skipped chapter 45 completely... disappointing adaptation choice. The manga handled this scene with way more emotional depth.',
                    avatar: '',
                    likes: 15,
                    dislikes: 2,
                    userAction: null,
                    replies: []
                },
                {
                    id: 'c6',
                    name: 'CasualWatcher',
                    color: 'text-pink-400',
                    time: '10 hours ago',
                    text: 'I have no idea what is going on anymore but the visuals are pretty so I am staying. 😂',
                    avatar: '',
                    likes: 3,
                    dislikes: 0,
                    userAction: null,
                    replies: []
                },
                {
                    id: 'c7',
                    name: 'Hater123',
                    color: 'text-gray-400',
                    time: '12 hours ago',
                    text: 'Overrated show. The main character is so annoying.',
                    avatar: '',
                    likes: 1,
                    dislikes: 45,
                    userAction: null,
                    replies: []
                },
                {
                    id: 'c8',
                    name: 'OtakuKing',
                    color: 'text-orange-400',
                    time: '1 day ago',
                    text: 'Wait for the next arc, it gets crazy good! Trust the process.',
                    avatar: '',
                    likes: 8,
                    dislikes: 0,
                    userAction: null,
                    replies: []
                },
                {
                    id: 'c9',
                    name: 'SubPolice',
                    color: 'text-cyan-400',
                    time: '1 day ago',
                    text: 'The translation for the final line is wrong. In Japanese he actually implies something totally different.',
                    avatar: '',
                    likes: 10,
                    dislikes: 1,
                    userAction: null,
                    replies: []
                },
                {
                    id: 'c10',
                    name: 'Newbie',
                    color: 'text-indigo-400',
                    time: '2 days ago',
                    text: 'Just started watching this, hooked immediately! 🍿',
                    avatar: '',
                    likes: 6,
                    dislikes: 0,
                    userAction: null,
                    replies: []
                }
            ];
            allComments = defaultComments;
            localStorage.setItem('animeCommentsV2', JSON.stringify(allComments));
        }
        if (document.getElementById('comment-count-2')) {
            document.getElementById('comment-count-2').textContent = `${allComments.length} Comments`;
        }
        container.innerHTML = allComments.map(c => `
            <div class="flex gap-4">
                <img class="w-10 h-10 rounded-full object-cover bg-gray-700 flex-shrink-0" src="${c.avatar || ''}" onerror="this.src='https://ui-avatars.com/api/?name=${c.name}&background=random'"/>
                <div class="flex-1">
                    <div class="flex items-baseline gap-2 mb-1">
                        <span class="${c.color || 'text-primary'} font-bold text-sm">${c.name}</span>
                        <span class="text-gray-500 text-xs">${c.time}</span>
                    </div>
                    <p class="text-gray-300 text-sm mb-2">${c.text}</p>
                    <div class="flex items-center gap-4 text-xs text-gray-500 mb-2">
                        <button class="hover:text-white flex items-center gap-1" onclick="toggleReplyBox2('${c.id}')"><span class="material-symbols-outlined text-sm">reply</span> Reply</button>
                        <button class="flex items-center gap-1 hover:text-white ${c.userAction === 'like' ? 'text-primary' : ''}" onclick="voteComment2('${c.id}', 'like')">
                            <span class="material-symbols-outlined text-sm ${c.userAction === 'like' ? 'fill-current' : ''}">thumb_up</span> ${c.likes || 0}
                        </button>
                        <button class="flex items-center gap-1 hover:text-white ${c.userAction === 'dislike' ? 'text-red-500' : ''}" onclick="voteComment2('${c.id}', 'dislike')">
                            <span class="material-symbols-outlined text-sm ${c.userAction === 'dislike' ? 'fill-current' : ''}">thumb_down</span> ${c.dislikes || 0}
                        </button>
                        <button class="hover:text-white ml-auto">...</button>
                    </div>
                    <div id="reply-box-2-${c.id}" class="hidden mt-2 mb-4 flex gap-3">
                         <div class="w-8 h-8 rounded-full bg-primary/20 flex items-center justify-center text-primary font-bold flex-shrink-0 text-xs">G</div>
                         <div class="flex-1">
                            <textarea id="reply-input-2-${c.id}" class="w-full bg-[#0B0E14] border border-gray-700 rounded-lg p-2 text-gray-300 focus:outline-none focus:border-primary h-16 resize-none text-sm" placeholder="Add a reply..."></textarea>
                            <div class="flex justify-end mt-1 gap-2">
                                <button class="text-gray-400 hover:text-white text-xs px-3 py-1" onclick="toggleReplyBox2('${c.id}')">Cancel</button>
                                <button class="bg-primary hover:bg-primary-dark text-white px-3 py-1 rounded text-xs font-semibold transition-colors" onclick="postReply2('${c.id}')">Reply</button>
                            </div>
                         </div>
                    </div>
                    ${c.replies && c.replies.length > 0 ? `
                        <div class="mt-2 space-y-3 pl-4 border-l-2 border-gray-800">
                            ${c.replies.map(r => `
                                <div class="flex gap-3">
                                    <img class="w-6 h-6 rounded-full object-cover bg-gray-700 flex-shrink-0" src="${r.avatar || ''}" onerror="this.src='https://ui-avatars.com/api/?name=${r.name}&background=random'"/>
                                    <div class="flex-1">
                                        <div class="flex items-baseline gap-2 mb-0.5">
                                            <span class="${r.color || 'text-primary'} font-bold text-xs">${r.name}</span>
                                            <span class="text-gray-500 text-[10px]">${r.time}</span>
                                        </div>
                                        <p class="text-gray-300 text-xs mb-1">${r.text}</p>
                                        <div class="flex items-center gap-3 text-[10px] text-gray-500">
                                            <button class="flex items-center gap-1 hover:text-white ${r.userAction === 'like' ? 'text-primary' : ''}" onclick="voteReply2('${c.id}', '${r.id}', 'like')">
                                                <span class="material-symbols-outlined text-[10px] ${r.userAction === 'like' ? 'fill-current' : ''}">thumb_up</span> ${r.likes || 0}
                                            </button>
                                            <button class="flex items-center gap-1 hover:text-white ${r.userAction === 'dislike' ? 'text-red-500' : ''}" onclick="voteReply2('${c.id}', '${r.id}', 'dislike')">
                                                <span class="material-symbols-outlined text-[10px] ${r.userAction === 'dislike' ? 'fill-current' : ''}">thumb_down</span> ${r.dislikes || 0}
                                            </button>
                                        </div>
                                    </div>
                                </div>
                            `).join('')}
                        </div>
                    ` : ''}
                </div>
            </div>
        `).join('');
    }
    function toggleReplyBox2(commentId) {
        const box = document.getElementById(`reply-box-2-${commentId}`);
        if (box) {
            box.classList.toggle('hidden');
        }
    }
    function postComment2() {
        const input = document.getElementById('comment-input-2');
        if (!input) return;
        
        const text = input.value.trim();
        if (!text) return;
        const newComment = {
            id: generateId(),
            name: 'Guest User',
            color: 'text-primary',
            time: 'Just now',
            text: text,
            avatar: '',
            likes: 0,
            dislikes: 0,
            userAction: null,
            replies: []
        };
        const saved = JSON.parse(localStorage.getItem('animeCommentsV2')) || [];
        saved.unshift(newComment);
        localStorage.setItem('animeCommentsV2', JSON.stringify(saved));
        input.value = '';
        // Reset counter
        const counter = document.getElementById('char-counter-2');
        if (counter) counter.textContent = '500 characters remaining';
        loadComments();
    }
    function postReply2(commentId) {
        const input = document.getElementById(`reply-input-2-${commentId}`);
        if (!input) return;
        
        const text = input.value.trim();
        if (!text) return;
        const allComments = JSON.parse(localStorage.getItem('animeCommentsV2')) || [];
        const commentIndex = allComments.findIndex(c => c.id === commentId);
        if (commentIndex !== -1) {
            const newReply = {
                id: generateId(),
                name: 'Guest User',
                color: 'text-primary',
                time: 'Just now',
                text: text,
                avatar: '',
                likes: 0,
                dislikes: 0,
                userAction: null
            };
            if (!allComments[commentIndex].replies) {
                allComments[commentIndex].replies = [];
            }
            allComments[commentIndex].replies.push(newReply);
            localStorage.setItem('animeCommentsV2', JSON.stringify(allComments));
            loadComments();
        }
    }
    function voteComment2(commentId, type) {
        const allComments = JSON.parse(localStorage.getItem('animeCommentsV2')) || [];
        const commentIndex = allComments.findIndex(c => c.id === commentId);
        if (commentIndex !== -1) {
            const comment = allComments[commentIndex];
            // Remove previous action effect
            if (comment.userAction === 'like') comment.likes--;
            if (comment.userAction === 'dislike') comment.dislikes--;
            // Apply new action or toggle off
            if (comment.userAction === type) {
                comment.userAction = null; // Toggle off if clicking same button
            } else {
                comment.userAction = type;
                if (type === 'like') comment.likes++;
                if (type === 'dislike') comment.dislikes++;
            }
            allComments[commentIndex] = comment;
            localStorage.setItem('animeCommentsV2', JSON.stringify(allComments));
            loadComments();
        }
    }
    function voteReply2(commentId, replyId, type) {
        const allComments = JSON.parse(localStorage.getItem('animeCommentsV2')) || [];
        const commentIndex = allComments.findIndex(c => c.id === commentId);
        if (commentIndex !== -1) {
            const replyIndex = allComments[commentIndex].replies.findIndex(r => r.id === replyId);
            if (replyIndex !== -1) {
                const reply = allComments[commentIndex].replies[replyIndex];
                 // Remove previous action effect
                if (reply.userAction === 'like') reply.likes--;
                if (reply.userAction === 'dislike') reply.dislikes--;
                // Apply new action or toggle off
                if (reply.userAction === type) {
                    reply.userAction = null;
                } else {
                    reply.userAction = type;
                    if (type === 'like') reply.likes++;
                    if (type === 'dislike') reply.dislikes++;
                }
                allComments[commentIndex].replies[replyIndex] = reply;
                localStorage.setItem('animeCommentsV2', JSON.stringify(allComments));
                loadComments();
            }
        }
    }
    // --- Rating Logic ---
    let voteCount = 1245;
    let currentRating = 6.3;
    let hasVoted = false;
    // Initialize Vote State from LocalStorage
    if(localStorage.getItem('hasVoted')) {
        const savedVote = localStorage.getItem('hasVoted');
        hasVoted = true;
        // Don't show voted state automatically on page load, only when modal is opened if we wanted
        // But for UX, let's keep the main button available but change its text maybe? 
        // For now, let's just respect the "Rate once" logic inside the modal.
        const mainBtn = document.getElementById('main-vote-btn');
        if (mainBtn) {
            mainBtn.innerText = "Voted";
            mainBtn.classList.add('bg-gray-300', 'text-gray-600', 'cursor-not-allowed');
            mainBtn.classList.remove('bg-white', 'text-black', 'hover:bg-gray-200');
        }
        // Adjust counts visually based on stored simulated data if we were persisting counts
    }
    function openVoteModal() {
        const modal = document.getElementById('vote-modal');
        modal.classList.remove('hidden');
        if (hasVoted) {
             document.getElementById('vote-options').classList.add('hidden');
             document.getElementById('voted-state').classList.remove('hidden');
             document.getElementById('user-vote-selection').textContent = localStorage.getItem('userVoteChoice');
        } else {
             document.getElementById('vote-options').classList.remove('hidden');
             document.getElementById('voted-state').classList.add('hidden');
        }
    }
    function closeVoteModal() {
        document.getElementById('vote-modal').classList.add('hidden');
    }
    function submitVote(voteType) {
        if(hasVoted) return;
        hasVoted = true;
        voteCount++;
        localStorage.setItem('hasVoted', 'true');
        localStorage.setItem('userVoteChoice', voteType);
        // Simulate score change based on vote
        let scoreChange = 0;
        if(voteType === 'Amazing') scoreChange = 0.1;
        if(voteType === 'Boring') scoreChange = -0.1;
        currentRating = parseFloat((currentRating + scoreChange).toFixed(1));
        // Update UI
        updateRatingUI();
        // Show Success in Modal
        document.getElementById('vote-options').classList.add('hidden');
        document.getElementById('voted-state').classList.remove('hidden');
        document.getElementById('user-vote-selection').textContent = voteType;
        // Update Main Button Style
        const mainBtn = document.getElementById('main-vote-btn');
        if (mainBtn) {
            mainBtn.innerText = "Voted";
            mainBtn.classList.add('bg-gray-300', 'text-gray-600', 'cursor-not-allowed');
            mainBtn.classList.remove('bg-white', 'text-black', 'hover:bg-gray-200');
        }
        // Close modal after delay
        setTimeout(() => {
            closeVoteModal();
        }, 2000);
    }
    function updateRatingUI() {
        const formattedCount = voteCount.toLocaleString() + ' votes';
        // Desktop
        const ratingScore = document.getElementById('rating-score');
        if (ratingScore) ratingScore.textContent = currentRating;
        
        const voteCountDisplay = document.getElementById('vote-count-display');
        if (voteCountDisplay) voteCountDisplay.textContent = formattedCount;
        
        // Mobile Sticky
        const mobileScore = document.getElementById('mobile-rating-score');
        if(mobileScore) mobileScore.textContent = currentRating;
        
        // Modal
        const modalRating = document.getElementById('modal-rating-score');
        if (modalRating) modalRating.textContent = currentRating;
        
        const modalVoteCount = document.getElementById('modal-vote-count');
        if (modalVoteCount) modalVoteCount.textContent = formattedCount;
    }
    // --- Init ---
    // Mobile Menu Toggle
    function toggleMobileMenu() {
        const menu = document.getElementById('mobile-menu');
        const overlay = document.getElementById('mobile-menu-overlay');
        menu.classList.toggle('menu-open');
        overlay.classList.toggle('hidden');
    }
    // Mobile Search Toggle
    function toggleMobileSearch() {
        const searchBar = document.getElementById('mobile-search-bar');
        searchBar.classList.toggle('hidden');
        // Focus on input when opened
        if (!searchBar.classList.contains('hidden')) {
            setTimeout(() => {
                const mobileInput = document.getElementById('mobile-search-input');
                if (mobileInput) mobileInput.focus();
            }, 100);
        }
    }
    // Mobile Dropdown Accordion
    function toggleMobileDropdown(id) {
        const dropdown = document.getElementById(id);
        const arrowId = id === 'genre-mobile' ? 'genre-arrow' : 'country-arrow';
        const arrow = document.getElementById(arrowId);
        dropdown.classList.toggle('hidden');
        if (dropdown.classList.contains('hidden')) {
            arrow.style.transform = 'rotate(0deg)';
        } else {
            arrow.style.transform = 'rotate(180deg)';
        }
    }
    // Run on load
    document.addEventListener('DOMContentLoaded', function() {
        // Only run original functions if 11ty data is not present
        if (!document.querySelector('#main-player') || !document.querySelector('#main-player').id) {
            renderPopular();
            renderRecommended();
            renderEpisodeList();
            updateNavButtons();
            loadComments();
        }
    });
</script>

</body></html>

src/search-data.json.njk file code:

---
permalink: /search-data.json
---
[
  {% for post in posts.posts %}
  {
    "id": "{{ post.id or post.title | slugify }}",
    "title": "{{ post.title | replace('"', '\\"') }}",
    "type": "{{ post.type or 'movie' }}",
    "year": "{{ post.year or '2023' }}",
    "rating": "{{ post.rating or 'N/A' }}",
    "duration": "{{ post.duration or 'N/A' }}",
    "genres": {{ post.genres | default([]) | json }},
    "poster": "{{ post.poster or 'https://via.placeholder.com/300x450?text=Poster' }}",
    "watchLink": "/watch/{{ post.title | slugify }}/",
    "description": "{{ post.description | replace('"', '\\"') | default('No description available.') }}"
  }{% if not loop.last %},{% endif %}
  {% endfor %}
]

src/search.njk file code:

layout: null
permalink: /search/index.html
---
<!DOCTYPE html>
<html class="dark" lang="en">
<head>
    <title>Search Results - Quravel</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script>
        tailwind.config = {
            darkMode: "class",
            theme: {
                extend: {
                    colors: {
                        primary: "#498BBB",
                        "background-dark": "#0B0E19",
                        "surface-dark": "#151926",
                        "text-light": "#E5E7EB"
                    }
                }
            }
        };
    </script>
</head>
<body class="bg-background-dark text-text-light">

    <nav class="p-6 border-b border-gray-800 flex justify-between items-center">
        <a href="/" class="text-2xl font-bold text-primary">QURAVEL</a>
        <div class="flex-1 max-w-md mx-10">
            <input type="text" id="search-page-input" placeholder="Search again..." 
                   class="w-full bg-surface-dark border border-gray-700 rounded-lg p-3 text-white focus:ring-2 focus:ring-primary outline-none">
        </div>
    </nav>

    <main class="container mx-auto px-6 py-10">
        <h1 class="text-2xl font-bold mb-2">Search Results for: <span id="query-display" class="text-primary"></span></h1>
        <p id="result-count" class="text-gray-400 mb-8 text-sm"></p>

        <div id="results-grid" class="grid grid-cols-2 sm:grid-cols-3 md:grid-cols-4 lg:grid-cols-6 gap-6">
            </div>

        <div id="no-results" class="hidden text-center py-20">
            <span class="material-icons text-6xl text-gray-700">search_off</span>
            <p class="text-xl text-gray-500 mt-4">No shows found matching your search.</p>
        </div>
    </main>

    <script>
        let allMovies = [];
        const grid = document.getElementById('results-grid');
        const queryDisplay = document.getElementById('query-display');
        const countDisplay = document.getElementById('result-count');
        const searchInput = document.getElementById('search-page-input');
        const noResults = document.getElementById('no-results');

        // 1. Load the data
        fetch('/search-data.json')
            .then(res => res.json())
            .then(data => {
                allMovies = data;
                performSearch(); // Run search as soon as data is ready
            });

        // 2. The Search Logic
        function performSearch() {
            // Get query from URL (?q=keyword)
            const urlParams = new URLSearchParams(window.location.search);
            const query = urlParams.get('q') || "";
            
            queryDisplay.innerText = `"${query}"`;
            searchInput.value = query;

            if (!query) return;

            const filtered = allMovies.filter(m => 
                m.title.toLowerCase().includes(query.toLowerCase()) || 
                m.genres.some(g => g.toLowerCase().includes(query.toLowerCase()))
            );

            displayResults(filtered);
        }

        // 3. Render Results with matching slugify logic
        function displayResults(movies) {
            countDisplay.innerText = `Found ${movies.length} results`;
            
            if (movies.length === 0) {
                grid.innerHTML = "";
                noResults.classList.remove('hidden');
                return;
            }

            noResults.classList.add('hidden');
            
            // Generate URLs with matching slug logic
            grid.innerHTML = movies.map(m => {
                // IMPORTANT: Use the exact same slug logic as in .eleventy.js
                const slug = m.title
                    .toLowerCase()                  // Convert to lowercase
                    .replace(/\s+/g, '-')           // Replace spaces with -
                    .replace(/[^\w\-]+/g, '')       // Remove all non-word chars (fixes :, !, etc.)
                    .replace(/\-\-+/g, '-')         // Replace multiple - with single -
                    .replace(/^-+/, '')             // Trim - from start
                    .replace(/-+$/, '');            // Trim - from end
                
                // Use the slug in the URL - adjust path based on your actual URL structure
                // IMPORTANT: Make sure this matches your permalink structure in streaming.njk
                // If streaming.njk uses /watch/{{ post.title | slugify }}/ then use:
                const url = `/watch/${slug}/`;
                
                return `
                <a href="${url}" class="group block">
                    <div class="relative overflow-hidden rounded-xl aspect-[2/3] mb-3">
                        <img src="${m.poster}" class="object-cover w-full h-full group-hover:scale-110 transition duration-500">
                        <div class="absolute bottom-0 left-0 right-0 p-3 bg-gradient-to-t from-black to-transparent">
                            <span class="text-[10px] bg-primary px-2 py-0.5 rounded font-bold uppercase">${m.type}</span>
                        </div>
                    </div>
                    <h3 class="font-bold text-sm leading-tight group-hover:text-primary transition">${m.title}</h3>
                    <div class="text-[11px] text-gray-500 mt-1">${m.year} • ${m.rating} ★</div>
                </a>
                `;
            }).join('');
        }

        // 4. Update search when typing on this page
        searchInput.addEventListener('input', (e) => {
            const newQuery = e.target.value;
            // Update URL without reloading page
            window.history.replaceState(null, "", `?q=${newQuery}`);
            performSearch();
        });
    </script>
</body>
</html>

src/_includes/layouts/base.njk file code:

<!DOCTYPE html>
<html class="dark" lang="en">
<head>
    <meta charset="utf-8"/>
    <meta content="width=device-width, initial-scale=1.0" name="viewport"/>
    <title>{{ title or "Quravel - Free Streaming" }}</title>
    <meta name="algolia-site-verification" content="F6BCD1C35FCD1EB6" />
    <script src="https://cdn.tailwindcss.com?plugins=forms,container-queries"></script>
    <script>
        tailwind.config = {
            darkMode: "class",
            theme: {
                extend: {
                    colors: {
                        primary: "#498BBB", 
                        "background-light": "#F3F4F6",
                        "background-dark": "#0B0E19",
                        "surface-dark": "#151926",
                        "footer-dark": "#0C0E14",
                        "text-light": "#E5E7EB",
                        "text-muted": "#9CA3AF"
                    },
                    fontFamily: {
                        display: ["Inter", "sans-serif"],
                        body: ["Inter", "sans-serif"],
                    },
                    borderRadius: {
                        DEFAULT: "0.5rem",
                    },
                },
            },
        };
    </script>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&amp;display=swap" rel="stylesheet"/>
    <link href="https://fonts.googleapis.com/css2?family=Material+Symbols+Outlined:wght,FILL@100..700,0..1&amp;display=swap" rel="stylesheet"/>
    <style>
        body {
            font-family: 'Inter', sans-serif;
        }
        .hide-scrollbar::-webkit-scrollbar {
            display: none;
        }
        .hide-scrollbar {
            -ms-overflow-style: none;
            scrollbar-width: none;
        }
        /* Add other common styles here */
    </style>
</head>
<body class="bg-background-light dark:bg-background-dark text-gray-900 dark:text-text-light transition-colors duration-300 min-h-screen flex flex-col relative">

    {% include "partials/header.njk" %}

    <main class="flex-grow pt-20 pb-12">
        {{ content | safe }}
    </main>

    {% include "partials/footer.njk" %}

    <script>
        // Common JavaScript functions
        // Mobile Menu Toggle
        function toggleMobileMenu() {
            const menu = document.getElementById('mobile-menu');
            const overlay = document.getElementById('mobile-menu-overlay');
            menu.classList.toggle('menu-open');
            overlay.classList.toggle('hidden');
        }
        
        // Mobile Search Toggle
        function toggleMobileSearch() {
            const searchBar = document.getElementById('mobile-search-bar');
            searchBar.classList.toggle('hidden');
        }
        
        // Mobile Dropdown Accordion
        function toggleMobileDropdown(id) {
            const dropdown = document.getElementById(id);
            dropdown.classList.toggle('hidden');
            const arrowId = id === 'genre-mobile' ? 'genre-arrow' : 'country-arrow';
            const arrow = document.getElementById(arrowId);
            if (dropdown.classList.contains('hidden')) {
                arrow.style.transform = 'rotate(0deg)';
            } else {
                arrow.style.transform = 'rotate(180deg)';
            }
        }
    </script>
</body>
</html>

src/_includes/partials/header.njk file code;

<!-- Mobile Menu Overlay -->
<div class="fixed inset-0 bg-black/50 z-40 hidden lg:hidden" id="mobile-menu-overlay" onclick="toggleMobileMenu()"></div>

<!-- Mobile Menu -->
<div class="fixed top-0 left-0 h-full w-64 bg-white dark:bg-[#151926] z-50 transform -translate-x-full lg:hidden overflow-y-auto shadow-2xl" id="mobile-menu">
    <div class="p-4 border-b border-gray-200 dark:border-gray-700 flex justify-between items-center">
        <img alt="Quravel Logo" class="h-8 object-contain" src="https://cdn.imgchest.com/files/449aa5626e23.png"/>
        <button class="text-gray-500 hover:text-primary" onclick="toggleMobileMenu()">
            <span class="material-symbols-outlined">close</span>
        </button>
    </div>
    <div class="p-4 space-y-4">
        <a class="block text-sm font-medium hover:text-primary py-2 border-b border-gray-100 dark:border-gray-800" href="/">Home</a>
        
        <div class="py-2 border-b border-gray-100 dark:border-gray-800">
            <button class="flex items-center justify-between w-full text-sm font-medium hover:text-primary focus:outline-none" onclick="toggleMobileDropdown('genre-mobile')">
                <span>Genre</span>
                <span class="material-symbols-outlined text-sm transform transition-transform" id="genre-arrow">expand_more</span>
            </button>
            <div class="hidden mt-2 ml-4 space-y-2 text-sm text-gray-500 dark:text-gray-400" id="genre-mobile">
                <!-- Genre links -->
            </div>
        </div>
        
        <div class="py-2 border-b border-gray-100 dark:border-gray-800">
            <button class="flex items-center justify-between w-full text-sm font-medium hover:text-primary focus:outline-none" onclick="toggleMobileDropdown('country-mobile')">
                <span>Country</span>
                <span class="material-symbols-outlined text-sm transform transition-transform" id="country-arrow">expand_more</span>
            </button>
            <div class="hidden mt-2 ml-4 space-y-2 text-sm text-gray-500 dark:text-gray-400" id="country-mobile">
                <!-- Country links -->
            </div>
        </div>
        
        <a class="block text-sm font-medium hover:text-primary py-2 border-b border-gray-100 dark:border-gray-800" href="#">Top IMDB</a>
        <a class="block text-sm font-medium hover:text-primary py-2 border-b border-gray-100 dark:border-gray-800" href="#">Updates</a>
        <a class="block text-sm font-medium hover:text-primary py-2" href="https://editor.wix.com/wixel-view/forms/7405900275916997729">Sent Request</a>
    </div>
</div>

<!-- Header -->
<header class="fixed top-0 w-full z-40 bg-white/95 dark:bg-[#0B0E19]/95 backdrop-blur-sm border-b border-gray-200 dark:border-gray-800 shadow-sm">
    <div class="container mx-auto px-4 h-16 flex items-center justify-between">
        <div class="flex items-center gap-4">
            <button class="lg:hidden text-gray-600 dark:text-gray-200 focus:outline-none" onclick="toggleMobileMenu()">
                <span class="material-symbols-outlined text-3xl">menu</span>
            </button>
            <nav class="hidden lg:flex items-center space-x-6 text-sm font-medium">
                <a class="hover:text-primary transition-colors {% if page.url == '/' %}text-primary{% endif %}" href="/">Home</a>
                
                <!-- Genre Dropdown -->
                <div class="relative group">
                    <button class="flex items-center space-x-1 hover:text-primary transition-colors focus:outline-none py-4">
                        <span>Genre</span>
                        <span class="material-symbols-outlined text-sm">expand_more</span>
                    </button>
                    <div class="absolute top-full left-0 w-[600px] bg-white dark:bg-[#1A1D29] rounded-b-lg shadow-xl opacity-0 invisible group-hover:opacity-100 group-hover:visible transition-all duration-200 border-t-2 border-primary grid grid-cols-4 gap-4 p-6 z-50">
                        <!-- Genre links -->
                    </div>
                </div>
                
                <!-- Country Dropdown -->
                <div class="relative group">
                    <button class="flex items-center space-x-1 hover:text-primary transition-colors focus:outline-none py-4">
                        <span>Country</span>
                        <span class="material-symbols-outlined text-sm">expand_more</span>
                    </button>
                    <div class="absolute top-full left-0 w-[600px] bg-white dark:bg-[#1A1D29] rounded-b-lg shadow-xl opacity-0 invisible group-hover:opacity-100 group-hover:visible transition-all duration-200 border-t-2 border-primary grid grid-cols-4 gap-4 p-6 z-50">
                        <!-- Country links -->
                    </div>
                </div>
                
                <a class="hover:text-primary transition-colors" href="#">Top IMDB</a>
                <a class="hover:text-primary transition-colors" href="#">Updates</a>
                <a class="hover:text-primary transition-colors" href="https://editor.wix.com/wixel-view/forms/7405900275916997729">Sent Request</a>
            </nav>
        </div>
        
        <div class="absolute left-1/2 transform -translate-x-1/2">
            <a class="block" href="/">
                <img alt="Quravel Logo" class="h-8 md:h-10 object-contain" src="https://lh3.googleusercontent.com/aida-public/AB6AXuCqLjw2b3zIJYAUXSR-0wnqCCSiHxBpWopeX4YkK91UxQUQErP8E3fBTKHGPMn44svm6TkV73RcFl8uZYm6unBNmb_F5B0XAtvw-yAnSKJzR-DIoMzoWA519xKDUhoH8DE4biRu7joxNso-Ui3U1pLkiOaL02GPgdP6zHD6BmF10aMv5toxV6-cghRon9fHKmJihBEYz21Rmh4zx3Kz6pm1xk_o-fcYhwfAxeV0fx3eRLBxYIrLqzBBjdbVn1H1B5RVpSEDH9EgFZ4"/>
            </a>
        </div>
        
        <div class="flex items-center space-x-4 relative">
            <!-- Desktop Search -->
            <div class="relative hidden sm:block">
                <input class="bg-gray-100 dark:bg-gray-800 text-sm rounded-full py-2 pl-4 pr-10 focus:outline-none focus:ring-2 focus:ring-primary w-48 transition-all dark:text-white border-none" 
                       placeholder="Search..." type="text" id="main-search"/>
                <span class="material-symbols-outlined absolute right-3 top-2 text-gray-400 text-lg">search</span>
                
                <!-- Search Suggestions Dropdown -->
                <div id="search-suggestions" class="absolute hidden w-full mt-2 bg-surface-dark rounded-lg shadow-2xl z-50 overflow-hidden border border-gray-700">
                    <div id="suggestions-list" class="max-h-96 overflow-y-auto"></div>
                    <a href="/search" id="view-all-btn" class="block w-full text-center p-3 bg-primary text-white font-bold hover:bg-opacity-90">
                        View All Results
                    </a>
                </div>
            </div>
            <button class="sm:hidden text-gray-600 dark:text-gray-200" onclick="toggleMobileSearch()">
                <span class="material-symbols-outlined">search</span>
            </button>
        </div>
    </div>
    
    <!-- Mobile Search Bar -->
    <div class="hidden sm:hidden bg-white dark:bg-[#0B0E19] border-b border-gray-200 dark:border-gray-800 p-3 absolute w-full top-16 left-0 z-30" id="mobile-search-bar">
        <div class="relative">
            <input class="w-full bg-gray-100 dark:bg-gray-800 text-sm rounded-full py-2 pl-4 pr-10 focus:outline-none focus:ring-2 focus:ring-primary dark:text-white border-none" 
                   placeholder="Search movies, shows..." type="text" id="mobile-search"/>
            <span class="material-symbols-outlined absolute right-3 top-2 text-gray-400 text-lg">search</span>

            <!-- Mobile Search Suggestions -->
            <div id="mobile-search-suggestions" class="absolute hidden w-full mt-2 bg-surface-dark rounded-lg shadow-2xl z-50 overflow-hidden border border-gray-700">
                <div id="mobile-suggestions-list" class="max-h-80 overflow-y-auto"></div>
                <a href="/search" id="mobile-view-all-btn" class="block w-full text-center p-3 bg-primary text-white font-bold hover:bg-opacity-90">
                    View All Results
                </a>
            </div>
        </div>
    </div>
</header>
